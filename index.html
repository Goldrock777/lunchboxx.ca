<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>LUNCHBOXX - High Protein Meals</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    button{touch-action:manipulation}
    :root{--orange:#FF4D00;--yellow:#FFB800;--dark:#0A0A0A;--gray1:#111;--gray2:#1a1a1a;--gray3:#888;--white:#FFF;--green:#00D26A;--blue:#0066FF;--font1:'Bebas Neue',sans-serif;--font2:'Inter',sans-serif}
    html,body{font-family:var(--font2);background:#000;color:var(--white);margin:0;padding:0;-webkit-font-smoothing:antialiased;touch-action:manipulation;font-weight:400;letter-spacing:-0.01em}
    body{min-height:100vh;display:flex;justify-content:center;align-items:center}
    
    /* iPhone Frame - Desktop Only */
    .iphone-frame{display:none}
    @media (min-width:550px){
      .iphone-frame{
        display:block;
        position:relative;
        width:390px;
        height:844px;
        background:linear-gradient(135deg,#1a1a1a,#0d0d0d);
        border-radius:54px;
        padding:12px;
        box-shadow:
          0 0 0 3px #2a2a2a,
          0 0 0 6px #1a1a1a,
          0 50px 100px rgba(0,0,0,.8),
          inset 0 0 20px rgba(255,255,255,.02);
      }
      .iphone-frame::before{
        content:'';
        position:absolute;
        top:0;
        left:50%;
        transform:translateX(-50%);
        width:160px;
        height:34px;
        background:#0d0d0d;
        border-radius:0 0 24px 24px;
        z-index:1000;
      }
      .iphone-frame::after{
        content:'';
        position:absolute;
        top:14px;
        left:50%;
        transform:translateX(-50%);
        width:80px;
        height:8px;
        background:#1a1a1a;
        border-radius:10px;
      }
      .iphone-notch{
        position:absolute;
        top:16px;
        left:50%;
        transform:translateX(-50%);
        width:12px;
        height:12px;
        background:radial-gradient(circle,#0a2a3a,#051520);
        border-radius:50%;
        z-index:1001;
        box-shadow:inset 0 0 3px rgba(0,100,150,.5);
      }
      .iphone-speaker{
        position:absolute;
        top:18px;
        left:50%;
        transform:translateX(-50%) translateX(20px);
        width:50px;
        height:6px;
        background:#1a1a1a;
        border-radius:10px;
        z-index:1001;
      }
      .home-indicator{
        position:absolute;
        bottom:8px;
        left:50%;
        transform:translateX(-50%);
        width:120px;
        height:5px;
        background:rgba(255,255,255,.2);
        border-radius:10px;
        z-index:1000;
      }
      .iphone-status-bar{
        position:absolute;
        top:14px;
        left:30px;
        right:30px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        z-index:999;
        padding:0 5px;
      }
      .status-time{
        font-size:14px;
        font-weight:600;
        color:white;
      }
      .status-icons{
        display:flex;
        align-items:center;
        gap:5px;
      }
      .status-icons svg{
        opacity:0.9;
      }
      .status-battery{
        width:24px;
        height:11px;
        border:1.5px solid rgba(255,255,255,.9);
        border-radius:3px;
        padding:1px;
        position:relative;
      }
      .status-battery::after{
        content:'';
        position:absolute;
        right:-4px;
        top:50%;
        transform:translateY(-50%);
        width:2px;
        height:5px;
        background:rgba(255,255,255,.9);
        border-radius:0 2px 2px 0;
      }
      .battery-level{
        width:80%;
        height:100%;
        background:#32D74B;
        border-radius:1px;
      }
      .iphone-screen{
        width:100%;
        height:100%;
        border-radius:44px;
        overflow:hidden;
        position:relative;
        background:var(--dark);
        padding-top:44px;
      }
      .app{
        width:100%;
        height:100%;
        overflow-y:auto;
        overflow-x:hidden;
      }
      .page{min-height:100%}
    }
    
    /* Mobile - No Frame */
    @media (max-width:549px){
      .iphone-frame{display:block!important;background:none;padding:0;width:100%;height:auto;border-radius:0;box-shadow:none}
      .iphone-frame::before,.iphone-frame::after{display:none}
      .iphone-notch,.iphone-speaker,.home-indicator,.iphone-status-bar{display:none}
      .iphone-screen{display:block;padding-top:0;border-radius:0;height:auto}
      .app{width:100%;max-width:100%;min-height:100vh;border-radius:0}
      .page{min-height:100vh}
    }
    
    .app{background:var(--dark);position:relative;overflow-x:hidden}
    .app::-webkit-scrollbar{display:none}
    .app{-ms-overflow-style:none;scrollbar-width:none}
    .page{display:none;flex-direction:column}.page.active{display:flex}
    
    /* Toast Notifications */
    .toast-container{position:fixed;top:20px;left:50%;transform:translateX(-50%);z-index:10000;display:flex;flex-direction:column;gap:8px;pointer-events:none;width:90%;max-width:380px}
    .toast{background:var(--gray1);border:1px solid var(--gray2);border-radius:12px;padding:14px 18px;display:flex;align-items:center;gap:12px;box-shadow:0 10px 40px rgba(0,0,0,.5);animation:toastIn .3s ease;pointer-events:auto}
    .toast.success{border-color:rgba(0,210,106,.3);background:linear-gradient(135deg,rgba(0,210,106,.1),transparent)}
    .toast.success .toast-icon{color:var(--green)}
    .toast.info{border-color:rgba(0,102,255,.3);background:linear-gradient(135deg,rgba(0,102,255,.1),transparent)}
    .toast.info .toast-icon{color:var(--blue)}
    .toast.hiding{animation:toastOut .3s ease forwards}
    .toast-icon{font-size:20px;flex-shrink:0}
    .toast-msg{font-size:13px;font-weight:500;line-height:1.4}
    @keyframes toastIn{0%{opacity:0;transform:translateY(-20px) scale(.9)}100%{opacity:1;transform:translateY(0) scale(1)}}
    @keyframes toastOut{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-20px)}}
    
    /* Page Transitions */
    .page.active{animation:pageIn .35s ease}
    @keyframes pageIn{0%{opacity:0}100%{opacity:1}}
    
    /* Micro-interactions */
    .btn-bounce{transition:transform .1s}
    .btn-bounce:active{transform:scale(.96)}
    .card-lift{transition:transform .2s,box-shadow .2s}
    .card-lift:hover{transform:translateY(-2px)}
    
    /* Confetti */
    .confetti-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9998;overflow:hidden}
    .confetti{position:absolute;width:10px;height:10px;top:-10px}
    
    /* Order Number Badge */
    .order-number{display:inline-block;background:var(--gray2);border-radius:8px;padding:8px 16px;font-family:var(--font1);font-size:18px;letter-spacing:2px;color:var(--orange);margin-bottom:16px;border:1px solid var(--gray1)}
    
    /* Pulse Animation */
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .pulse{animation:pulse 2s infinite}
    
    /* Verified Badge */
    .verified-badge{display:inline-flex;align-items:center;gap:4px;font-size:10px;color:var(--green);font-weight:600;background:rgba(0,210,106,.1);padding:4px 8px;border-radius:20px;margin-left:8px}
    .verified-badge svg{width:12px;height:12px}

    /* Landing Page */
    .logo{text-align:center;padding:20px;font-family:var(--font1);font-size:28px;letter-spacing:10px;color:var(--orange)}
    .hero{padding:20px 24px 32px;text-align:center}
    .hero h1{font-family:var(--font1);font-size:clamp(42px,12vw,64px);line-height:.9;color:var(--white);margin-bottom:16px;letter-spacing:3px}
    .hero h1 span{color:var(--green)}
    .hero .subline{font-size:15px;color:var(--gray3);margin-bottom:28px;line-height:1.5;max-width:320px;margin-left:auto;margin-right:auto}

    /* Trust Strip */
    .trust{display:flex;justify-content:center;gap:8px;padding:16px 12px;background:var(--gray1);margin:0 20px 20px;border-radius:12px}
    .trust-item{flex:1;text-align:center;padding:8px 4px}
    .trust-item h4{font-family:var(--font1);font-size:clamp(13px,3.5vw,16px);color:var(--white);margin-bottom:4px;letter-spacing:0.5px}
    .trust-item p{font-size:clamp(10px,2.5vw,12px);color:var(--gray3)}

    /* Toggle - 3 options */
    .toggle-wrap{padding:0 20px 20px}
    .menu-toggle{display:flex;background:var(--gray2);border-radius:10px;padding:4px}
    .menu-toggle button{flex:1;padding:12px 8px;border:none;background:transparent;color:var(--gray3);font-family:var(--font1);font-size:13px;letter-spacing:1px;cursor:pointer;border-radius:8px;transition:all .2s}
    .menu-toggle button.active{background:var(--orange);color:var(--white)}
    .menu-toggle button.dessert-active{background:#D4A574;color:var(--dark)}
    .menu-toggle button.snacks-active{background:#E8A817;color:var(--dark)}
    .menu-toggle button.team-active{background:var(--blue);color:var(--white)}

    /* Dessert Section */
    .dessert-section{padding:0 20px 20px;display:none}
    .dessert-section.show{display:block}
    
    /* Snacks Section */
    .snacks-section{padding:0 20px 20px;display:none}
    .snacks-section.show{display:block}
    .snacks-menu{padding-top:20px}
    .snacks-header{text-align:center;margin-bottom:20px}
    .snacks-header h2{font-family:var(--font1);font-size:28px;color:#8B9A46;margin-bottom:4px;letter-spacing:2px}
    .snacks-header p{font-size:13px;color:var(--gray3)}
    .snacks-card{background:var(--gray1);border:2px solid #8B9A46;border-radius:16px;padding:20px;cursor:pointer;transition:all .2s;margin-bottom:12px}
    .snacks-card:hover{border-color:#A4B85C;transform:translateY(-2px)}
    .snacks-card-header{display:flex;align-items:center;gap:14px;margin-bottom:10px}
    .snacks-card-icon{width:50px;height:50px;background:linear-gradient(135deg,#8B9A46,#6B7A36);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
    .snacks-card-title{font-family:var(--font1);font-size:20px;color:var(--white);letter-spacing:1px}
    .snacks-card-subtitle{font-size:12px;color:#8B9A46;margin-top:2px}
    .snacks-card-desc{font-size:13px;color:var(--gray3);margin-bottom:12px;line-height:1.4}
    .snacks-card-footer{display:flex;justify-content:space-between;align-items:center}
    .snacks-card-price{font-family:var(--font1);font-size:18px;color:#8B9A46}
    .snacks-card-price span{font-size:12px;color:var(--gray3);font-family:var(--font2)}
    .snacks-card-cta{font-size:12px;color:#8B9A46;font-weight:600;display:flex;align-items:center;gap:4px}
    
    /* DOGBOXX Section */
    .dogboxx-section{display:none}
    .dogboxx-section.show{display:block}
    .dogboxx-section .dessert-header h2{color:#D4442A}
    .dogboxx-section .dessert-header .partner span{color:#D4442A}
    .dogboxx-section .cookie-builder{border-color:#4A1510;background:linear-gradient(135deg,#1a1210,#0d0908)}
    .dogboxx-section .dessert-cta{background:linear-gradient(135deg,#D4442A,#8B1E0D)}
    .dogboxx-section .dessert-cta:hover{background:linear-gradient(135deg,#E85540,#D4442A)}
    .dogboxx-section .box-summary{background:rgba(74,21,16,.4)}
    .dogboxx-section .summary-row.total span:last-child{color:#D4442A}
    .dogboxx-section .order-now-link:hover{border-color:#D4442A;color:#D4442A}
    .dog-hero{text-align:center;margin-bottom:20px;padding:20px 0}
    .dog-box-visual{position:relative;display:inline-block}
    .dog-box-icon{margin-bottom:8px}
    .dog-count-display{font-family:var(--font1);font-size:48px;color:#E8A817;letter-spacing:2px}
    .dog-label{font-family:var(--font1);font-size:14px;color:var(--gray3);letter-spacing:3px}
    .dog-tagline{font-size:12px;color:var(--gray3);margin-top:8px}
    .dog-size-card{background:var(--gray1);border:2px solid var(--gray2);border-radius:14px;padding:16px;text-align:center;cursor:pointer;transition:all .2s;flex:1}
    .dog-size-card:hover{border-color:#D4442A;transform:translateY(-2px)}
    .dog-size-card.selected{border-color:#D4442A;background:rgba(212,68,42,0.1)}
    .dog-size-count{font-family:var(--font1);font-size:36px;color:var(--white);margin-bottom:2px}
    .dog-size-label{font-family:var(--font1);font-size:12px;color:var(--gray3);letter-spacing:2px;margin-bottom:6px}
    .dog-size-serves{font-size:10px;color:var(--gray3);margin-bottom:8px}
    .dog-size-price{font-family:var(--font1);font-size:20px;color:#D4442A}
    .dog-pop-badge{font-size:8px;background:#D4442A;color:#FFF;padding:3px 8px;border-radius:10px;display:inline-block;margin-top:6px;font-weight:700;letter-spacing:1px}
    .dog-included{background:var(--gray2);border-radius:10px;padding:14px;margin-top:16px}
    .dog-included-header{font-family:var(--font1);font-size:11px;color:#E8A817;letter-spacing:2px;margin-bottom:10px}
    .dog-included-items{display:flex;flex-wrap:wrap;gap:8px}
    .dog-included-item{font-size:11px;color:var(--gray3);display:flex;align-items:center;gap:6px;background:var(--gray1);padding:6px 10px;border-radius:8px}
    .dog-included-item .inc-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
    .dog-free-drink{background:linear-gradient(135deg,rgba(232,168,23,0.15),rgba(232,168,23,0.05));border:2px solid rgba(232,168,23,0.3);border-radius:12px;padding:14px;text-align:center;margin-top:16px}
    .dog-free-drink .drink-icon{font-size:24px;margin-bottom:4px}
    .dog-free-drink .drink-text{font-family:var(--font1);font-size:13px;color:#E8A817;letter-spacing:1px}
    .dog-free-drink .drink-sub{font-size:11px;color:var(--gray3);margin-top:2px}
    .dog-new-badge{display:inline-block;background:#E8A817;color:var(--dark);font-family:var(--font1);font-size:9px;padding:3px 8px;border-radius:10px;letter-spacing:1px;margin-bottom:4px;animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.7}}

    /* WINGBOXX Section */
    .wingboxx-section{display:none}
    .wingboxx-section.show{display:block}
    .wingboxx-section .dessert-header h2{color:#E85D04}
    .wingboxx-section .dessert-header .partner span{color:#E85D04}
    .wingboxx-section .cookie-builder{border-color:#5D2A02;background:linear-gradient(135deg,#1c1410,#0d0a08)}
    .wingboxx-section .dessert-cta{background:linear-gradient(135deg,#E85D04,#DC2F02)}
    .wingboxx-section .dessert-cta:hover{background:linear-gradient(135deg,#F06E1D,#E85D04)}
    .wingboxx-section .box-summary{background:rgba(93,42,2,.3)}
    .wingboxx-section .summary-row.total span:last-child{color:#E85D04}
    .wingboxx-section .order-now-link:hover{border-color:#E85D04;color:#E85D04}
    
    /* Wing Hero Visual */
    .wing-hero{text-align:center;padding:24px 0;margin-bottom:16px;background:linear-gradient(135deg,rgba(232,93,4,.1),transparent);border-radius:16px}
    .wing-box-visual{position:relative;display:inline-block}
    .wing-box-icon{margin-bottom:8px;filter:drop-shadow(0 4px 12px rgba(232,93,4,.4))}
    .wing-count-display{font-family:var(--font1);font-size:52px;color:#E85D04;text-shadow:0 2px 10px rgba(232,93,4,.4);line-height:1}
    .wing-label{font-family:var(--font1);font-size:12px;color:var(--gray3);letter-spacing:3px;margin-top:4px}
    .wing-tagline{font-size:13px;color:var(--gray3);margin-top:12px}
    
    /* Wing Size Cards */
    .wing-sizes{display:flex;gap:8px}
    .wing-size-card{flex:1;background:var(--gray2);border:2px solid var(--gray2);border-radius:12px;padding:14px 8px;text-align:center;cursor:pointer;transition:all .2s;position:relative;overflow:hidden}
    .wing-size-card:hover{border-color:rgba(232,93,4,.4)}
    .wing-size-card.selected{border-color:#E85D04;background:rgba(232,93,4,.15)}
    .wing-size-count{font-family:var(--font1);font-size:28px;color:var(--white)}
    .wing-size-card.selected .wing-size-count{color:#E85D04}
    .wing-size-label{font-family:var(--font1);font-size:11px;color:var(--gray3);letter-spacing:1px;margin-top:2px}
    .wing-size-serves{font-size:10px;color:var(--gray3);margin-top:4px}
    .wing-size-price{font-family:var(--font1);font-size:16px;color:#E85D04;margin-top:6px}
    .wing-pop-badge{position:absolute;top:6px;right:-20px;background:#E85D04;color:var(--white);font-size:8px;padding:2px 20px;transform:rotate(45deg);font-family:var(--font1)}
    
    /* Wing Flavors */
    .wing-flavors{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    .wing-flavor{display:flex;align-items:center;gap:10px;padding:12px;background:var(--gray2);border:2px solid var(--gray2);border-radius:10px;cursor:pointer;transition:all .2s}
    .wing-flavor:hover{border-color:rgba(232,93,4,.4)}
    .wing-flavor.selected{border-color:#E85D04;background:rgba(232,93,4,.15)}
    .wing-flavor .flavor-dot{width:14px;height:14px;border-radius:50%;flex-shrink:0;box-shadow:0 2px 4px rgba(0,0,0,.3)}
    .wing-flavor .flavor-name{flex:1;font-size:13px;color:var(--white);font-weight:500}
    .wing-flavor.selected .flavor-name{color:#E85D04}
    .wing-flavor .flavor-heat{font-size:9px;color:var(--gray3);background:var(--gray1);padding:3px 8px;border-radius:10px}
    
    /* Wing Included */
    .wing-included{background:rgba(232,93,4,.08);border:1px solid rgba(232,93,4,.2);border-radius:10px;padding:12px;margin-top:14px}
    .wing-included-header{font-size:10px;color:#E85D04;font-family:var(--font1);letter-spacing:1px;margin-bottom:10px;text-align:center}
    .wing-included-items{display:flex;gap:16px;justify-content:center}
    .wing-included-item{font-size:12px;color:var(--white);display:flex;align-items:center;gap:6px}
    .wing-included-item .inc-dot{width:10px;height:10px;border-radius:50%}
    
    /* Wing Dips */
    .wing-dips{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
    .wing-dip{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 4px;background:var(--gray2);border:2px solid var(--gray2);border-radius:8px;cursor:pointer;transition:all .2s;font-size:11px;color:var(--gray3)}
    .wing-dip:hover{border-color:rgba(232,93,4,.4)}
    .wing-dip.selected{border-color:#E85D04;background:rgba(232,93,4,.15);color:#E85D04}
    .wing-dip .dip-dot{width:20px;height:20px;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}
    
    /* Dessert Menu */
    .dessert-menu{padding:20px 0}
    .dessert-menu-header{text-align:center;margin-bottom:20px}
    .dessert-menu-header h2{font-family:var(--font1);font-size:28px;color:var(--white);margin-bottom:4px;letter-spacing:3px}
    .dessert-menu-header p{font-size:12px;color:var(--gray3)}
    .dessert-cards{display:flex;flex-direction:column;gap:16px}
    .dessert-card{background:linear-gradient(135deg,#2a2318,#1a1510);border:2px solid #3d3428;border-radius:16px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px}
    .dessert-card:hover{border-color:#D4A574;transform:translateY(-2px)}
    .dessert-card:active{transform:scale(.98)}
    .dessert-card-icon{width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:32px}
    .dessert-card-icon.cookie{background:linear-gradient(135deg,#D4A574,#8B5A2B)}
    .dessert-card-icon.brownie{background:linear-gradient(135deg,#5D3A1A,#3D2510)}
    .dessert-card-info{flex:1}
    .dessert-card-name{font-family:var(--font1);font-size:20px;color:var(--white);letter-spacing:2px;margin-bottom:4px}
    .dessert-card-desc{font-size:12px;color:var(--gray3);margin-bottom:6px}
    .dessert-card-price{font-size:13px;color:#D4A574;font-weight:600}
    .dessert-card-arrow{color:var(--gray3);font-size:20px}
    .dessert-card.brownie-card{border-color:#3D2510}
    .dessert-card.brownie-card:hover{border-color:#5D3A1A}
    .dessert-card.brownie-card .dessert-card-price{color:#8B6914}
    
    /* Sub-sections hidden by default */
    .cookieboxx-section,.brownieboxx-section{display:none}
    .cookieboxx-section.show,.brownieboxx-section.show{display:block}
    
    /* Back button */
    .dessert-back{display:flex;align-items:center;gap:8px;background:none;border:none;color:var(--gray3);font-size:13px;cursor:pointer;padding:8px 0;margin-bottom:12px}
    .dessert-back:hover{color:var(--white)}
    .dessert-back svg{width:18px;height:18px}
    
    .dessert-header{text-align:center;margin-bottom:16px}
    .dessert-header h2{font-family:var(--font1);font-size:32px;color:#D4A574;margin-bottom:4px;letter-spacing:3px}
    .dessert-header .partner{font-size:12px;color:var(--gray3)}
    .dessert-header .partner span{color:#D4A574;font-weight:600}
    
    /* Partner Branding - Crumbl Style */
    .partner-badge{display:flex;align-items:center;justify-content:center;gap:8px;margin:8px auto 16px;padding:8px 16px;background:rgba(212,165,116,.08);border:1px solid rgba(212,165,116,.2);border-radius:100px;width:fit-content;cursor:pointer;transition:all .3s}
    .partner-badge:hover{background:rgba(212,165,116,.15);border-color:rgba(212,165,116,.4);transform:scale(1.02)}
    .partner-badge .pb-avatar{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#D4A574,#8B6914);display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0}
    .partner-badge .pb-text{font-size:11px;color:var(--gray3);line-height:1.3}
    .partner-badge .pb-text strong{color:#D4A574;font-weight:700;display:block;font-size:12px}
    .partner-badge .pb-ig{font-size:11px;color:var(--gray3);opacity:.7}
    .partner-badge .pb-arrow{color:var(--gray3);font-size:16px;margin-left:4px}
    .brownieboxx-section .partner-badge{background:rgba(139,105,20,.08);border-color:rgba(139,105,20,.2)}
    .brownieboxx-section .partner-badge:hover{background:rgba(139,105,20,.15);border-color:rgba(139,105,20,.4)}
    .brownieboxx-section .partner-badge .pb-text strong{color:#8B6914}
    
    /* Weekly Flavor Drop Banner */
    .flavor-drop{background:linear-gradient(135deg,rgba(212,165,116,.1),rgba(212,165,116,.03));border:1px solid rgba(212,165,116,.15);border-radius:16px;padding:14px 16px;margin-bottom:16px;text-align:center}
    .flavor-drop .drop-label{font-size:10px;font-weight:700;letter-spacing:2px;color:#D4A574;text-transform:uppercase;margin-bottom:4px}
    .flavor-drop .drop-title{font-family:var(--font1);font-size:18px;color:var(--white);margin-bottom:2px}
    .flavor-drop .drop-timer{font-size:11px;color:var(--gray3)}
    .flavor-drop .drop-timer span{color:#D4A574;font-weight:600}
    .brownieboxx-section .flavor-drop{background:linear-gradient(135deg,rgba(139,105,20,.1),rgba(139,105,20,.03));border-color:rgba(139,105,20,.15)}
    .brownieboxx-section .flavor-drop .drop-label,.brownieboxx-section .flavor-drop .drop-timer span{color:#8B6914}
    
    /* Order Mode Toggle */
    .order-mode-toggle{display:flex;gap:0;margin-bottom:16px;background:var(--gray2);border-radius:14px;padding:4px;position:relative}
    .order-mode-btn{flex:1;padding:12px 8px;border:none;background:transparent;color:var(--gray3);font-family:var(--font1);font-size:13px;font-weight:600;letter-spacing:1px;border-radius:11px;cursor:pointer;transition:all .3s;text-align:center;position:relative;z-index:1}
    .order-mode-btn.active{color:var(--dark);background:#D4A574}
    .order-mode-btn .mode-tag{display:block;font-family:var(--font2);font-size:9px;font-weight:400;letter-spacing:0;margin-top:2px;opacity:.7}
    .order-mode-btn.active .mode-tag{opacity:.8}
    .brownieboxx-section .order-mode-btn.active{background:#8B6914}
    
    /* Available Now Quick Buy Cards */
    .available-now{margin-bottom:16px}
    .available-now-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
    .available-now-header h3{font-family:var(--font1);font-size:16px;color:var(--white);letter-spacing:1px}
    .available-now-header .avail-badge{font-size:10px;padding:4px 10px;background:rgba(0,210,106,.15);color:#00D26A;border-radius:20px;font-weight:600;animation:pulse-green 2s infinite}
    @keyframes pulse-green{0%,100%{opacity:1}50%{opacity:.6}}
    .avail-cards{display:flex;flex-direction:column;gap:8px}
    .avail-card{display:flex;align-items:center;gap:12px;padding:14px;background:var(--gray2);border-radius:14px;border:1px solid rgba(255,255,255,.05);cursor:pointer;transition:all .3s}
    .avail-card:hover{border-color:rgba(0,210,106,.3);background:rgba(0,210,106,.05)}
    .avail-card .avail-icon{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,rgba(0,210,106,.15),rgba(0,210,106,.05));display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0}
    .avail-card .avail-info{flex:1}
    .avail-card .avail-name{font-weight:700;font-size:14px;color:var(--white)}
    .avail-card .avail-desc{font-size:11px;color:var(--gray3);margin-top:1px}
    .avail-card .avail-price{font-family:var(--font1);font-size:16px;color:#00D26A;font-weight:700}
    .avail-card .avail-stock{font-size:9px;color:var(--gray3);display:block;margin-top:1px}
    
    /* Pre-order notice */
    .preorder-notice{display:flex;align-items:center;gap:10px;padding:12px 16px;background:rgba(212,165,116,.08);border:1px solid rgba(212,165,116,.15);border-radius:12px;margin-bottom:14px;font-size:12px;color:var(--gray3);line-height:1.4}
    .preorder-notice .notice-icon{font-size:20px;flex-shrink:0}
    .preorder-notice strong{color:#D4A574}
    .brownieboxx-section .preorder-notice{background:rgba(139,105,20,.08);border-color:rgba(139,105,20,.15)}
    .brownieboxx-section .preorder-notice strong{color:#8B6914}
    
    /* Meet the Baker Card */
    .baker-card{display:flex;align-items:center;gap:14px;padding:16px;background:var(--gray2);border-radius:16px;margin-bottom:20px;border:1px solid rgba(255,255,255,.05);cursor:pointer;transition:all .3s}
    .baker-card:hover{background:rgba(212,165,116,.08);border-color:rgba(212,165,116,.2)}
    .baker-card .baker-img{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,#D4A574,#8B6914);display:flex;align-items:center;justify-content:center;font-size:28px;flex-shrink:0;position:relative}
    .baker-card .baker-img::after{content:'';position:absolute;bottom:-2px;right:-2px;width:16px;height:16px;background:#00D26A;border-radius:50%;border:2px solid var(--gray2)}
    .baker-card .baker-info{flex:1}
    .baker-card .baker-name{font-weight:700;font-size:15px;color:var(--white);margin-bottom:2px}
    .baker-card .baker-role{font-size:12px;color:#D4A574;margin-bottom:2px}
    .baker-card .baker-desc{font-size:11px;color:var(--gray3);line-height:1.4}
    .baker-card .baker-ig{display:flex;align-items:center;gap:4px;font-size:12px;color:var(--gray3);margin-top:4px}
    .baker-card .baker-ig svg{width:14px;height:14px}
    .brownieboxx-section .baker-card:hover{background:rgba(139,105,20,.08);border-color:rgba(139,105,20,.2)}
    .brownieboxx-section .baker-card .baker-role{color:#8B6914}
    
    /* Brownie Theme */
    .brownieboxx-section .dessert-header h2{color:#8B6914}
    .brownieboxx-section .dessert-header .partner span{color:#8B6914}
    .brownieboxx-section .cookie-builder{border-color:#3D2510;background:linear-gradient(135deg,#1a1208,#0d0904)}
    .brownieboxx-section .quick-pack{background:linear-gradient(135deg,#2a1f14,#1a150c);border-color:#3D2510}
    .brownieboxx-section .quick-pack:hover{border-color:#5D3A1A}
    .brownieboxx-section .quick-pack.selected{border-color:#8B6914;background:rgba(139,105,20,0.15)}
    .brownieboxx-section .quick-pack-price{color:#8B6914}
    .brownieboxx-section .box-container{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .brownieboxx-section .box-lid{background:linear-gradient(145deg,#4D3520,#3a2a1d)}
    .brownieboxx-section .lid-top{background:linear-gradient(145deg,#5D4530,#4a3a2d)}
    .brownieboxx-section .tier-badge{border-color:#3D2510;color:#8B6914}
    .brownieboxx-section .tier-badge.active{background:#8B6914;color:var(--dark);border-color:#8B6914}
    .brownieboxx-section .dessert-cta{background:#8B6914}
    .brownieboxx-section .dessert-cta:hover{background:#9C7A1F}
    .brownieboxx-section .free-delivery-banner{background:linear-gradient(90deg,rgba(139,105,20,.15),rgba(139,105,20,.05));border-color:rgba(139,105,20,.3);color:#8B6914}
    .brownieboxx-section .progress-fill{background:linear-gradient(90deg,#5D3A1A,#8B6914)}
    .brownieboxx-section .milestone.reached{color:#8B6914;border-color:#8B6914}
    .brownieboxx-section .gift-toggle{border-color:#3D2510}
    .brownieboxx-section .gift-toggle:hover{border-color:#5D3A1A}
    .brownieboxx-section .toggle-switch.active{background:#8B6914}
    .brownieboxx-section .gift-form{border-color:#8B6914}
    .brownieboxx-section .gift-form h4{color:#8B6914}
    .brownieboxx-section .smart-suggestion{background:rgba(139,105,20,.1);border-color:rgba(139,105,20,.3)}
    .brownieboxx-section .smart-suggestion button{background:#8B6914}
    .brownieboxx-section .addon-check.checked{background:#8B6914;border-color:#8B6914}
    .brownieboxx-section .box-summary{background:rgba(61,37,16,.5)}
    .brownieboxx-section .summary-row.total span:last-child{color:#8B6914}
    .brownieboxx-section .cookie-card.has-qty{border-color:#8B6914;background:rgba(139,105,20,.15)}
    .brownieboxx-section .cookie-card .price{color:#8B6914}
    .brownieboxx-section .cookie-card:hover{border-color:rgba(139,105,20,.5)}
    .brownieboxx-section .qty-badge{background:#8B6914}
    .brownieboxx-section .delivery-section input:focus{border-color:#8B6914}
    .brownieboxx-section .gift-form input:focus,.brownieboxx-section .gift-form textarea:focus{border-color:#8B6914}
    .brownieboxx-section .modal-btn.plus{background:#8B6914}
    .brownieboxx-section .modal-btn:hover{background:#8B6914}
    .brownieboxx-section .order-now-link:hover{border-color:#8B6914;color:#8B6914}
    
    .cookie-builder{background:var(--gray1);border-radius:16px;padding:16px;border:2px solid #3d3428}
    
    /* Visual Cookie Box */
    .cookie-box-visual{display:flex;flex-direction:column;align-items:center;padding:16px 0;position:relative}
    .box-container{width:140px;height:85px;background:linear-gradient(145deg,#8B5A2B,#654321);border-radius:8px 8px 12px 12px;position:relative;box-shadow:0 8px 24px rgba(0,0,0,.4),inset 0 -4px 8px rgba(0,0,0,.3);overflow:hidden;transition:transform .2s}
    .box-container.shake{animation:boxShake .4s ease}
    @keyframes boxShake{0%,100%{transform:rotate(0)}25%{transform:rotate(-2deg)}75%{transform:rotate(2deg)}}
    .box-inner{position:absolute;bottom:4px;left:4px;right:4px;top:4px;display:flex;flex-wrap:wrap;align-content:flex-end;justify-content:center;gap:3px;padding:2px}
    .box-cookie{animation:dropIn .3s ease}
    @keyframes dropIn{0%{opacity:0;transform:translateY(-10px) scale(1.3)}100%{opacity:1;transform:translateY(0) scale(1)}}
    
    /* Mini cookies for the box */
    .mini-cookie{width:22px;height:22px;border-radius:50%;position:relative;box-shadow:0 2px 4px rgba(0,0,0,.3),inset 0 -2px 3px rgba(0,0,0,.2);overflow:hidden}
    .mini-cookie::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.2) 0%,transparent 50%)}
    .mini-cookie .chips::before,.mini-cookie .chips::after{width:4px!important;height:3px!important}
    .mini-cookie .chunks::before,.mini-cookie .chunks::after{width:4px!important;height:3px!important}
    .mini-cookie .drizzle::before{height:2px!important;top:5px!important}
    .mini-cookie .drizzle::after{display:none}
    .mini-cookie .marsh{width:6px!important;height:5px!important;top:4px!important}
    .mini-cookie .swirl{width:12px!important;height:12px!important;border-width:2px!important}
    .mini-cookie .filling{width:12px!important;height:12px!important}
    .mini-cookie .salt,.mini-cookie .salt2,.mini-cookie .salt3,.mini-cookie .choc,.mini-cookie .choc2,.mini-cookie .bean,.mini-cookie .nut,.mini-cookie .extra,.mini-cookie .extra1,.mini-cookie .extra2{display:none}
    .box-label{position:absolute;bottom:4px;left:50%;transform:translateX(-50%);font-family:var(--font1);font-size:8px;color:rgba(255,255,255,.4);letter-spacing:1px}
    .box-lid{width:150px;height:18px;background:linear-gradient(145deg,#9B6A3B,#755331);border-radius:4px 4px 0 0;margin-bottom:-2px;position:relative;z-index:2;transition:all .3s ease;transform-origin:bottom center}
    .box-lid.open{transform:rotateX(-120deg) translateY(-10px)}
    .lid-top{position:absolute;top:-6px;left:50%;transform:translateX(-50%);width:36px;height:14px;background:linear-gradient(145deg,#A87A4B,#855941);border-radius:4px 4px 0 0}
    .box-count{margin-top:10px;font-family:var(--font1);font-size:18px;color:var(--white);letter-spacing:1px}
    .clear-box-btn{margin-top:10px;background:transparent;border:1px solid var(--gray3);color:var(--gray3);padding:8px 16px;border-radius:20px;font-size:11px;font-weight:600;cursor:pointer;transition:all .2s}
    .clear-box-btn:hover{border-color:#ff6b6b;color:#ff6b6b;background:rgba(255,107,107,.1)}
    
    /* Flying Cookie Animation */
    .flying-cookie{position:fixed;font-size:28px;pointer-events:none;z-index:1000;opacity:0;transition:none}
    .flying-cookie.animate{opacity:1;transition:all .4s cubic-bezier(.2,.8,.2,1)}
    
    .tap-hint{text-align:center;font-size:11px;color:var(--gray3);margin-bottom:12px}
    
    /* Custom Cookie Visuals */
    .cookie-visual{width:52px;height:52px;border-radius:50%;margin:0 auto 6px;position:relative;box-shadow:0 4px 8px rgba(0,0,0,.3),inset 0 -3px 6px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .cookie-visual::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.15) 0%,transparent 50%);pointer-events:none}
    .cookie-visual::after{content:'';position:absolute;top:2px;left:2px;right:2px;bottom:2px;border-radius:50%;border:1px solid rgba(0,0,0,.1);pointer-events:none}
    
    /* Lemon White Chocolate */
    .cookie-lemon{background:linear-gradient(145deg,#E8D59E,#D4C078)}
    .cookie-lemon .chips{position:absolute;width:100%;height:100%}
    .cookie-lemon .chips::before,.cookie-lemon .chips::after{content:'';position:absolute;background:#FFF8DC;border-radius:40%;box-shadow:0 1px 2px rgba(0,0,0,.2)}
    .cookie-lemon .chips::before{width:10px;height:8px;top:12px;left:10px;transform:rotate(-15deg)}
    .cookie-lemon .chips::after{width:8px;height:6px;bottom:14px;right:12px;transform:rotate(25deg)}
    .cookie-lemon .extra{position:absolute;width:9px;height:7px;background:#FFF8DC;border-radius:40%;top:28px;right:8px;transform:rotate(-10deg)}
    
    /* Red Velvet */
    .cookie-redvelvet{background:linear-gradient(145deg,#A52A2A,#8B1A1A)}
    .cookie-redvelvet .drizzle{position:absolute;width:100%;height:100%}
    .cookie-redvelvet .drizzle::before{content:'';position:absolute;top:8px;left:8px;right:8px;height:3px;background:linear-gradient(90deg,transparent 0%,#FFF5EE 20%,#FFF5EE 80%,transparent 100%);border-radius:2px;transform:rotate(-8deg)}
    .cookie-redvelvet .drizzle::after{content:'';position:absolute;bottom:12px;left:12px;right:12px;height:2px;background:linear-gradient(90deg,transparent 0%,#FFF5EE 30%,#FFF5EE 70%,transparent 100%);border-radius:2px;transform:rotate(5deg)}
    
    /* Cookies N Cream */
    .cookie-cookiescream{background:linear-gradient(145deg,#F5F0E6,#E8DFD0)}
    .cookie-cookiescream .chunks{position:absolute;width:100%;height:100%}
    .cookie-cookiescream .chunks::before,.cookie-cookiescream .chunks::after{content:'';position:absolute;background:#1C1C1C;border-radius:2px}
    .cookie-cookiescream .chunks::before{width:10px;height:8px;top:10px;left:14px;transform:rotate(20deg)}
    .cookie-cookiescream .chunks::after{width:8px;height:6px;bottom:12px;right:10px;transform:rotate(-15deg)}
    .cookie-cookiescream .extra1{position:absolute;width:6px;height:8px;background:#2D2D2D;border-radius:2px;top:24px;right:14px;transform:rotate(45deg)}
    .cookie-cookiescream .extra2{position:absolute;width:7px;height:5px;background:#1C1C1C;border-radius:2px;bottom:18px;left:10px;transform:rotate(-30deg)}
    
    /* S'mores */
    .cookie-smores{background:linear-gradient(145deg,#C4A26E,#A68B5B)}
    .cookie-smores .toppings{position:absolute;width:100%;height:100%}
    .cookie-smores .marsh{position:absolute;width:14px;height:12px;background:linear-gradient(145deg,#FFF8F0,#E8E0D8);border-radius:4px;top:10px;left:50%;transform:translateX(-50%)}
    .cookie-smores .choc{position:absolute;width:12px;height:10px;background:#3D2314;border-radius:2px;bottom:12px;left:12px;transform:rotate(10deg)}
    .cookie-smores .choc2{position:absolute;width:8px;height:8px;background:#4A2C17;border-radius:2px;bottom:16px;right:14px;transform:rotate(-20deg)}
    
    /* Salted Caramel */
    .cookie-caramel{background:linear-gradient(145deg,#D4956A,#B87A4E)}
    .cookie-caramel .swirl{position:absolute;width:30px;height:30px;border:3px solid #8B5A2B;border-radius:50%;border-right-color:transparent;border-bottom-color:transparent;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-45deg)}
    .cookie-caramel .salt{position:absolute;width:100%;height:100%}
    .cookie-caramel .salt::before,.cookie-caramel .salt::after{content:'';position:absolute;width:3px;height:3px;background:#FFF;border-radius:1px;box-shadow:0 0 2px rgba(255,255,255,.8)}
    .cookie-caramel .salt::before{top:8px;right:12px}
    .cookie-caramel .salt::after{bottom:10px;left:14px}
    .cookie-caramel .salt2{position:absolute;width:2px;height:2px;background:#FFF;border-radius:1px;top:16px;left:10px}
    .cookie-caramel .salt3{position:absolute;width:2px;height:3px;background:#FFF;border-radius:1px;bottom:16px;right:10px}
    
    /* Matcha */
    .cookie-matcha{background:linear-gradient(145deg,#7BA05B,#5C8A3D)}
    .cookie-matcha .chips{position:absolute;width:100%;height:100%}
    .cookie-matcha .chips::before,.cookie-matcha .chips::after{content:'';position:absolute;background:#FFF8DC;border-radius:40%;box-shadow:0 1px 2px rgba(0,0,0,.2)}
    .cookie-matcha .chips::before{width:9px;height:7px;top:10px;right:12px;transform:rotate(15deg)}
    .cookie-matcha .chips::after{width:8px;height:6px;bottom:14px;left:14px;transform:rotate(-20deg)}
    .cookie-matcha .extra{position:absolute;width:7px;height:6px;background:#FFF8DC;border-radius:40%;top:26px;left:10px}
    
    /* Espresso Double Choc */
    .cookie-espresso{background:linear-gradient(145deg,#2C1810,#1A0F0A)}
    .cookie-espresso .chips{position:absolute;width:100%;height:100%}
    .cookie-espresso .chips::before,.cookie-espresso .chips::after{content:'';position:absolute;background:#4A3728;border-radius:40%}
    .cookie-espresso .chips::before{width:10px;height:8px;top:10px;left:12px;transform:rotate(-10deg)}
    .cookie-espresso .chips::after{width:9px;height:7px;bottom:12px;right:10px;transform:rotate(20deg)}
    .cookie-espresso .bean{position:absolute;width:8px;height:12px;background:#3D2817;border-radius:50%;top:22px;right:16px}
    .cookie-espresso .bean::after{content:'';position:absolute;width:1px;height:8px;background:#2C1810;left:50%;top:2px;transform:translateX(-50%)}
    
    /* Ferrero Choc Chip */
    .cookie-ferrero{background:linear-gradient(145deg,#8B6914,#6B5010)}
    .cookie-ferrero .chips{position:absolute;width:100%;height:100%}
    .cookie-ferrero .chips::before,.cookie-ferrero .chips::after{content:'';position:absolute;background:#5C4033;border-radius:40%}
    .cookie-ferrero .chips::before{width:10px;height:8px;top:12px;left:10px;transform:rotate(15deg)}
    .cookie-ferrero .chips::after{width:8px;height:7px;bottom:14px;right:12px;transform:rotate(-25deg)}
    .cookie-ferrero .nut{position:absolute;width:10px;height:8px;background:#C4A35A;border-radius:50%;top:24px;right:10px;box-shadow:inset -2px -2px 3px rgba(0,0,0,.3)}
    
    /* Nutella */
    .cookie-nutella{background:linear-gradient(145deg,#C4956A,#A67B4E)}
    .cookie-nutella .filling{position:absolute;width:28px;height:28px;background:radial-gradient(circle,#4A2C17 0%,#3D2314 60%,transparent 70%);top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%}
    .cookie-nutella .swirl{position:absolute;width:16px;height:16px;border:2px solid #6B4423;border-radius:50%;border-right-color:transparent;top:50%;left:50%;transform:translate(-50%,-50%) rotate(45deg)}
    
    /* Modal cookie visual - larger */
    .modal-cookie-visual{width:80px!important;height:80px!important;transform:none!important}
    
    /* ==================== BROWNIE VISUALS ==================== */
    .brownie-visual{width:52px;height:52px;border-radius:6px;margin:0 auto 6px;position:relative;box-shadow:0 4px 8px rgba(0,0,0,.4),inset 0 -3px 6px rgba(0,0,0,.3);overflow:hidden}
    .brownie-visual::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:6px;background:linear-gradient(135deg,rgba(255,255,255,.08) 0%,transparent 50%);pointer-events:none}
    .brownie-visual::after{content:'';position:absolute;top:1px;left:1px;right:1px;bottom:1px;border-radius:5px;border:1px solid rgba(0,0,0,.2);pointer-events:none}
    
    /* Classic Fudge */
    .brownie-classic{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .brownie-classic .crack{position:absolute;width:100%;height:100%}
    .brownie-classic .crack::before{content:'';position:absolute;top:15px;left:8px;width:35px;height:2px;background:linear-gradient(90deg,transparent,#2a1a0d,#1a100a,transparent);transform:rotate(-5deg)}
    .brownie-classic .crack::after{content:'';position:absolute;bottom:18px;right:6px;width:20px;height:1px;background:#1a100a;transform:rotate(10deg)}
    .brownie-classic .shine{position:absolute;top:6px;left:6px;width:8px;height:4px;background:rgba(255,255,255,.15);border-radius:2px;transform:rotate(-20deg)}
    
    /* Walnut Crunch */
    .brownie-walnut{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .brownie-walnut .nuts{position:absolute;width:100%;height:100%}
    .brownie-walnut .nut1{position:absolute;width:12px;height:10px;background:linear-gradient(145deg,#C4A35A,#8B7355);border-radius:40%;top:8px;left:10px;transform:rotate(-15deg);box-shadow:inset -2px -2px 3px rgba(0,0,0,.3)}
    .brownie-walnut .nut2{position:absolute;width:10px;height:8px;background:linear-gradient(145deg,#B8975A,#7A6545);border-radius:40%;top:12px;right:12px;transform:rotate(20deg);box-shadow:inset -2px -2px 3px rgba(0,0,0,.3)}
    .brownie-walnut .nut3{position:absolute;width:9px;height:7px;background:linear-gradient(145deg,#C9A860,#9A8050);border-radius:40%;bottom:14px;left:18px;transform:rotate(5deg);box-shadow:inset -2px -2px 3px rgba(0,0,0,.3)}
    
    /* Salted Caramel */
    .brownie-caramel{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .brownie-caramel .swirl{position:absolute;width:100%;height:100%}
    .brownie-caramel .swirl::before{content:'';position:absolute;top:10px;left:8px;right:10px;height:6px;background:linear-gradient(90deg,transparent 0%,#D4956A 20%,#C4854A 50%,#D4956A 80%,transparent 100%);border-radius:3px;transform:rotate(-8deg)}
    .brownie-caramel .swirl::after{content:'';position:absolute;bottom:14px;left:12px;right:8px;height:5px;background:linear-gradient(90deg,transparent 0%,#C4854A 30%,#D4956A 60%,transparent 100%);border-radius:3px;transform:rotate(5deg)}
    .brownie-caramel .salt{position:absolute;width:2px;height:2px;background:#FFF;border-radius:50%;top:8px;right:14px;box-shadow:8px 4px 0 #FFF,-4px 28px 0 #FFF,12px 20px 0 #FFF}
    
    /* Cheesecake Swirl */
    .brownie-cheesecake{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .brownie-cheesecake .cream{position:absolute;width:100%;height:100%}
    .brownie-cheesecake .cream::before{content:'';position:absolute;top:8px;left:10px;width:30px;height:12px;background:linear-gradient(145deg,#FFF8F0,#E8DFD0);border-radius:50%;transform:rotate(-15deg);opacity:.9}
    .brownie-cheesecake .cream::after{content:'';position:absolute;bottom:12px;right:8px;width:22px;height:10px;background:linear-gradient(145deg,#FFF5E8,#E5DCC8);border-radius:50%;transform:rotate(20deg);opacity:.85}
    
    /* Peanut Butter */
    .brownie-peanutbutter{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .brownie-peanutbutter .pb{position:absolute;width:100%;height:100%}
    .brownie-peanutbutter .pb::before{content:'';position:absolute;top:12px;left:6px;right:12px;height:8px;background:linear-gradient(90deg,transparent,#C4956A,#B8854A,#C4956A,transparent);border-radius:4px;transform:rotate(-10deg)}
    .brownie-peanutbutter .pb::after{content:'';position:absolute;bottom:10px;left:14px;right:6px;height:6px;background:linear-gradient(90deg,transparent,#B8854A,#C4956A,transparent);border-radius:3px;transform:rotate(8deg)}
    
    /* S'mores */
    .brownie-smores{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .brownie-smores .toppings{position:absolute;width:100%;height:100%}
    .brownie-smores .graham{position:absolute;top:6px;left:8px;width:16px;height:14px;background:linear-gradient(145deg,#D4A574,#C4956A);border-radius:2px;transform:rotate(-5deg)}
    .brownie-smores .graham::after{content:'';position:absolute;top:50%;left:2px;right:2px;height:1px;background:rgba(0,0,0,.2)}
    .brownie-smores .marsh{position:absolute;top:12px;right:10px;width:14px;height:12px;background:linear-gradient(145deg,#FFF8F0,#E8E0D8);border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,.2)}
    .brownie-smores .marsh2{position:absolute;bottom:10px;left:16px;width:12px;height:10px;background:linear-gradient(145deg,#FFF5E8,#E5DDD0);border-radius:3px;transform:rotate(15deg)}
    
    /* Mini Brownie for box */
    .mini-brownie{width:20px;height:18px;border-radius:3px;position:relative;box-shadow:0 2px 4px rgba(0,0,0,.4),inset 0 -2px 3px rgba(0,0,0,.3);overflow:hidden}
    .mini-brownie::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:3px;background:linear-gradient(135deg,rgba(255,255,255,.1) 0%,transparent 50%)}
    .mini-brownie.classic{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .mini-brownie.walnut{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .mini-brownie.walnut::after{content:'';position:absolute;width:5px;height:4px;background:#C4A35A;border-radius:50%;top:4px;left:6px}
    .mini-brownie.caramel{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .mini-brownie.caramel::after{content:'';position:absolute;top:6px;left:3px;right:3px;height:3px;background:#D4956A;border-radius:2px}
    .mini-brownie.cheesecake{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .mini-brownie.cheesecake::after{content:'';position:absolute;width:10px;height:5px;background:#FFF8F0;border-radius:50%;top:5px;left:5px;opacity:.9}
    .mini-brownie.peanutbutter{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .mini-brownie.peanutbutter::after{content:'';position:absolute;top:6px;left:4px;right:4px;height:3px;background:#C4956A;border-radius:2px}
    .mini-brownie.smores{background:linear-gradient(145deg,#3D2510,#2a1a0d)}
    .mini-brownie.smores::after{content:'';position:absolute;width:6px;height:5px;background:#FFF8F0;border-radius:2px;top:4px;right:5px}
    
    .modal-brownie-visual{width:80px!important;height:80px!important}
    
    /* Compact 3-Column Grid */
    .cookie-grid-compact{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:16px}
    .cookie-card{background:var(--gray2);border-radius:12px;padding:10px 6px;text-align:center;cursor:pointer;transition:all .2s;position:relative;border:2px solid transparent;touch-action:manipulation}
    .cookie-card:hover{border-color:rgba(212,165,116,.5)}
    .cookie-card.has-qty{border-color:#D4A574;background:rgba(212,165,116,0.15)}
    .cookie-card .name{font-size:10px;font-weight:600;color:var(--white);line-height:1.2;min-height:24px;display:flex;align-items:center;justify-content:center}
    .cookie-card .price{font-family:var(--font1);font-size:14px;color:#D4A574;margin-top:2px}
    .cookie-card .qty-badge{position:absolute;top:-6px;right:-6px;width:22px;height:22px;background:#D4A574;color:var(--dark);border-radius:50%;font-family:var(--font1);font-size:13px;display:flex;align-items:center;justify-content:center;opacity:0;transform:scale(0);transition:all .2s}
    .cookie-card.has-qty .qty-badge{opacity:1;transform:scale(1)}
    
    /* Cookie Modal */
    .cookie-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);z-index:1000;display:flex;align-items:flex-end;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s;touch-action:manipulation}
    .cookie-modal-overlay.show{opacity:1;pointer-events:auto}
    .cookie-modal{background:var(--gray1);border-radius:24px 24px 0 0;padding:24px;width:100%;max-width:480px;transform:translateY(100%);transition:transform .3s ease;position:relative;touch-action:manipulation}
    .cookie-modal-overlay.show .cookie-modal{transform:translateY(0)}
    .modal-close{position:absolute;top:16px;right:16px;width:32px;height:32px;background:var(--gray2);border:none;border-radius:50%;color:var(--white);font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;touch-action:manipulation}
    .modal-emoji{text-align:center;margin-bottom:12px;display:flex;justify-content:center}
    .modal-name{font-family:var(--font1);font-size:28px;color:var(--white);text-align:center;letter-spacing:1px;margin-bottom:4px}
    .modal-price{font-family:var(--font1);font-size:24px;color:#D4A574;text-align:center;margin-bottom:12px}
    .modal-desc{font-size:14px;color:var(--gray3);text-align:center;line-height:1.5;margin-bottom:16px}
    .modal-tags{display:flex;justify-content:center;gap:8px;flex-wrap:wrap;margin-bottom:20px}
    .modal-tag{font-size:11px;padding:6px 12px;background:var(--gray2);border-radius:20px;color:var(--white)}
    .modal-tag.highlight{background:rgba(212,165,116,.2);color:#D4A574}
    .modal-controls{display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:20px;touch-action:manipulation}
    .modal-btn{width:52px;height:52px;border-radius:50%;border:none;background:var(--gray2);color:var(--white);font-size:28px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .15s;-webkit-tap-highlight-color:transparent;touch-action:manipulation;user-select:none;-webkit-user-select:none}
    .modal-btn:hover{background:#D4A574;color:var(--dark)}
    .modal-btn.plus{background:#D4A574;color:var(--dark)}
    .modal-qty{font-family:var(--font1);font-size:36px;min-width:50px;text-align:center;color:var(--white)}
    .modal-add-btn{width:100%;background:#D4A574;color:var(--dark);border:none;padding:16px;font-family:var(--font1);font-size:18px;letter-spacing:2px;border-radius:12px;cursor:pointer;touch-action:manipulation}
    
    .cream-cheese-global{display:flex;align-items:center;justify-content:space-between;background:var(--gray2);border-radius:10px;padding:12px 14px;margin-bottom:12px}
    .cream-cheese-global label{font-size:12px;color:var(--white);display:flex;align-items:center;gap:8px}
    .cream-cheese-global .cc-price{font-size:11px;color:#D4A574;font-weight:600}
    .toggle-switch{width:44px;height:24px;background:var(--gray1);border-radius:12px;position:relative;cursor:pointer;transition:all .2s}
    .toggle-switch.on{background:#D4A574}
    .toggle-switch::after{content:'';position:absolute;top:2px;left:2px;width:20px;height:20px;background:var(--white);border-radius:50%;transition:all .2s}
    .toggle-switch.on::after{left:22px}
    
    .box-summary{background:var(--gray2);border-radius:10px;padding:14px;margin-bottom:12px}
    .summary-row{display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--gray3);margin-bottom:8px}
    .summary-row:last-child{margin-bottom:0}
    .summary-row.total{font-size:16px;font-weight:600;color:var(--white);padding-top:8px;border-top:1px solid var(--gray1)}
    .summary-row.total span:last-child{font-family:var(--font1);font-size:24px;color:#D4A574}
    .summary-row .green{color:var(--green)}
    
    .bulk-tiers{display:flex;gap:8px;margin-bottom:16px;justify-content:center}
    .tier-badge{font-size:10px;padding:6px 10px;background:var(--gray2);border-radius:20px;color:var(--gray3);transition:all .2s}
    .tier-badge.active{background:#D4A574;color:var(--dark);font-weight:600}
    
    .dessert-cta{width:100%;background:#D4A574;color:var(--dark);border:none;padding:16px;font-family:var(--font1);font-size:18px;letter-spacing:2px;border-radius:10px;cursor:pointer;transition:all .2s}
    .dessert-cta:hover{background:#c49660}
    .dessert-cta:disabled{background:var(--gray2);color:var(--gray3);cursor:not-allowed}

    /* Quick Packs */
    .quick-packs{display:flex;gap:10px;overflow-x:auto;padding-bottom:12px;margin-bottom:16px;-webkit-overflow-scrolling:touch}
    .quick-packs::-webkit-scrollbar{display:none}
    .quick-pack{flex:0 0 auto;background:linear-gradient(135deg,#2a2318,#1a1510);border:2px solid #3d3428;border-radius:12px;padding:12px 16px;cursor:pointer;transition:all .2s;min-width:130px}
    .quick-pack:hover{border-color:#D4A574;transform:translateY(-2px)}
    .quick-pack.selected{border-color:#D4A574;background:rgba(212,165,116,0.15)}
    .quick-pack-name{font-family:var(--font1);font-size:13px;color:var(--white);margin-bottom:4px}
    .quick-pack-desc{font-size:10px;color:var(--gray3);margin-bottom:6px}
    .quick-pack-price{font-family:var(--font1);font-size:18px;color:#D4A574}
    .quick-pack-tag{font-size:8px;background:#D4A574;color:var(--dark);padding:2px 6px;border-radius:10px;display:inline-block;margin-bottom:6px;font-weight:700}
    .quick-pack-delivery{font-size:9px;color:var(--green);font-weight:600;margin-top:4px}
    .free-delivery-banner{background:linear-gradient(90deg,rgba(0,210,106,.15),rgba(0,210,106,.05));border:1px solid rgba(0,210,106,.3);border-radius:10px;padding:12px;text-align:center;font-size:12px;font-weight:600;color:var(--green);margin-bottom:16px}

    /* Box Label Input */
    .box-label-input{width:100%;max-width:200px;background:transparent;border:none;border-bottom:2px dashed #3d3428;color:#D4A574;font-family:var(--font1);font-size:16px;text-align:center;padding:8px;margin:0 auto 12px;display:block;outline:none}
    .box-label-input::placeholder{color:#5a4a3a;font-size:14px}
    .box-label-input:focus{border-bottom-color:#D4A574}

    /* Progress Section */
    .progress-section{background:var(--gray2);border-radius:12px;padding:14px;margin-bottom:16px}
    .progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .progress-title{font-size:11px;color:var(--gray3);font-weight:600;letter-spacing:1px}
    .progress-reward{font-size:11px;color:#D4A574;font-weight:600}
    .progress-bar{height:8px;background:var(--gray1);border-radius:4px;overflow:hidden;margin-bottom:10px}
    .progress-fill{height:100%;background:linear-gradient(90deg,#D4A574,#e8c9a0);border-radius:4px;transition:width .4s ease}
    .progress-milestones{display:flex;justify-content:space-between}
    .milestone{text-align:center;font-size:9px;color:var(--gray3);opacity:.5;transition:all .2s}
    .milestone.reached{color:var(--green);opacity:1}
    .milestone.next{color:var(--white);opacity:1}

    /* Smart Suggestion */
    .smart-suggestion{background:linear-gradient(135deg,rgba(212,165,116,0.15),rgba(212,165,116,0.05));border:2px solid rgba(212,165,116,0.3);border-radius:10px;padding:12px;margin-bottom:12px;display:none;cursor:pointer;transition:all .2s;align-items:center;gap:10px}
    .smart-suggestion:hover{background:rgba(212,165,116,0.2);border-color:#D4A574}
    .smart-suggestion.show{display:flex;animation:slideDown .3s ease}
    @keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
    .smart-suggestion span{font-size:18px}
    .smart-suggestion p{font-size:12px;color:var(--white);flex:1}
    .smart-suggestion strong{color:#D4A574}
    .smart-suggestion button{background:#D4A574;color:var(--dark);border:none;padding:8px 14px;border-radius:6px;font-family:var(--font1);font-size:12px;cursor:pointer}

    /* Gift Mode */
    .gift-toggle{display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,#1a2e1a,#0f1f0f);border:2px solid #2d4a2d;border-radius:12px;padding:14px;margin-bottom:12px;cursor:pointer;transition:all .2s}
    .gift-toggle:hover{border-color:#3d6a3d}
    .gift-toggle.active{border-color:var(--green);background:linear-gradient(135deg,#1a2e1a,#152815)}
    .gift-toggle-left{display:flex;align-items:center;gap:10px}
    .gift-toggle-left span{font-size:24px}
    .gift-toggle-info h4{font-size:13px;color:var(--white);margin-bottom:2px}
    .gift-toggle-info p{font-size:10px;color:var(--gray3)}

    .gift-form{background:var(--gray2);border-radius:12px;padding:16px;margin-bottom:12px;display:none;border:2px solid var(--green)}
    .gift-form.show{display:block;animation:slideDown .3s ease}
    .gift-form h4{font-family:var(--font1);font-size:16px;color:var(--green);margin-bottom:14px;display:flex;align-items:center;gap:8px}
    .form-row{margin-bottom:14px}
    .form-row:last-child{margin-bottom:0}
    .form-row label{display:block;font-size:10px;color:var(--gray3);margin-bottom:6px;text-transform:uppercase;letter-spacing:0.5px;font-weight:600}
    .form-row input,.form-row textarea{width:100%;background:var(--gray1);border:2px solid #333;border-radius:8px;padding:12px;color:var(--white);font-size:14px;font-family:var(--font2);outline:none;transition:border-color .2s}
    .form-row input:focus,.form-row textarea:focus{border-color:var(--green)}
    .form-row textarea{resize:none;min-height:80px}
    .form-row input::placeholder,.form-row textarea::placeholder{color:#555}
    .char-count{text-align:right;font-size:10px;color:var(--gray3);margin-top:4px}

    /* Add-ons */
    .addons-section{background:var(--gray2);border-radius:12px;padding:14px;margin-bottom:12px}
    .addons-section h4{font-size:11px;color:var(--gray3);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;font-weight:600}
    
    .delivery-section{background:var(--gray2);border-radius:12px;padding:16px;margin-bottom:12px}
    .delivery-section h4{font-family:var(--font1);font-size:14px;color:var(--white);margin-bottom:14px;display:flex;align-items:center;gap:8px}
    .delivery-section .form-row{margin-bottom:12px}
    .delivery-section .form-row:last-child{margin-bottom:0}
    .delivery-section label{display:block;font-size:12px;color:var(--gray3);margin-bottom:4px}
    .delivery-section input{width:100%;background:var(--dark);border:1px solid var(--gray2);border-radius:8px;padding:12px;color:var(--white);font-size:14px}
    .delivery-section input:focus{outline:none;border-color:#D4A574}
    .addon-item{display:flex;align-items:center;gap:10px;padding:12px;background:var(--gray1);border-radius:10px;margin-bottom:8px;cursor:pointer;border:2px solid transparent;transition:all .2s}
    .addon-item:last-child{margin-bottom:0}
    .addon-item:hover{border-color:rgba(212,165,116,0.5)}
    .addon-item.selected{border-color:#D4A574;background:rgba(212,165,116,0.1)}
    .addon-left{display:flex;align-items:center;gap:10px;flex:1}
    .addon-left span{font-size:20px}
    .addon-info h5{font-size:12px;color:var(--white);margin-bottom:2px}
    .addon-info p{font-size:10px;color:var(--gray3)}
    .addon-price{font-family:var(--font1);font-size:14px;color:#D4A574;margin-right:8px}
    .addon-check{width:20px;height:20px;border-radius:50%;border:2px solid #444;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}
    .addon-item.selected .addon-check{background:#D4A574;border-color:#D4A574}
    .addon-item.selected .addon-check::after{content:'';color:var(--dark);font-size:11px;font-weight:bold}

    /* Cookie Add-on for Meals */
    .cookie-addon-section{background:linear-gradient(135deg,#2a2318,#1a1510);border:2px solid #3d3428;border-radius:12px;padding:16px;margin:16px 0}
    .cookie-addon-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
    .cookie-addon-header span{font-size:28px}
    .cookie-addon-header div h4{font-family:var(--font1);font-size:16px;color:#D4A574;margin-bottom:2px}
    .cookie-addon-header div p{font-size:11px;color:var(--gray3)}
    .cookie-addon-opts{display:flex;gap:10px}
    .cookie-addon-opt{flex:1;background:var(--gray1);border:2px solid var(--gray2);border-radius:10px;padding:12px;text-align:center;cursor:pointer;transition:all .2s}
    .cookie-addon-opt:hover{border-color:#D4A574}
    .cookie-addon-opt.selected{border-color:#D4A574;background:rgba(212,165,116,0.1)}
    .cookie-addon-opt .qty{font-family:var(--font1);font-size:24px;color:var(--white)}
    .cookie-addon-opt .price{font-family:var(--font1);font-size:18px;color:#D4A574}
    .cookie-addon-opt .save{font-size:9px;color:var(--green);font-weight:600;margin-top:2px}
    .cookie-addon-opt .per{font-size:9px;color:var(--gray3)}
    .cookie-flavor-selector{margin-top:14px;padding-top:14px;border-top:1px solid #3d3428}
    .cookie-flavor-selector .flavor-label{font-size:11px;color:var(--gray3);margin-bottom:10px;text-transform:uppercase;letter-spacing:0.5px}
    .cookie-flavor-selector .flavor-label span{color:#D4A574}
    .flavor-chips{display:flex;flex-wrap:wrap;gap:8px}
    .flavor-chip{padding:8px 12px;background:var(--gray1);border:2px solid var(--gray2);border-radius:20px;font-size:11px;color:var(--white);cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
    .flavor-chip:hover{border-color:#D4A574}
    .flavor-chip.selected{border-color:#D4A574;background:rgba(212,165,116,0.15);color:#D4A574}
    .flavor-chip .chip-count{background:#D4A574;color:var(--dark);width:18px;height:18px;border-radius:50%;font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center}

    /* Map Section */
    .map-section{padding:0 20px 20px}
    .map-container{background:var(--gray1);border-radius:16px;overflow:hidden;position:relative}
    .map-header{padding:20px;display:flex;justify-content:space-between;align-items:center}
    .map-header h3{font-family:var(--font1);font-size:22px;letter-spacing:1px}
    .map-header span{font-size:12px;color:var(--green)}
    #partnerMap{height:280px;width:100%;background:var(--gray2)}
    .map-filters{display:flex;gap:8px;padding:12px 16px;overflow-x:auto;border-top:1px solid var(--gray2)}
    .map-filters::-webkit-scrollbar{display:none}
    .filter-chip{flex-shrink:0;padding:8px 16px;background:var(--gray2);border:1px solid #333;border-radius:100px;font-size:12px;color:var(--white);cursor:pointer;transition:all .2s}
    .filter-chip.active{background:var(--orange);border-color:var(--orange)}
    .filter-chip.active.green{background:var(--green);border-color:var(--green);color:var(--dark)}
    .partner-list{max-height:200px;overflow-y:auto;padding:0 16px 16px}
    .partner-card{display:flex;align-items:center;gap:12px;padding:14px;background:var(--gray2);border-radius:12px;margin-bottom:8px;cursor:pointer;border:2px solid transparent;transition:all .2s}
    .partner-card:hover{border-color:var(--orange)}
    .partner-card.active{border-color:var(--green)}
    .partner-avatar{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px}
    .partner-avatar.meals{background:linear-gradient(135deg,#FF4D0033,#FF4D0011)}
    .partner-avatar.cookies{background:linear-gradient(135deg,#FFB80033,#FFB80011)}
    .partner-avatar.drinks{background:linear-gradient(135deg,#0066FF33,#0066FF11)}
    .partner-avatar.snacks{background:linear-gradient(135deg,#00D26A33,#00D26A11)}
    .partner-info{flex:1}
    .partner-name{font-weight:600;font-size:14px;margin-bottom:2px}
    .partner-product{font-size:12px;color:var(--gray3)}
    .partner-meta{text-align:right}
    .partner-distance{font-size:11px;color:var(--gray3)}
    .partner-status{font-size:10px;color:var(--green);font-weight:600}
    .pickup-badge{display:inline-block;padding:4px 8px;background:var(--green);color:var(--dark);font-size:9px;font-weight:700;border-radius:4px;margin-top:4px}

    /* Product Cards */
    .products{padding:0 20px 24px}
    .product-card{background:var(--gray1);border-radius:16px;padding:24px;margin-bottom:16px;position:relative;overflow:hidden;cursor:pointer;border:2px solid transparent;transition:all .2s}
    .product-card:hover{border-color:var(--orange)}
    .product-card:active{transform:scale(.98)}
    .product-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}
    .product-name{font-family:var(--font1);font-size:28px;letter-spacing:1px;line-height:1}
    .product-price{text-align:right}
    .product-price .from{font-size:11px;color:var(--gray3);text-transform:uppercase}
    .product-price .amount{font-family:var(--font1);font-size:32px;color:var(--yellow)}
    .product-desc{font-size:13px;color:var(--gray3);margin-bottom:20px;line-height:1.5}

    /* Animated Macro Cards */
    .macro-ticker{display:flex;gap:8px;overflow:hidden;position:relative}
    .macro-ticker::after{content:'';position:absolute;right:0;top:0;bottom:0;width:40px;background:linear-gradient(to right,transparent,var(--gray1))}
    .macro-cards{display:flex;gap:8px;animation:ticker 8s linear infinite}
    .macro-card{flex-shrink:0;background:var(--gray2);border-radius:10px;padding:12px 16px;min-width:90px;text-align:center;border:1px solid #333}
    .macro-card .mc-val{font-family:var(--font1);font-size:24px;color:var(--white)}
    .macro-card .mc-lbl{font-size:9px;color:var(--gray3);text-transform:uppercase;letter-spacing:1px;margin-top:2px}
    @keyframes ticker{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    .order-arrow{position:absolute;right:20px;bottom:24px;width:44px;height:44px;background:var(--orange);border-radius:50%;display:flex;align-items:center;justify-content:center}
    .order-arrow svg{width:20px;height:20px;color:var(--white)}

    /* Team Section */
    .team-section{padding:20px;display:none}
    .team-section.show{display:block}
    .team-header{text-align:center;margin-bottom:20px}
    .team-header h2{font-family:var(--font1);font-size:32px;color:var(--blue);margin-bottom:4px;letter-spacing:2px}
    .team-header p{font-size:13px;color:var(--gray3)}
    .team-card{background:var(--gray1);border:2px solid var(--blue);border-radius:16px;padding:20px}
    .tier{display:flex;justify-content:space-between;align-items:center;padding:14px;background:var(--gray2);border-radius:10px;margin-bottom:8px}
    .tier-info strong{font-size:14px}
    .tier-price .price{font-family:var(--font1);font-size:28px;color:var(--yellow)}
    .tier-save{font-size:11px;color:var(--green);font-weight:600}
    .team-perks{margin-top:16px}
    .team-perks li{font-size:13px;color:var(--gray3);padding:8px 0;display:flex;align-items:center;gap:10px;list-style:none}
    .team-perks li svg{width:16px;height:16px;color:var(--blue)}
    .team-cta{width:100%;background:var(--blue);color:var(--white);border:none;padding:16px;font-family:var(--font1);font-size:18px;letter-spacing:2px;border-radius:10px;cursor:pointer;margin-top:20px}

    /* Footer */
    .foot{padding:32px 20px;text-align:center;margin-top:auto}
    .foot .fl{font-family:var(--font1);font-size:20px;letter-spacing:6px;color:var(--orange);margin-bottom:8px}
    .foot p{font-size:12px;color:var(--gray3)}
    .foot .local{color:var(--yellow);font-weight:600}

    /* ==================== CART ==================== */
    .cart-fab{position:fixed;bottom:24px;right:24px;width:60px;height:60px;background:var(--orange);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 20px rgba(255,107,0,.4);z-index:100;transition:all .2s;border:none;opacity:0;pointer-events:none;transform:scale(0.8)}
    .cart-fab.show{opacity:1;pointer-events:auto;transform:scale(1)}
    .cart-fab:hover{transform:scale(1.05);box-shadow:0 6px 24px rgba(255,107,0,.5)}
    .cart-fab:active{transform:scale(.95)}
    .cart-fab svg{width:28px;height:28px;color:var(--white)}
    .cart-fab .cart-count{position:absolute;top:-4px;right:-4px;min-width:24px;height:24px;background:var(--green);color:var(--dark);border-radius:12px;font-family:var(--font1);font-size:14px;display:flex;align-items:center;justify-content:center;padding:0 6px}
    .cart-fab.shake{animation:cartShake .5s ease}
    @keyframes cartShake{0%,100%{transform:scale(1) rotate(0)}20%{transform:scale(1.1) rotate(-10deg)}40%{transform:scale(1.1) rotate(10deg)}60%{transform:scale(1.05) rotate(-5deg)}80%{transform:scale(1.05) rotate(5deg)}}
    
    .cart-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);z-index:200;opacity:0;pointer-events:none;transition:opacity .3s}
    .cart-overlay.show{opacity:1;pointer-events:auto}
    
    .cart-drawer{position:fixed;bottom:0;left:0;right:0;max-height:90vh;background:var(--gray1);border-radius:24px 24px 0 0;z-index:250;transform:translateY(100%);transition:transform .3s ease;display:flex;flex-direction:column;overflow:hidden}
    .cart-drawer.show{transform:translateY(0)}
    
    .cart-header{display:flex;align-items:center;justify-content:space-between;padding:20px;border-bottom:1px solid var(--gray2);flex-shrink:0}
    .cart-header h3{font-family:var(--font1);font-size:24px;color:var(--white);letter-spacing:2px;display:flex;align-items:center;gap:10px}
    .cart-header h3 span{font-size:20px}
    .cart-close{width:36px;height:36px;background:var(--gray2);border:none;border-radius:50%;color:var(--white);font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center}
    
    .cart-items{flex:1;overflow-y:auto;padding:16px 20px}
    .cart-empty{text-align:center;padding:40px 20px;color:var(--gray3)}
    .cart-empty span{font-size:48px;display:block;margin-bottom:12px}
    .cart-empty p{font-size:14px}
    
    .cart-item{background:var(--gray2);border-radius:12px;padding:14px;margin-bottom:12px;display:flex;gap:12px;align-items:flex-start}
    .cart-item-icon{width:50px;height:50px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
    .cart-item-icon.bowl{background:linear-gradient(135deg,var(--orange),#cc5500)}
    .cart-item-icon.cookie{background:linear-gradient(135deg,#D4A574,#8B5A2B)}
    .cart-item-icon.brownie{background:linear-gradient(135deg,#5D3A1A,#3D2510)}
    .cart-item-icon.wings{background:linear-gradient(135deg,#E85D04,#DC2F02)}
    .cart-item-info{flex:1;min-width:0}
    .cart-item-name{font-family:var(--font1);font-size:14px;color:var(--white);letter-spacing:1px;margin-bottom:2px}
    .cart-item-details{font-size:11px;color:var(--gray3);margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .cart-item-price{font-family:var(--font1);font-size:16px;color:var(--orange)}
    .cart-item-remove{background:none;border:none;color:var(--gray3);cursor:pointer;padding:4px;font-size:18px}
    .cart-item-remove:hover{color:#ff6b6b}
    
    .cart-footer{padding:20px;border-top:1px solid var(--gray2);background:var(--dark);flex-shrink:0}
    .cart-subtotal{display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;color:var(--gray3)}
    .cart-delivery{display:flex;justify-content:space-between;margin-bottom:12px;font-size:14px}
    .cart-delivery span:last-child{color:var(--green);font-weight:600}
    .cart-total{display:flex;justify-content:space-between;font-family:var(--font1);font-size:22px;color:var(--white);margin-bottom:16px;padding-top:12px;border-top:1px solid var(--gray2)}
    .cart-checkout{width:100%;background:var(--orange);color:var(--white);border:none;padding:16px;font-family:var(--font1);font-size:18px;letter-spacing:2px;border-radius:12px;cursor:pointer}
    .cart-checkout:hover{background:#ff8533}
    .cart-checkout:disabled{background:var(--gray2);color:var(--gray3);cursor:not-allowed}
    
    .cart-clear{background:none;border:none;color:var(--gray3);font-size:12px;cursor:pointer;margin-top:10px;width:100%;text-align:center}
    .cart-clear:hover{color:#ff6b6b}
    
    /* Add to cart link style */
    .add-cart-link{display:block;text-align:center;margin-top:10px;font-size:14px;color:var(--white);cursor:pointer;transition:all .2s;padding:12px 16px;background:transparent;border:2px solid var(--gray2);border-radius:10px;font-family:var(--font1);letter-spacing:1px}
    .add-cart-link:hover{border-color:var(--orange);color:var(--orange)}
    .add-cart-link svg{width:16px;height:16px;vertical-align:middle;margin-right:6px}
    .checkbtn.blue + .add-cart-link:hover{border-color:var(--blue);color:var(--blue)}
    
    .order-now-link{display:block;text-align:center;margin-top:10px;font-size:14px;color:var(--white);cursor:pointer;transition:all .2s;padding:12px 16px;background:transparent;border:2px solid var(--gray2);border-radius:10px;font-family:var(--font1);letter-spacing:1px}
    .order-now-link:hover{border-color:var(--white);color:var(--white)}
    .cookieboxx-section .order-now-link:hover{border-color:#D4A574;color:#D4A574}

    /* Order Flow */
    .hdr{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:var(--dark);border-bottom:1px solid var(--gray2);position:sticky;top:0;z-index:10}
    .back{background:none;border:none;color:var(--white);cursor:pointer;padding:4px}.back svg{width:22px;height:22px}
    .hdr-logo{font-family:var(--font1);font-size:18px;letter-spacing:4px;color:var(--orange)}
    .free-ban{background:var(--green);padding:10px;text-align:center;font-size:12px;font-weight:700;color:var(--dark);letter-spacing:1px}
    .free-ban.blue{background:var(--blue);color:var(--white)}
    .steps{display:flex;align-items:center;justify-content:center;padding:16px;background:var(--gray1);gap:6px}
    .step{width:32px;height:32px;border-radius:50%;background:var(--gray2);color:var(--gray3);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700}
    .step.active{background:var(--orange);color:var(--white)}.step.done{background:var(--green);color:var(--white)}
    .step.active.blue{background:var(--blue)}.step.active.green{background:var(--green)}
    .sline{width:20px;height:2px;background:var(--gray2)}.sline.done{background:var(--green)}
    .content{flex:1;padding:24px 20px;padding-bottom:140px;overflow-y:auto}
    .content h2{font-family:var(--font1);font-size:26px;margin-bottom:8px;display:flex;align-items:center;gap:10px;color:var(--white);letter-spacing:0.5px}
    .content h2 svg{width:24px;height:24px;color:var(--orange)}
    .content h2 svg.blue{color:var(--blue)}.content h2 svg.green{color:var(--green)}
    .content .sub{font-size:14px;color:var(--gray3);margin-bottom:20px;font-weight:400}
    .content .sub{font-size:13px;color:var(--gray3);margin-bottom:20px}

    /* Bowl Selection in Order Flow */
    .bowl-options{display:flex;flex-direction:column;gap:12px}
    .bowl-opt{background:var(--gray1);border:2px solid var(--gray2);border-radius:14px;padding:20px;cursor:pointer;transition:all .2s}
    .bowl-opt:hover{border-color:rgba(255,77,0,.3)}
    .bowl-opt:active{transform:scale(.98)}
    .bowl-opt.sel{border-color:var(--orange);background:rgba(255,77,0,.06)}
    .bowl-opt h4{font-family:var(--font1);font-size:24px;margin-bottom:6px;letter-spacing:0.5px}
    .bowl-opt.sel h4{color:var(--orange)}
    .bowl-opt p{font-size:13px;color:var(--gray3);line-height:1.4}

    /* Size Selection */
    .selected-bowl{background:var(--gray1);border-radius:10px;padding:16px;margin-bottom:20px;display:flex;align-items:center;gap:16px}
    .selected-bowl .info{flex:1}
    .selected-bowl .info h4{font-family:var(--font1);font-size:20px;color:var(--white)}
    .selected-bowl .info p{font-size:12px;color:var(--gray3)}
    .selected-bowl .change{background:none;border:none;color:var(--orange);font-size:12px;font-weight:600;cursor:pointer}
    .size-selector{display:flex;gap:12px}
    .size-opt{flex:1;background:var(--gray1);border:2px solid var(--gray2);border-radius:14px;padding:18px;cursor:pointer;transition:all .2s;text-align:center}
    .size-opt:hover{border-color:rgba(255,77,0,.4)}
    .size-opt:active{transform:scale(.98)}
    .size-opt.sel{border-color:var(--orange);background:rgba(255,77,0,.08)}
    .size-header{margin-bottom:14px}
    .size-header h5{font-family:var(--font1);font-size:22px;color:var(--white);margin-bottom:4px}
    .size-opt.sel .size-header h5{color:var(--orange)}
    .size-header .price{font-family:var(--font1);font-size:28px;color:var(--orange)}
    .size-desc{font-size:11px;color:var(--gray3);margin-bottom:12px}
    .macro-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:12px}
    .macro-box{background:var(--gray2);border-radius:8px;padding:10px 8px;text-align:center}
    .macro-box .val{font-family:var(--font1);font-size:16px;color:var(--white);font-weight:600}
    .macro-box .lbl{font-size:9px;color:var(--gray3);text-transform:uppercase;margin-top:2px;letter-spacing:0.5px}

    /* Options */
    .opts{display:flex;flex-direction:column;gap:20px}
    .opt{display:flex;align-items:center;gap:14px;background:var(--gray1);border:2px solid var(--gray2);border-radius:12px;padding:22px;cursor:pointer;width:100%;text-align:left;color:var(--white);font-family:var(--font2);transition:all .2s}
    .opt:hover{border-color:rgba(255,77,0,.3)}
    .opt:active{transform:scale(.99)}
    .opt.sel{border-color:var(--orange);background:rgba(255,77,0,.06)}
    .opt-icon{width:46px;height:46px;background:var(--gray2);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:var(--orange);letter-spacing:0.5px}
    .opt.blue .opt-icon{color:var(--blue)}.opt.green .opt-icon{color:var(--green)}
    .opt.blue:hover{border-color:rgba(0,102,255,.3)}.opt.blue.sel{border-color:var(--blue);background:rgba(0,102,255,.06)}
    .opt.green:hover{border-color:rgba(0,210,106,.3)}.opt.green.sel{border-color:var(--green);background:rgba(0,210,106,.06)}
    .opt-info{flex:1;display:flex;flex-direction:column;gap:8px}
    .opt-label{font-weight:600;font-size:16px;letter-spacing:-0.01em;display:block;line-height:1}
    .opt-detail{font-size:13px;color:var(--gray3);font-weight:400;display:block;line-height:1}
    .opt .chk{color:var(--orange);width:22px;height:22px;display:none}
    .opt.blue .chk{color:var(--blue)}.opt.green .chk{color:var(--green)}
    .opt.sel .chk{display:block}

    /* Custom Location */
    .custom-loc{margin-top:12px;padding:16px;background:var(--gray1);border-radius:10px;border:2px solid var(--gray2);cursor:pointer}
    .custom-loc.sel{border-color:var(--orange)}
    .custom-loc h4{font-size:15px;font-weight:600;margin-bottom:4px;display:flex;align-items:center;gap:8px}
    .custom-loc h4 svg{width:18px;height:18px;color:var(--orange)}
    .custom-loc p{font-size:12px;color:var(--gray3);margin-bottom:12px}
    .custom-loc input{width:100%;background:var(--gray2);border:none;border-radius:8px;padding:14px;color:var(--white);font-family:var(--font2);font-size:14px;margin-bottom:8px}
    .custom-loc input::placeholder{color:var(--gray3)}
    .custom-loc .chk-row{display:flex;justify-content:flex-end}
    .custom-loc .chk{color:var(--orange);width:22px;height:22px;display:none}
    .custom-loc.sel .chk{display:block}

    /* Footer Button */
    .pfooter{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:480px;padding:16px 20px 28px;background:linear-gradient(transparent,var(--dark) 20%)}
    .pfooter .add-cart-link{margin-top:10px}
    .contbtn{width:100%;background:var(--orange);color:var(--white);border:none;padding:18px;font-family:var(--font1);font-size:18px;letter-spacing:1.5px;border-radius:12px;cursor:pointer;transition:all .2s;font-weight:400}
    .contbtn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(255,77,0,.3)}
    .contbtn:active{transform:scale(.98)}
    .contbtn.off{background:var(--gray2);color:var(--gray3);cursor:not-allowed;box-shadow:none;transform:none}
    .contbtn.blue{background:var(--blue)}.contbtn.blue:hover{box-shadow:0 4px 12px rgba(0,102,255,.3)}
    .contbtn.green{background:var(--green);color:var(--dark)}.contbtn.green:hover{box-shadow:0 4px 12px rgba(0,210,106,.3)}

    /* Summary */
    .summary{background:var(--gray1);border-radius:16px;overflow:hidden}
    .sum-prod{display:flex;align-items:center;gap:16px;padding:20px;border-bottom:1px solid var(--gray2)}
    .sum-img{width:56px;height:56px;background:var(--gray2);border-radius:10px;display:flex;align-items:center;justify-content:center;font-family:var(--font1);font-size:14px;color:var(--orange)}
    .sum-info{flex:1}.sum-info h4{font-size:15px;font-weight:600}.sum-info p{font-size:12px;color:var(--gray3)}
    .sum-price{font-family:var(--font1);font-size:24px;color:var(--yellow)}
    .qty-row{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--gray2);font-weight:600}
    .qty-ctrl{display:flex;align-items:center;gap:16px;background:var(--gray2);border-radius:100px;padding:4px}
    .qty-ctrl button{width:36px;height:36px;border-radius:50%;border:none;background:var(--dark);color:var(--white);font-size:18px;cursor:pointer}
    .qty-ctrl span{font-size:18px;font-weight:700;min-width:24px;text-align:center}
    .del-sum{padding:16px 20px;border-bottom:1px solid var(--gray2)}
    .sum-item{display:flex;align-items:center;gap:12px;padding:10px 0}
    .sum-item svg{color:var(--orange);width:20px;height:20px}
    .sum-item>div{flex:1}
    .sum-lbl{font-size:10px;color:var(--gray3);text-transform:uppercase;letter-spacing:1px}
    .sum-val{font-size:14px;font-weight:600}
    .edit-btn{background:none;border:none;color:var(--orange);font-size:12px;font-weight:600;cursor:pointer}
    .total-row{display:flex;align-items:center;justify-content:space-between;padding:20px;background:var(--gray2)}
    .total-row span:first-child{font-weight:700;text-transform:uppercase;letter-spacing:1px}
    .total-price{font-family:var(--font1);font-size:32px;color:var(--yellow)}
    .discount-row{display:flex;justify-content:space-between;padding:12px 20px;background:rgba(0,210,106,.1);border-bottom:1px solid var(--gray2)}
    .discount-row span{font-size:12px;color:var(--green);font-weight:600}
    .checkbtn{width:100%;background:var(--orange);color:var(--white);border:none;padding:18px;font-family:var(--font1);font-size:18px;letter-spacing:1.5px;border-radius:12px;cursor:pointer;transition:all .2s}
    .checkbtn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(255,77,0,.3)}
    .checkbtn:active{transform:scale(.98)}
    .checkbtn.blue{background:var(--blue)}.checkbtn.blue:hover{box-shadow:0 4px 12px rgba(0,102,255,.3)}
    .checkbtn.green{background:var(--green);color:var(--dark)}.checkbtn.green:hover{box-shadow:0 4px 12px rgba(0,210,106,.3)}
    .checknote{text-align:center;font-size:12px;color:var(--gray3);margin-top:12px}

    /* Confirmation */
    .conf-page{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;text-align:center}
    .conf-icon{width:72px;height:72px;background:var(--green);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 16px}
    .conf-icon svg{width:36px;height:36px;color:var(--white)}
    .conf-page h1{font-family:var(--font1);font-size:32px;color:var(--green);margin-bottom:8px;letter-spacing:2px}
    .conf-page>div>p{color:var(--gray3);margin-bottom:24px}
    .conf-note{font-size:12px;color:var(--gray3);margin:16px 0 24px;padding:12px;background:var(--gray1);border-radius:8px}
    .conf-card{background:var(--gray1);border-radius:16px;padding:20px;margin-bottom:20px;text-align:left}
    .conf-row{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--gray2)}
    .conf-row:last-child{border-bottom:none}
    .conf-row span:first-child{color:var(--gray3)}
    .conf-row span:last-child{font-weight:600}
    .conf-row.total span:last-child{color:var(--yellow);font-family:var(--font1);font-size:24px}

    /* Plan */
    .plan-hero{background:linear-gradient(135deg,rgba(0,210,106,.1),rgba(0,102,255,.05));border:2px solid var(--green);border-radius:16px;padding:32px;text-align:center;margin-bottom:20px}
    .plan-hero .big-price{font-family:var(--font1);font-size:64px;color:var(--yellow);line-height:1}
    .plan-hero .per{font-size:16px;color:var(--gray3)}
    .plan-hero .save-badge{display:inline-block;background:var(--green);color:var(--dark);padding:8px 20px;border-radius:100px;font-size:13px;font-weight:700;margin-top:16px}
    .plan-features{background:var(--gray1);border-radius:12px;padding:20px;margin-bottom:20px}
    .plan-features h4{font-family:var(--font1);font-size:18px;margin-bottom:16px;letter-spacing:1px}
    .plan-features li{display:flex;align-items:center;gap:12px;font-size:14px;padding:8px 0;list-style:none}
    .plan-features li svg{width:18px;height:18px;color:var(--green)}
    .plan-breakdown{background:var(--gray2);border-radius:12px;padding:16px;text-align:center;margin-bottom:20px}
    .plan-breakdown .daily{font-family:var(--font1);font-size:40px;color:var(--yellow)}
    .plan-breakdown .daily span{font-size:16px;color:var(--gray3)}
    .plan-breakdown p{font-size:12px;color:var(--green);margin-top:4px}

    /* Calendar Styles */
    .calendar-trigger{display:flex;align-items:center;justify-content:space-between;background:var(--gray2);border:2px solid var(--gray2);border-radius:10px;padding:14px 16px;cursor:pointer;transition:all .2s;color:var(--gray3)}
    .calendar-trigger:hover{border-color:var(--orange)}
    .calendar-trigger .has-date{color:var(--white)}
    .calendar-trigger svg{color:var(--orange)}
    
    .calendar-modal{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:all .3s}
    .calendar-modal.show{opacity:1;visibility:visible}
    .calendar-overlay{position:absolute;inset:0;background:rgba(0,0,0,0.8)}
    .calendar-container{position:relative;background:var(--gray1);border-radius:20px;padding:24px;width:90%;max-width:360px;transform:translateY(20px);transition:transform .3s}
    .calendar-modal.show .calendar-container{transform:translateY(0)}
    
    .calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .calendar-header h3{font-family:var(--font1);font-size:18px;color:var(--white);margin:0}
    .calendar-close{background:none;border:none;color:var(--gray3);font-size:28px;cursor:pointer;padding:0;line-height:1}
    .calendar-close:hover{color:var(--white)}
    
    .calendar-quick{display:flex;gap:10px;margin-bottom:20px}
    .quick-date{flex:1;background:var(--gray2);border:2px solid var(--gray2);border-radius:10px;padding:12px;color:var(--white);font-family:var(--font2);font-size:14px;cursor:pointer;transition:all .2s}
    .quick-date:hover{border-color:var(--orange);color:var(--orange)}
    
    .calendar-nav{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .calendar-nav button{background:var(--gray2);border:none;color:var(--white);width:36px;height:36px;border-radius:10px;font-size:20px;cursor:pointer;transition:all .2s}
    .calendar-nav button:hover{background:var(--orange)}
    .calendar-nav span{font-family:var(--font2);font-size:16px;font-weight:600;color:var(--white)}
    
    .calendar-weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:8px}
    .calendar-weekdays div{text-align:center;font-size:12px;color:var(--gray3);padding:8px 0;font-weight:500}
    
    .calendar-days{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
    .cal-day{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border-radius:10px;font-size:14px;font-weight:500;color:var(--white);cursor:pointer;transition:all .2s}
    .cal-day:not(.empty):not(.past):hover{background:var(--gray2)}
    .cal-day.empty{cursor:default}
    .cal-day.past{color:var(--gray3);cursor:not-allowed;opacity:0.4}
    .cal-day.today{background:var(--gray2);color:var(--orange);font-weight:700}
    .cal-day.selected{background:var(--orange)!important;color:var(--black)!important;font-weight:700}

    .hidden{display:none!important}
  </style>
</head>
<body>
<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>

<!-- iPhone Frame -->
<div class="iphone-frame">
  <div class="iphone-notch"></div>
  <div class="iphone-speaker"></div>
  <div class="iphone-status-bar">
    <div class="status-time" id="statusTime">9:41</div>
    <div class="status-icons">
      <svg width="18" height="12" viewBox="0 0 18 12"><path d="M1 4.5C1 3.67 1.67 3 2.5 3h2C5.33 3 6 3.67 6 4.5v3C6 8.33 5.33 9 4.5 9h-2C1.67 9 1 8.33 1 7.5v-3zM7 3.5C7 2.67 7.67 2 8.5 2h2c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-2C7.67 9 7 8.33 7 7.5v-4zM13 2.5c0-.83.67-1.5 1.5-1.5h2c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5h-2c-.83 0-1.5-.67-1.5-1.5v-5z" fill="white"/></svg>
      <svg width="16" height="12" viewBox="0 0 16 12"><path d="M8 2.4A6.6 6.6 0 0114.6 9a.6.6 0 001.2 0A7.8 7.8 0 008 1.2a.6.6 0 000 1.2zM8 5.2a3.8 3.8 0 013.8 3.8.6.6 0 001.2 0A5 5 0 008 4a.6.6 0 000 1.2zM8 8a1 1 0 011 1 1 1 0 01-2 0 1 1 0 011-1z" fill="white"/></svg>
      <div class="status-battery"><div class="battery-level"></div></div>
    </div>
  </div>
  <div class="iphone-screen">
    <div class="app">
      <!-- Confetti Container -->
      <div class="confetti-container" id="confettiContainer"></div>
  
      <div id="landing" class="page active">
    <div class="logo">LUNCHBOXX</div>
    <div class="hero">
      <h1>PARTY FOOD<br><span>DELIVERED</span></h1>
    </div>

    <div class="toggle-wrap">
      <div class="menu-toggle">
        <button id="toggleSnacks" class="snacks-active" onclick="toggleMenu('snacks')">PARTY</button>
        <button id="toggleDessert" onclick="toggleMenu('dessert')">DESSERTS</button>
      </div>
    </div>

    <div id="dessertSection" class="dessert-section">
      <!-- Dessert Menu -->
      <div class="dessert-menu" id="dessertMenu">
        <div class="dessert-menu-header">
          <h2>DESSERTS</h2>
          <p>Handcrafted by our partners, delivered by us</p>
        </div>
        <div class="dessert-cards">
          <div class="dessert-card" onclick="openDessertType('cookie')">
            <div class="dessert-card-icon cookie"></div>
            <div class="dessert-card-info">
              <div class="dessert-card-name">COOKIEBOXX</div>
              <div class="dessert-card-desc">by Fudge & Crumble  Stuffed cookies baked fresh</div>
              <div class="dessert-card-price">From $20</div>
            </div>
            <div class="dessert-card-arrow"></div>
          </div>
          <div class="dessert-card brownie-card" onclick="openDessertType('brownie')">
            <div class="dessert-card-icon brownie"></div>
            <div class="dessert-card-info">
              <div class="dessert-card-name">BROWNIEBOXX</div>
              <div class="dessert-card-desc">by Fudge & Crumble  Fudgy brownies baked fresh</div>
              <div class="dessert-card-price">From $30</div>
            </div>
            <div class="dessert-card-arrow"></div>
          </div>
        </div>
      </div>
      
      <!-- COOKIEBOXX Section -->
      <div class="cookieboxx-section" id="cookieboxxSection">
        <button class="dessert-back" onclick="backToDessertMenu()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back to Desserts
        </button>
        <div class="dessert-header">
          <h2>COOKIEBOXX</h2>
          <p class="partner">by <span>Fudge & Crumble Patisserie</span></p>
        </div>
        
        <!-- Partner Badge -->
        <a href="https://instagram.com/_fudgeandcrumble_" target="_blank" style="text-decoration:none">
          <div class="partner-badge">
            <div class="pb-avatar"></div>
            <div class="pb-text">
              <strong>Fudge & Crumble</strong>
              <span class="pb-ig">@_fudgeandcrumble_</span>
            </div>
            <span class="pb-arrow"></span>
          </div>
        </a>
        
        <!-- Weekly Flavor Drop -->
        <div class="flavor-drop">
          <div class="drop-label"> PRE-ORDER</div>
          <div class="drop-title">9 Flavors Available</div>
          <div class="drop-timer">Baked fresh to order  <span>Same-day or next-day delivery</span></div>
        </div>

        <!-- Pre-order Notice -->
        <div class="preorder-notice">
          <span class="notice-icon"></span>
          <div><strong>Pre-order:</strong> Pick your flavors & box size. You'll choose your delivery date at checkout  same-day or next-day available.</div>
        </div>

        <!-- Quick Packs -->
        <div class="quick-packs" id="quickPacksAvail">
          <div class="quick-pack" onclick="selectQuickPack('five')">
            <div class="quick-pack-name">5 PACK</div>
            <div class="quick-pack-desc">Try a mix</div>
            <div class="quick-pack-price">$20</div>
          </div>
          <div class="quick-pack" onclick="selectQuickPack('ten')">
            <div class="quick-pack-name">10 PACK</div>
            <div class="quick-pack-desc">Share with friends</div>
            <div class="quick-pack-price">$40</div>
          </div>
          <div class="quick-pack" onclick="selectQuickPack('twenty')">
            <div class="quick-pack-name">20 PACK</div>
            <div class="quick-pack-desc">Perfect for parties</div>
            <div class="quick-pack-price">$75</div>
          </div>
          <div class="quick-pack" onclick="selectQuickPack('thirty')">
            <div class="quick-pack-tag">POPULAR</div>
            <div class="quick-pack-name">30 PACK</div>
            <div class="quick-pack-desc">Small events</div>
            <div class="quick-pack-price">$104</div>
          </div>
          <div class="quick-pack" onclick="selectQuickPack('fifty')">
            <div class="quick-pack-tag">BEST VALUE</div>
            <div class="quick-pack-name">50 PACK</div>
            <div class="quick-pack-desc">Office & events</div>
            <div class="quick-pack-price">$170</div>
          </div>
          <div class="quick-pack" onclick="selectQuickPack('hundred')">
            <div class="quick-pack-name">100 PACK</div>
            <div class="quick-pack-desc">Catering & bulk</div>
            <div class="quick-pack-price">$310</div>
          </div>
        </div>

        <!-- Meet the Baker -->
        <a href="https://instagram.com/_fudgeandcrumble_" target="_blank" style="text-decoration:none">
          <div class="baker-card">
            <div class="baker-img"></div>
            <div class="baker-info">
              <div class="baker-name">Fudge & Crumble Patisserie</div>
              <div class="baker-role">Official LUNCHBOXX Partner</div>
              <div class="baker-desc">Homemade treats, crafted to excellence. Custom orders + gluten free options available.</div>
              <div class="baker-ig">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153.509.5.902 1.105 1.153 1.772.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122s-.01 3.056-.06 4.122c-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 01-1.153 1.772c-.5.508-1.105.902-1.772 1.153-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06s-3.056-.01-4.122-.06c-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 01-1.772-1.153A4.904 4.904 0 012.525 18.55c-.247-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12s.01-3.056.06-4.122c.05-1.066.217-1.79.465-2.428a4.88 4.88 0 011.153-1.772A4.897 4.897 0 015.45 2.525c.638-.248 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2zm0 5a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm5.25-3.5a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z"/></svg>
                @_fudgeandcrumble_
              </div>
            </div>
          </div>
        </a>
        
        <div class="cookie-builder">
          <!-- Visual Cookie Box with Custom Label -->
          <div class="cookie-box-visual">
            <input type="text" class="box-label-input" id="boxLabelInput" placeholder=" Add a custom label..." maxlength="30" oninput="updateBoxLabel()">
            <div class="box-lid" id="boxLid">
              <div class="lid-top"></div>
            </div>
            <div class="box-container" id="cookieBox">
              <div class="box-inner" id="boxInner"></div>
              <div class="box-label" id="boxLabelDisplay">COOKIEBOXX</div>
            </div>
            <div class="box-count" id="boxCount">0 cookies</div>
            <button class="clear-box-btn" id="clearBoxBtn" onclick="clearCookieBox()" style="display:none"> Clear Box</button>
          </div>

          <!-- Progress Bar -->
          <div class="progress-section" id="progressSection">
            <div class="progress-header">
              <span class="progress-title">PACK SIZE</span>
              <span class="progress-reward" id="progressReward">Select a pack to start!</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill" style="width:0%"></div>
            </div>
            <div class="progress-milestones">
              <div class="milestone" id="mile5">5</div>
              <div class="milestone" id="mile10">10</div>
              <div class="milestone" id="mile20">20</div>
              <div class="milestone" id="mile50">50</div>
              <div class="milestone" id="mile100">100</div>
            </div>
          </div>

        <!-- Flying cookie animation target -->
        <div class="flying-cookie" id="flyingCookie"></div>
        
        <p class="tap-hint">Tap a cookie to add  Mix & match flavors</p>
        
        <div class="cookie-grid-compact" id="cookieGrid"></div>

        <!-- Smart Suggestion -->
        <div class="smart-suggestion" id="smartSuggestion" onclick="addSuggestedCookies()">
          <span></span>
          <p id="suggestionText">Add <strong>2 more</strong> to unlock <strong>5% off!</strong></p>
          <button id="suggestionBtn">+2</button>
        </div>
        
        <div class="cream-cheese-global">
          <label>
            <span></span>
            Cream Cheese Stuffing
          </label>
          <div style="display:flex;align-items:center;gap:10px">
            <span class="cc-price">+$1/ea</span>
            <div class="toggle-switch" id="creamCheeseToggle" onclick="toggleCreamCheese()"></div>
          </div>
        </div>

        <!-- Gift Mode -->
        <div class="gift-toggle" id="giftToggle" onclick="toggleGiftMode()">
          <div class="gift-toggle-left">
            <span></span>
            <div class="gift-toggle-info">
              <h4>SEND AS GIFT</h4>
              <p>Add a personal message & recipient details</p>
            </div>
          </div>
          <div class="toggle-switch" id="giftSwitch"></div>
        </div>

        <!-- Gift Form -->
        <div class="gift-form" id="giftForm">
          <h4> GIFT DETAILS</h4>
          <div class="form-row">
            <label>Recipient Name</label>
            <input type="text" id="giftRecipient" placeholder="Who's the lucky person?">
          </div>
          <div class="form-row">
            <label>Delivery Address</label>
            <input type="text" id="giftAddress" placeholder="Where should we deliver?">
          </div>
          <div class="form-row">
            <label>Personal Message</label>
            <textarea id="giftMessage" placeholder="Write a heartfelt message..." maxlength="150" oninput="updateCharCount()"></textarea>
            <div class="char-count"><span id="charCount">0</span>/150</div>
          </div>
          <div class="form-row">
            <label>Special Instructions (optional)</label>
            <input type="text" id="giftNotes" placeholder="Allergies, delivery notes, etc.">
          </div>
        </div>

        <!-- Add-ons Section -->
        <div class="addons-section">
          <h4> EXTRAS</h4>
          <div class="addon-item" onclick="toggleAddon('giftWrap')">
            <div class="addon-left">
              <span></span>
              <div class="addon-info">
                <h5>Premium Gift Wrap</h5>
                <p>Ribbon, tissue & gift tag</p>
              </div>
            </div>
            <div class="addon-price">+$5</div>
            <div class="addon-check" id="addonGiftWrap"></div>
          </div>
        </div>

        <!-- Delivery Details -->
        <div class="delivery-section" id="cookieDeliverySection">
          <h4> DELIVERY DETAILS</h4>
          <div class="form-row">
            <label>Your Name</label>
            <input type="text" id="cookieYourName" placeholder="Your name">
          </div>
          <div class="form-row">
            <label>Phone Number</label>
            <input type="tel" id="cookiePhone" placeholder="For delivery updates">
          </div>
          <div class="form-row">
            <label>Delivery Address</label>
            <input type="text" id="cookieDeliveryAddress" placeholder="Full delivery address">
          </div>
          <div class="form-row">
            <label>Delivery Date</label>
            <div class="calendar-trigger" onclick="openCalendar('cookie')">
              <span id="cookieDateDisplay">Select date</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            </div>
            <input type="hidden" id="cookieDeliveryDate">
          </div>
          <div class="form-row">
            <label>Delivery Notes (optional)</label>
            <input type="text" id="cookieDeliveryNotes" placeholder="Gate code, leave at door, etc.">
          </div>
        </div>

        <div class="box-summary" id="boxSummary">
          <div class="summary-row">
            <span>Cookies</span>
            <span id="totalCookies">0</span>
          </div>
          <div class="summary-row" id="creamCheeseRow" style="display:none">
            <span>Cream cheese stuffing</span>
            <span id="creamCheeseTotal">$0</span>
          </div>
          <div class="summary-row" id="addonsRow" style="display:none">
            <span>Extras</span>
            <span id="addonsTotal">$0</span>
          </div>
          <div class="summary-row discount-row" id="discountRow" style="display:none">
            <span id="discountLabel">Bulk discount</span>
            <span id="discountAmt" class="green">-$0</span>
          </div>
          <div class="summary-row total">
            <span>Total</span>
            <span id="cookieTotal">$0.00</span>
          </div>
        </div>

        <div class="bulk-tiers">
          <div class="tier-badge" id="tier5">5 Pack $20</div>
          <div class="tier-badge" id="tier10">10 Pack $40</div>
          <div class="tier-badge" id="tier20">20 Pack $75</div>
          <div class="tier-badge" id="tier30">30 Pack $104</div>
          <div class="tier-badge" id="tier50">50 Pack $170</div>
          <div class="tier-badge" id="tier100">100 Pack $310</div>
        </div>
        
        <div class="free-delivery-banner">Delivery included with all orders</div>

        <button class="dessert-cta" id="dessertCta" onclick="addCookiesToCart()" disabled>SELECT A PACK</button>
        <div class="order-now-link" id="cookieOrderNowLink" onclick="orderCookies()" style="display:none">ORDER NOW</div>
      </div>
    </div>
    <!-- End COOKIEBOXX Section -->
    
    <!-- BROWNIEBOXX Section -->
    <div class="brownieboxx-section" id="brownieboxxSection">
      <button class="dessert-back" onclick="backToDessertMenu()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Back to Desserts
      </button>
      <div class="dessert-header">
        <h2>BROWNIEBOXX</h2>
        <p class="partner">by <span>Fudge & Crumble Patisserie</span></p>
      </div>
      
      <!-- Partner Badge -->
      <a href="https://instagram.com/_fudgeandcrumble_" target="_blank" style="text-decoration:none">
        <div class="partner-badge">
          <div class="pb-avatar"></div>
          <div class="pb-text">
            <strong>Fudge & Crumble</strong>
            <span class="pb-ig">@_fudgeandcrumble_</span>
          </div>
          <span class="pb-arrow"></span>
        </div>
      </a>
      
      <!-- Weekly Flavor Drop -->
      <div class="flavor-drop">
        <div class="drop-label"> PRE-ORDER</div>
        <div class="drop-title">Fudgy Brownies, Fresh Baked</div>
        <div class="drop-timer">Baked fresh to order  <span>Same-day or next-day delivery</span></div>
      </div>

      <!-- Pre-order Notice -->
      <div class="preorder-notice">
        <span class="notice-icon"></span>
        <div><strong>Pre-order:</strong> Pick your flavors & box size. You'll choose your delivery date at checkout  same-day or next-day available.</div>
      </div>

      <!-- Quick Packs -->
      <div class="quick-packs" id="browniePacksAvail">
        <div class="quick-pack" onclick="selectBrowniePack('six')">
          <div class="quick-pack-name">6 PACK</div>
          <div class="quick-pack-desc">Try a mix</div>
          <div class="quick-pack-price">$30</div>
        </div>
        <div class="quick-pack" onclick="selectBrowniePack('twelve')">
          <div class="quick-pack-name">12 PACK</div>
          <div class="quick-pack-desc">Perfect for sharing</div>
          <div class="quick-pack-price">$60</div>
        </div>
        <div class="quick-pack" onclick="selectBrowniePack('twentyfour')">
          <div class="quick-pack-tag">POPULAR</div>
          <div class="quick-pack-name">24 PACK</div>
          <div class="quick-pack-desc">Office treats</div>
          <div class="quick-pack-price">$110</div>
        </div>
        <div class="quick-pack" onclick="selectBrowniePack('fortyeight')">
          <div class="quick-pack-tag">BEST VALUE</div>
          <div class="quick-pack-name">48 PACK</div>
          <div class="quick-pack-desc">Events & parties</div>
          <div class="quick-pack-price">$200</div>
        </div>
      </div>

      <!-- Meet the Baker -->
      <a href="https://instagram.com/_fudgeandcrumble_" target="_blank" style="text-decoration:none">
        <div class="baker-card">
          <div class="baker-img"></div>
          <div class="baker-info">
            <div class="baker-name">Fudge & Crumble Patisserie</div>
            <div class="baker-role">Official LUNCHBOXX Partner</div>
            <div class="baker-desc">Homemade treats, crafted to excellence. Custom orders + gluten free options available.</div>
            <div class="baker-ig">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153.509.5.902 1.105 1.153 1.772.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122s-.01 3.056-.06 4.122c-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 01-1.153 1.772c-.5.508-1.105.902-1.772 1.153-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06s-3.056-.01-4.122-.06c-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 01-1.772-1.153A4.904 4.904 0 012.525 18.55c-.247-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12s.01-3.056.06-4.122c.05-1.066.217-1.79.465-2.428a4.88 4.88 0 011.153-1.772A4.897 4.897 0 015.45 2.525c.638-.248 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2zm0 5a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm5.25-3.5a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z"/></svg>
              @_fudgeandcrumble_
            </div>
          </div>
        </div>
      </a>
      
      <div class="cookie-builder">
        <!-- Visual Brownie Box -->
        <div class="cookie-box-visual">
          <input type="text" class="box-label-input" id="brownieBoxLabelInput" placeholder=" Add a custom label..." maxlength="30" oninput="updateBrownieBoxLabel()">
          <div class="box-lid" id="brownieBoxLid">
            <div class="lid-top"></div>
          </div>
          <div class="box-container" id="brownieBox">
            <div class="box-inner" id="brownieBoxInner"></div>
            <div class="box-label" id="brownieBoxLabelDisplay">BROWNIEBOXX</div>
          </div>
          <div class="box-count" id="brownieBoxCount">0 brownies</div>
          <button class="clear-box-btn" id="clearBrownieBtn" onclick="clearBrownieBox()" style="display:none"> Clear Box</button>
        </div>

        <!-- Progress Bar -->
        <div class="progress-section" id="brownieProgressSection">
          <div class="progress-header">
            <span class="progress-title">PACK SIZE</span>
            <span class="progress-reward" id="brownieProgressReward">Select a pack to start!</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="brownieProgressFill" style="width:0%"></div>
          </div>
          <div class="progress-milestones">
            <div class="milestone" id="bmile6">6</div>
            <div class="milestone" id="bmile12">12</div>
            <div class="milestone" id="bmile24">24</div>
            <div class="milestone" id="bmile48">48</div>
          </div>
        </div>

        <!-- Flying brownie animation target -->
        <div class="flying-cookie" id="flyingBrownie"></div>
        
        <p class="tap-hint">Tap a brownie to add  Mix & match flavors</p>
        
        <!-- Brownie Grid -->
        <div class="cookie-grid-compact" id="brownieGrid"></div>

        <!-- Smart Suggestion -->
        <div class="smart-suggestion" id="brownieSuggestion" onclick="addSuggestedBrownies()" style="display:none">
          <span></span>
          <p id="brownieSuggestionText">Add <strong>2 more</strong> to reach next tier!</p>
          <button id="brownieSuggestionBtn">+2</button>
        </div>

        <!-- Gift Mode -->
        <div class="gift-toggle" id="brownieGiftToggle" onclick="toggleBrownieGiftMode()">
          <div class="gift-toggle-left">
            <span></span>
            <div class="gift-toggle-info">
              <h4>SEND AS GIFT</h4>
              <p>Add a personal message & recipient details</p>
            </div>
          </div>
          <div class="toggle-switch" id="brownieGiftSwitch"></div>
        </div>

        <!-- Gift Form -->
        <div class="gift-form" id="brownieGiftForm">
          <h4> GIFT DETAILS</h4>
          <div class="form-row">
            <label>Recipient Name</label>
            <input type="text" id="brownieGiftRecipient" placeholder="Who's the lucky person?">
          </div>
          <div class="form-row">
            <label>Delivery Address</label>
            <input type="text" id="brownieGiftAddress" placeholder="Where should we deliver?">
          </div>
          <div class="form-row">
            <label>Personal Message</label>
            <textarea id="brownieGiftMessage" placeholder="Write a heartfelt message..." maxlength="150" oninput="updateBrownieCharCount()"></textarea>
            <div class="char-count"><span id="brownieCharCount">0</span>/150</div>
          </div>
          <div class="form-row">
            <label>Special Instructions (optional)</label>
            <input type="text" id="brownieGiftNotes" placeholder="Allergies, delivery notes, etc.">
          </div>
        </div>

        <!-- Add-ons Section -->
        <div class="addons-section">
          <h4> EXTRAS</h4>
          <div class="addon-item" onclick="toggleBrownieAddon('giftWrap')">
            <div class="addon-left">
              <span></span>
              <div class="addon-info">
                <h5>Premium Gift Wrap</h5>
                <p>Ribbon, tissue & gift tag</p>
              </div>
            </div>
            <div class="addon-price">+$5</div>
            <div class="addon-check" id="brownieAddonGiftWrap"></div>
          </div>
          <div class="addon-item" onclick="toggleBrownieAddon('iceCream')">
            <div class="addon-left">
              <span></span>
              <div class="addon-info">
                <h5>Vanilla Ice Cream</h5>
                <p>Perfect pairing (pint)</p>
              </div>
            </div>
            <div class="addon-price">+$8</div>
            <div class="addon-check" id="brownieAddonIceCream"></div>
          </div>
        </div>

        <!-- Delivery Details -->
        <div class="delivery-section" id="brownieDeliverySection">
          <h4> DELIVERY DETAILS</h4>
          <div class="form-row">
            <label>Your Name</label>
            <input type="text" id="brownieYourName" placeholder="Your name">
          </div>
          <div class="form-row">
            <label>Phone Number</label>
            <input type="tel" id="browniePhone" placeholder="For delivery updates">
          </div>
          <div class="form-row">
            <label>Delivery Address</label>
            <input type="text" id="brownieDeliveryAddress" placeholder="Full delivery address">
          </div>
          <div class="form-row">
            <label>Delivery Date</label>
            <div class="calendar-trigger" onclick="openCalendar('brownie')">
              <span id="brownieDateDisplay">Select date</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            </div>
            <input type="hidden" id="brownieDeliveryDate">
          </div>
          <div class="form-row">
            <label>Delivery Notes (optional)</label>
            <input type="text" id="brownieDeliveryNotes" placeholder="Gate code, leave at door, etc.">
          </div>
        </div>

        <!-- Box Summary -->
        <div class="box-summary" id="brownieBoxSummary">
          <div class="summary-row">
            <span>Brownies</span>
            <span id="totalBrownies">0</span>
          </div>
          <div class="summary-row" id="brownieAddonsRow" style="display:none">
            <span>Extras</span>
            <span id="brownieAddonsTotal">$0</span>
          </div>
          <div class="summary-row total">
            <span>Total</span>
            <span id="brownieTotal">$0.00</span>
          </div>
        </div>

        <div class="bulk-tiers">
          <div class="tier-badge" id="btier6">6 Pack $30</div>
          <div class="tier-badge" id="btier12">12 Pack $60</div>
          <div class="tier-badge" id="btier24">24 Pack $110</div>
          <div class="tier-badge" id="btier48">48 Pack $200</div>
        </div>
        
        <div class="free-delivery-banner">Delivery included with all orders</div>

        <button class="dessert-cta" id="brownieCta" onclick="addBrowniesToCart()" disabled>SELECT A PACK</button>
        <div class="order-now-link" id="brownieOrderNowLink" onclick="orderBrownies()" style="display:none">ORDER NOW</div>
      </div>
    </div>
    <!-- End BROWNIEBOXX Section -->
  </div>

  <!-- SNACKS SECTION -->
  <div id="snacksSection" class="snacks-section show">
    <!-- DOGBOXX loads directly, no menu needed -->

    <!-- DOGBOXX Section -->
    <div class="dogboxx-section show" id="dogboxxSection">
      <div class="dessert-header">
        <h2>DOGBOXX</h2>
        <div class="partner"><span>Loaded Dogs</span></div>
      </div>

      <div class="cookie-builder dog-builder">
        <!-- Dog Visual -->
        <div class="dog-hero">
          <div class="dog-box-visual" style="background:linear-gradient(135deg,#D4442A,#8B1E0D);border-radius:16px;padding:20px 30px">
            <div style="font-size:24px;color:#FFD700;font-family:var(--font1);font-weight:700;margin-bottom:4px">DOGBOXX</div>
            <div class="dog-count-display" id="dogCountDisplay" style="color:#FFF">10</div>
            <div class="dog-label" style="color:rgba(255,255,255,0.8)">LOADED DOGS</div>
          </div>
        </div>

        <!-- Size Selection -->
        <label style="font-size:11px;color:var(--gray3);display:block;margin-bottom:8px;letter-spacing:1px">CHOOSE YOUR SIZE</label>
        <div style="display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap">
          <div class="dog-size-card" data-size="student" onclick="selectDogSize('student')" style="flex:1;min-width:90px">
            <div class="dog-size-count">2</div>
            <div class="dog-size-label">STUDENT</div>
            <div class="dog-size-serves">Feeds 1-2</div>
            <div class="dog-size-price">$10</div>
            <div style="font-size:8px;color:#4CAF50;margin-top:4px">40g protein</div>
            <div class="dog-pop-badge" style="background:#4CAF50">DEAL</div>
          </div>
          <div class="dog-size-card selected" data-size="regular" onclick="selectDogSize('regular')" style="flex:1;min-width:90px">
            <div class="dog-size-count">10</div>
            <div class="dog-size-label">REGULAR</div>
            <div class="dog-size-serves">Feeds 4-6</div>
            <div class="dog-size-price">$50</div>
          </div>
          <div class="dog-size-card" data-size="party" onclick="selectDogSize('party')" style="flex:1;min-width:90px">
            <div class="dog-size-count">20</div>
            <div class="dog-size-label">PARTY</div>
            <div class="dog-size-serves">Feeds 8-12</div>
            <div class="dog-size-price">$90</div>
            <div class="dog-pop-badge">BEST VALUE</div>
          </div>
        </div>

        <!-- What's on each dog -->
        <div style="background:var(--gray2);border-radius:10px;padding:14px;margin-top:12px">
          <div style="font-size:10px;color:var(--gray3);letter-spacing:1px;margin-bottom:8px">EVERY DOG COMES WITH</div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px">
            <div style="font-size:12px;color:var(--white)">Pork & Beef Jumbo Dog</div>
            <div style="font-size:12px;color:var(--white)">Toasted Buttered Bun</div>
            <div style="font-size:12px;color:var(--white)">Crispy Bacon</div>
            <div style="font-size:12px;color:var(--white)">Mixed Shredded Cheese</div>
            <div style="font-size:12px;color:var(--white)">Green Onions</div>
            <div style="font-size:12px;color:var(--white)">Your Choice of Sauce</div>
          </div>
        </div>

        <!-- Macros per dog -->
        <div style="display:flex;justify-content:space-around;background:var(--gray2);border-radius:10px;padding:12px 8px;margin-top:10px;text-align:center">
          <div>
            <div style="font-family:var(--font1);font-size:18px;color:#D4442A">~450</div>
            <div style="font-size:9px;color:var(--gray3);letter-spacing:1px">CAL</div>
          </div>
          <div style="width:1px;background:var(--gray1)"></div>
          <div>
            <div style="font-family:var(--font1);font-size:18px;color:#4CAF50">20g</div>
            <div style="font-size:9px;color:var(--gray3);letter-spacing:1px">PROTEIN</div>
          </div>
          <div style="width:1px;background:var(--gray1)"></div>
          <div>
            <div style="font-family:var(--font1);font-size:18px;color:var(--white)">26g</div>
            <div style="font-size:9px;color:var(--gray3);letter-spacing:1px">CARBS</div>
          </div>
          <div style="width:1px;background:var(--gray1)"></div>
          <div>
            <div style="font-family:var(--font1);font-size:18px;color:var(--white)">30g</div>
            <div style="font-size:9px;color:var(--gray3);letter-spacing:1px">FAT</div>
          </div>
        </div>
        <div style="text-align:center;font-size:9px;color:var(--gray3);margin-top:4px">Per dog</div>

        <!-- Sauce Selection -->
        <label style="font-size:11px;color:var(--gray3);display:block;margin:14px 0 4px;letter-spacing:1px">PICK YOUR SAUCE <span id="dogSauceCount" style="color:#E8A817">(1 per dog  choose <span id="dogSauceMax">10</span>)</span></label>
        <p style="font-size:10px;color:var(--gray3);margin-bottom:10px">Pick 1 sauce per dog below.</p>
        <div class="dog-sauces" style="display:flex;flex-direction:column;gap:8px">
          <div class="dog-sauce-row" data-sauce="spicymayo" style="display:flex;align-items:center;justify-content:space-between;background:var(--gray1);border:2px solid var(--gray2);border-radius:10px;padding:10px 14px;transition:all .2s">
            <span style="font-size:14px;color:var(--white);font-weight:500">Spicy Mayo</span>
            <div style="display:flex;align-items:center;gap:12px;flex-shrink:0">
              <button onclick="adjustSauce('spicymayo',-1)" style="width:32px;height:32px;border-radius:50%;border:1px solid var(--gray2);background:var(--gray2);color:var(--white);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center"></button>
              <span class="sauce-qty" id="sauceQty_spicymayo" style="font-family:var(--font1);font-size:18px;color:#D4442A;width:28px;text-align:center">0</span>
              <button onclick="adjustSauce('spicymayo',1)" style="width:32px;height:32px;border-radius:50%;border:none;background:#D4442A;color:#FFF;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700">+</button>
            </div>
          </div>
          <div class="dog-sauce-row" data-sauce="bbq" style="display:flex;align-items:center;justify-content:space-between;background:var(--gray1);border:2px solid var(--gray2);border-radius:10px;padding:10px 14px;transition:all .2s">
            <span style="font-size:14px;color:var(--white);font-weight:500">BBQ</span>
            <div style="display:flex;align-items:center;gap:12px;flex-shrink:0">
              <button onclick="adjustSauce('bbq',-1)" style="width:32px;height:32px;border-radius:50%;border:1px solid var(--gray2);background:var(--gray2);color:var(--white);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center"></button>
              <span class="sauce-qty" id="sauceQty_bbq" style="font-family:var(--font1);font-size:18px;color:#D4442A;width:28px;text-align:center">0</span>
              <button onclick="adjustSauce('bbq',1)" style="width:32px;height:32px;border-radius:50%;border:none;background:#D4442A;color:#FFF;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700">+</button>
            </div>
          </div>
          <div class="dog-sauce-row" data-sauce="mustard" style="display:flex;align-items:center;justify-content:space-between;background:var(--gray1);border:2px solid var(--gray2);border-radius:10px;padding:10px 14px;transition:all .2s">
            <span style="font-size:14px;color:var(--white);font-weight:500">Mustard</span>
            <div style="display:flex;align-items:center;gap:12px;flex-shrink:0">
              <button onclick="adjustSauce('mustard',-1)" style="width:32px;height:32px;border-radius:50%;border:1px solid var(--gray2);background:var(--gray2);color:var(--white);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center"></button>
              <span class="sauce-qty" id="sauceQty_mustard" style="font-family:var(--font1);font-size:18px;color:#D4442A;width:28px;text-align:center">0</span>
              <button onclick="adjustSauce('mustard',1)" style="width:32px;height:32px;border-radius:50%;border:none;background:#D4442A;color:#FFF;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700">+</button>
            </div>
          </div>
          <div class="dog-sauce-row" data-sauce="hotsauce" style="display:flex;align-items:center;justify-content:space-between;background:var(--gray1);border:2px solid var(--gray2);border-radius:10px;padding:10px 14px;transition:all .2s">
            <span style="font-size:14px;color:var(--white);font-weight:500">Hot Sauce</span>
            <div style="display:flex;align-items:center;gap:12px;flex-shrink:0">
              <button onclick="adjustSauce('hotsauce',-1)" style="width:32px;height:32px;border-radius:50%;border:1px solid var(--gray2);background:var(--gray2);color:var(--white);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center"></button>
              <span class="sauce-qty" id="sauceQty_hotsauce" style="font-family:var(--font1);font-size:18px;color:#D4442A;width:28px;text-align:center">0</span>
              <button onclick="adjustSauce('hotsauce',1)" style="width:32px;height:32px;border-radius:50%;border:none;background:#D4442A;color:#FFF;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700">+</button>
            </div>
          </div>
        </div>
        <div id="dogSauceRemaining" style="text-align:center;font-size:11px;color:var(--gray3);margin-top:8px"><span id="dogSauceLeft" style="color:#E8A817;font-weight:600">10</span> sauce picks remaining</div>

        <!-- Student Zone Warning -->
        <div id="studentZoneWarning" style="display:none;background:rgba(212,68,42,0.1);border:2px solid rgba(212,68,42,0.3);border-radius:10px;padding:12px;margin-top:12px">
          <div style="text-align:center;font-size:12px;color:#D4442A;font-weight:600;margin-bottom:10px">SFU SURREY ONLY</div>
          
          <div style="margin-bottom:10px">
            <div style="font-size:10px;color:var(--gray3);margin-bottom:6px;text-align:center">LUNCH 11AM-3PM</div>
            <div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center">
              <button onclick="selectTimeSlot(this,'11AM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">11AM</button>
              <button onclick="selectTimeSlot(this,'12PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">12PM</button>
              <button onclick="selectTimeSlot(this,'1PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">1PM</button>
              <button onclick="selectTimeSlot(this,'2PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">2PM</button>
              <button onclick="selectTimeSlot(this,'3PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">3PM</button>
            </div>
          </div>
          
          <div style="margin-bottom:10px">
            <div style="font-size:10px;color:var(--gray3);margin-bottom:6px;text-align:center">EVENING 6PM-11PM</div>
            <div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center">
              <button onclick="selectTimeSlot(this,'6PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">6PM</button>
              <button onclick="selectTimeSlot(this,'7PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">7PM</button>
              <button onclick="selectTimeSlot(this,'8PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">8PM</button>
              <button onclick="selectTimeSlot(this,'9PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">9PM</button>
              <button onclick="selectTimeSlot(this,'10PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">10PM</button>
              <button onclick="selectTimeSlot(this,'11PM')" class="time-slot-btn" style="padding:8px 14px;border-radius:6px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:11px;cursor:pointer">11PM</button>
            </div>
          </div>
          
          <div style="display:flex;gap:8px;margin-bottom:10px">
            <button onclick="selectDeliveryType('drop')" id="dropBtn" class="delivery-type-btn" style="flex:1;padding:10px;border-radius:8px;border:2px solid #D4442A;background:rgba(212,68,42,0.15);color:#D4442A;font-family:var(--font1);font-size:12px;cursor:pointer">DROP OFF</button>
            <button onclick="selectDeliveryType('meet')" id="meetBtn" class="delivery-type-btn" style="flex:1;padding:10px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:12px;cursor:pointer">MEET UP</button>
          </div>
          
          <input type="text" id="studentLocation" placeholder="Building, room, or meet spot (e.g. SRYE 2nd floor)" style="width:100%;padding:10px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:12px;outline:none;box-sizing:border-box">
          <div style="font-size:9px;color:var(--gray3);margin-top:6px;text-align:center">We'll text you when close</div>
        </div>

        <!-- Free 2L Drink Picker -->
        <div id="drinkPickerWrap" style="background:rgba(212,68,42,0.08);border:2px solid rgba(212,68,42,0.3);border-radius:12px;padding:14px;margin-top:12px">
          <div style="text-align:center;font-size:11px;color:#D4442A;letter-spacing:1px;font-weight:600;margin-bottom:10px">FREE 2L DRINK WITH 10 & 20 PACKS</div>
          <div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center" id="drinkPicker">
            <button onclick="pickDrink(this,'Pepsi')" class="drink-opt" style="padding:8px 14px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:12px;cursor:pointer;transition:all .2s">Pepsi</button>
            <button onclick="pickDrink(this,'Coke')" class="drink-opt" style="padding:8px 14px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:12px;cursor:pointer;transition:all .2s">Coke</button>
            <button onclick="pickDrink(this,'Sprite')" class="drink-opt" style="padding:8px 14px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:12px;cursor:pointer;transition:all .2s">Sprite</button>
            <button onclick="pickDrink(this,'Dr Pepper')" class="drink-opt" style="padding:8px 14px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:12px;cursor:pointer;transition:all .2s">Dr Pepper</button>
            <button onclick="pickDrink(this,'Cream Soda')" class="drink-opt" style="padding:8px 14px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:12px;cursor:pointer;transition:all .2s">Cream Soda</button>
          </div>
        </div>

        <!-- Summary -->
        <div class="box-summary" style="margin-top:16px">
          <div class="summary-row"><span>Hot Dogs</span><span id="dogSizeLabel">10 Pack Regular</span></div>
          <div class="summary-row"><span>Sauces</span><span id="dogSaucesLabel" style="color:#D4442A">Pick your sauces above</span></div>
          <div class="summary-row" id="dogDrinkRow"><span>2L Drink</span><span id="dogDrinkLabel" style="color:#D4442A">Pick above</span></div>
          <div class="summary-row" style="color:var(--gray3)"><span>Delivery</span><span style="color:var(--white)">Included</span></div>
          <div class="summary-row total"><span>Total</span><span id="dogTotal">$50.00</span></div>
        </div>

        <button class="dessert-cta" id="dogCta" onclick="addDogsToCart()">ADD TO CART   $50.00</button>
        <div class="order-now-link" id="dogOrderNowLink" onclick="orderDogs()">ORDER NOW</div>
      </div>
    </div>
    <!-- End DOGBOXX Section -->
  </div>
  <!-- End SNACKS SECTION -->

    <!-- Cookie Detail Modal -->
    <div class="cookie-modal-overlay" id="cookieModal" onclick="closeCookieModal()">
      <div class="cookie-modal" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeCookieModal()"></button>
        <div class="modal-emoji" id="modalEmoji"></div>
        <h3 class="modal-name" id="modalName">Cookie Name</h3>
        <div class="modal-price" id="modalPrice">$0.00</div>
        <p class="modal-desc" id="modalDesc">Description here</p>
        <div class="modal-tags" id="modalTags"></div>
        <div class="modal-controls">
          <button class="modal-btn minus" onclick="modalUpdateQty(-1)"></button>
          <div class="modal-qty" id="modalQty">0</div>
          <button class="modal-btn plus" onclick="modalUpdateQty(1)">+</button>
        </div>
        <button class="modal-add-btn" onclick="closeCookieModal()">DONE</button>
      </div>
    </div>

    <!-- Cart FAB -->
    <button class="cart-fab" id="cartFab" onclick="openCart()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
      <div class="cart-count" id="cartCount">0</div>
    </button>

    <!-- Cart Overlay -->
    <div class="cart-overlay" id="cartOverlay" onclick="closeCart()"></div>

    <!-- Cart Drawer -->
    <div class="cart-drawer" id="cartDrawer">
      <div class="cart-header">
        <h3><span></span> YOUR CART</h3>
        <button class="cart-close" onclick="closeCart()"></button>
      </div>
      <div class="cart-items" id="cartItems">
        <div class="cart-empty">
          <span></span>
          <p>Your cart is empty</p>
        </div>
      </div>
      <div class="cart-footer" id="cartFooter" style="display:none">
        <div class="cart-subtotal">
          <span>Subtotal</span>
          <span id="cartSubtotal">$0.00</span>
        </div>
        <div class="cart-delivery">
          <span>Delivery</span>
          <span style="color:#00D26A">Included</span>
        </div>
        <!-- Tip Section -->
        <div style="padding:10px 0;border-top:1px solid var(--gray2);margin-top:6px">
          <div style="font-size:11px;color:var(--gray3);margin-bottom:8px;letter-spacing:1px">ADD A TIP </div>
          <div style="display:flex;gap:8px">
            <button class="tip-btn" data-tip="0" onclick="setTip(0)" style="flex:1;padding:10px 0;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:13px;cursor:pointer;transition:all .2s">NONE</button>
            <button class="tip-btn" data-tip="3" onclick="setTip(3)" style="flex:1;padding:10px 0;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:13px;cursor:pointer;transition:all .2s">$3</button>
            <button class="tip-btn" data-tip="5" onclick="setTip(5)" style="flex:1;padding:10px 0;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:13px;cursor:pointer;transition:all .2s">$5</button>
            <button class="tip-btn" data-tip="10" onclick="setTip(10)" style="flex:1;padding:10px 0;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:13px;cursor:pointer;transition:all .2s">$10</button>
            <button class="tip-btn" data-tip="custom" onclick="setCustomTip()" style="flex:1;padding:10px 0;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:13px;cursor:pointer;transition:all .2s">Other</button>
          </div>
          <div id="customTipWrap" style="display:none;margin-top:8px">
            <input type="number" id="customTipInput" placeholder="Enter amount" min="0" oninput="updateCustomTip()" style="width:100%;padding:10px;border-radius:8px;border:2px solid var(--gray2);background:var(--gray1);color:var(--white);font-family:var(--font1);font-size:14px;outline:none;text-align:center">
          </div>
          <div id="tipDisplay" style="display:none;text-align:center;font-size:12px;color:#E8A817;margin-top:6px;font-weight:600"></div>
        </div>
        <div class="cart-total">
          <span>Total</span>
          <span id="cartTotal">$0.00</span>
        </div>
        <button class="cart-checkout" id="cartCheckout" onclick="checkoutCart()">CHECKOUT</button>
        <button class="cart-clear" onclick="clearCart()">Clear cart</button>
      </div>
    </div>

    <!-- Checkout Modal -->
    <div class="cart-overlay" id="checkoutOverlay" onclick="closeCheckout()"></div>
    <div class="cart-drawer" id="checkoutDrawer">
      <div class="cart-header">
        <h3><span></span> CHECKOUT</h3>
        <button class="cart-close" onclick="closeCheckout()"></button>
      </div>
      <div class="cart-items" id="checkoutForm" style="padding:20px">
        <div class="delivery-section" style="background:transparent;padding:0">
          <div class="form-row">
            <label>Your Name *</label>
            <input type="text" id="checkoutName" placeholder="Your full name">
          </div>
          <div class="form-row">
            <label>Phone Number *</label>
            <input type="tel" id="checkoutPhone" placeholder="For delivery updates">
          </div>
          <div class="form-row">
            <label>Delivery Address *</label>
            <input type="text" id="checkoutAddress" placeholder="Full delivery address">
          </div>
          <div class="form-row">
            <label>Delivery Date *</label>
            <div class="calendar-trigger" id="calendarTrigger" onclick="openCalendar('checkout')">
              <span id="checkoutDateDisplay">Select date</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            </div>
            <input type="hidden" id="checkoutDate">
          </div>
          <div class="form-row">
            <label>Delivery Notes (optional)</label>
            <input type="text" id="checkoutNotes" placeholder="Gate code, leave at door, etc.">
          </div>
        </div>
      </div>
      <div class="cart-footer">
        <div class="cart-total">
          <span>Total</span>
          <span id="checkoutTotal">$0.00</span>
        </div>
        <button class="cart-checkout" onclick="placeOrder()">PLACE ORDER</button>
      </div>
    </div>

    <div id="personalSection" style="display:none">
      <div class="products">
        <div class="product-card" onclick="quickOrder('carnivore')">
          <div class="product-header">
            <div class="product-name">CARNIVORE BOWL</div>
            <div class="product-price"><div class="from">From</div><div class="amount">$10.99</div></div>
          </div>
          <div class="product-desc">Loaded pasta bowl with crispy chicken, seasoned pork & crispy pancetta smothered in creamy alfredo. Three meats. Delivered hot & ready.</div>
          <div class="macro-ticker">
            <div class="macro-cards">
              <div class="macro-card"><div class="mc-val">70g</div><div class="mc-lbl">Protein</div></div>
              <div class="macro-card"><div class="mc-val">1000</div><div class="mc-lbl">Calories</div></div>
              <div class="macro-card"><div class="mc-val">80g</div><div class="mc-lbl">Carbs</div></div>
              <div class="macro-card"><div class="mc-val">45g</div><div class="mc-lbl">Fat</div></div>
              <div class="macro-card"><div class="mc-val">70g</div><div class="mc-lbl">Protein</div></div>
              <div class="macro-card"><div class="mc-val">1000</div><div class="mc-lbl">Calories</div></div>
              <div class="macro-card"><div class="mc-val">80g</div><div class="mc-lbl">Carbs</div></div>
              <div class="macro-card"><div class="mc-val">45g</div><div class="mc-lbl">Fat</div></div>
            </div>
          </div>
          <div class="order-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></div>
        </div>
      </div>
    </div>

    <div id="teamSection" class="team-section">
      <div class="team-header"><h2>TEAM ORDERS</h2><p>Bulk pricing for 10+ bowls</p></div>
      <div class="team-card">
        <div class="tier"><div class="tier-info"><strong>10-19 bowls</strong></div><div class="tier-price"><div class="price">$14.99</div><div class="tier-save">Save 25%</div></div></div>
        <div class="tier"><div class="tier-info"><strong>20-29 bowls</strong></div><div class="tier-price"><div class="price">$13.99</div><div class="tier-save">Save 30%</div></div></div>
        <div class="tier"><div class="tier-info"><strong>30+ bowls</strong></div><div class="tier-price"><div class="price">$12.99</div><div class="tier-save">Save 35%</div></div></div>
        <ul class="team-perks">
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Free delivery</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>70g protein per bowl</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>CARNIVORE BOWL - 3 meats</li>
        </ul>
        <button class="team-cta" onclick="startTeamOrder()">START TEAM ORDER</button>
      </div>
    </div>

    <div class="foot"><div class="fl">LUNCHBOXX</div><p><span class="local">Made in Surrey, BC</span></p></div>
  </div>

  <div id="order" class="page">
    <div class="hdr"><button class="back" onclick="goBack()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg></button><div class="hdr-logo">LUNCHBOXX</div><div style="width:26px"></div></div>
    <div class="free-ban">Delivery Included</div>
    <div class="steps"><div id="s1" class="step active">1</div><div id="l1" class="sline"></div><div id="s2" class="step">2</div><div id="l2" class="sline"></div><div id="s3" class="step">3</div><div id="l3" class="sline"></div><div id="s4" class="step">4</div></div>
    <div id="c1" class="content"><h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>CHOOSE SIZE</h2><p class="sub">Select your portion</p><div id="selectedBowl" class="selected-bowl"></div><div id="sizeSelector" class="size-selector"></div></div>
    <div id="c2" class="content hidden"><h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>DROP OFF TIME</h2><p class="sub">When do you want it?</p><div id="windows" class="opts"></div></div>
    <div id="c3" class="content hidden"><h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0116 0Z"/><circle cx="12" cy="10" r="3"/></svg>DROP OFF LOCATION</h2><p class="sub">Where should we meet you?</p><div id="locations" class="opts"></div><div id="customLoc" class="custom-loc" onclick="selectCustom()"><h4><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/></svg>CUSTOM LOCATION</h4><p>Your home or office</p><input type="text" id="customAddr" placeholder="Enter address" onclick="event.stopPropagation()"><div class="chk-row"><svg class="chk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div></div><div class="pfooter"><button id="btn4" class="contbtn off" onclick="next()" disabled>CONTINUE</button></div></div>
    <div id="c4" class="content hidden"><h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>REVIEW ORDER</h2><div class="summary"><div class="sum-prod"><div class="sum-img" id="rEmoji">LB</div><div class="sum-info"><h4 id="rName">-</h4><p id="rMacro">-</p></div><div id="rPrice" class="sum-price">-</div></div><div class="qty-row"><span>Quantity</span><div class="qty-ctrl"><button onclick="qty(-1)"></button><span id="qtyD">1</span><button onclick="qty(1)">+</button></div></div>
      <!-- Cookie Add-on -->
      <div class="cookie-addon-section">
        <div class="cookie-addon-header">
          <span></span>
          <div>
            <h4>ADD DESSERT?</h4>
            <p>Jumbo stuffed cookies</p>
          </div>
        </div>
        <div class="cookie-addon-opts">
          <div class="cookie-addon-opt" id="cookieOpt1" onclick="selectCookieAddon(1)">
            <div class="qty">1</div>
            <div class="price">$2.99</div>
            <div class="per">any flavor</div>
          </div>
          <div class="cookie-addon-opt" id="cookieOpt2" onclick="selectCookieAddon(2)">
            <div class="qty">2</div>
            <div class="price">$5.00</div>
            <div class="save">SAVE 17%</div>
          </div>
        </div>
        <div class="cookie-flavor-selector" id="cookieFlavorSelector" style="display:none">
          <p class="flavor-label">Choose your flavor<span id="flavorCount">(s)</span>:</p>
          <div class="flavor-chips" id="flavorChips"></div>
        </div>
      </div>
      <div class="del-sum"><div class="sum-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><div><span class="sum-lbl">Window</span><span id="rWin" class="sum-val">-</span></div><button class="edit-btn" onclick="goTo(2)">Edit</button></div><div class="sum-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0116 0Z"/><circle cx="12" cy="10" r="3"/></svg><div><span class="sum-lbl">Location</span><span id="rLoc" class="sum-val">-</span></div><button class="edit-btn" onclick="goTo(3)">Edit</button></div></div><div class="sum-item" id="cookieAddonSum" style="display:none"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:#D4A574"><circle cx="12" cy="12" r="10"/></svg><div><span class="sum-lbl">Cookies</span><span id="rCookies" class="sum-val" style="color:#D4A574">-</span></div><button class="edit-btn" style="color:#D4A574" onclick="selectCookieAddon(0)">Remove</button></div><div class="total-row"><span>Total</span><span id="rTotal" class="total-price">-</span></div></div><div class="pfooter"><button class="checkbtn" id="bowlOrderNowBtn" onclick="checkout()">ORDER NOW</button><div class="add-cart-link" id="bowlAddCartBtn" onclick="addCurrentBowlToCart()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>ADD TO CART</div></div></div>
  </div>

  <div id="teamOrder" class="page">
    <div class="hdr"><button class="back" onclick="goBackTeam()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg></button><div class="hdr-logo">LUNCHBOXX</div><div style="width:26px"></div></div>
    <div class="free-ban blue">TEAM ORDER  10+ BOWLS</div>
    <div class="steps"><div id="ts1" class="step active blue">1</div><div id="tl1" class="sline"></div><div id="ts2" class="step">2</div><div id="tl2" class="sline"></div><div id="ts3" class="step">3</div><div id="tl3" class="sline"></div><div id="ts4" class="step">4</div></div>
    <div id="tc1" class="content"><h2><svg class="blue" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/></svg>BUILD ORDER</h2><p class="sub">XL bowls  70g protein each</p>
      <div class="bowl-opt" style="margin-bottom:12px;cursor:default"><div style="display:flex;justify-content:space-between;align-items:center"><div><h4>CARNIVORE BOWL</h4><p>Crispy chicken, seasoned pork & pancetta in creamy alfredo</p></div><div class="qty-ctrl"><button onclick="teamQty('carnivore',-1)"></button><span id="tqCarnivore">0</span><button onclick="teamQty('carnivore',1)">+</button></div></div></div>
      <div style="background:var(--gray1);border-radius:12px;padding:16px;margin-top:16px"><div style="display:flex;justify-content:space-between;margin-bottom:12px"><span style="color:var(--gray3)">Total Bowls</span><span id="teamTotalBowls" style="font-family:var(--font1);font-size:28px">0</span></div><div style="display:flex;justify-content:space-between"><span style="color:var(--gray3)">Price/bowl</span><div style="text-align:right"><span id="teamPriceEach" style="font-family:var(--font1);font-size:28px;color:var(--yellow)">$14.99</span><div id="teamDiscount" style="font-size:12px;color:var(--green);font-weight:600"></div></div></div></div>
      <p id="teamMinNote" style="font-size:12px;color:var(--orange);text-align:center;margin-top:12px">Minimum 10 bowls required</p>
      <div class="pfooter"><button id="tbtn1" class="contbtn blue off" onclick="nextTeam()" disabled>CONTINUE</button></div>
    </div>
    <div id="tc2" class="content hidden"><h2><svg class="blue" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>DROP OFF TIME</h2><p class="sub">When do you want it?</p><div id="twindows" class="opts"></div></div>
    <div id="tc3" class="content hidden"><h2><svg class="blue" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0116 0Z"/><circle cx="12" cy="10" r="3"/></svg>DROP OFF LOCATION</h2><p class="sub">Where should we deliver?</p><div id="tlocations" class="opts"></div><div id="tcustomLoc" class="custom-loc" onclick="selectTeamCustom()"><h4><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:var(--blue)"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/></svg>CUSTOM</h4><p>Your office or site</p><input type="text" id="tcustomAddr" placeholder="Enter address" onclick="event.stopPropagation()"><div class="chk-row"><svg class="chk" style="color:var(--blue)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div></div><div class="pfooter"><button id="tbtn3" class="contbtn blue off" onclick="nextTeam()" disabled>CONTINUE</button></div></div>
    <div id="tc4" class="content hidden"><h2><svg class="blue" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>REVIEW ORDER</h2><div class="summary"><div class="sum-prod"><div class="sum-img" style="color:var(--blue)">LB</div><div class="sum-info"><h4 id="trName">-</h4><p>70g protein each</p></div><div id="trPrice" class="sum-price">-</div></div><div class="del-sum"><div class="sum-item"><svg style="color:var(--blue)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><div><span class="sum-lbl">Window</span><span id="trWin" class="sum-val">-</span></div><button class="edit-btn" style="color:var(--blue)" onclick="goToTeam(2)">Edit</button></div><div class="sum-item"><svg style="color:var(--blue)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0116 0Z"/><circle cx="12" cy="10" r="3"/></svg><div><span class="sum-lbl">Location</span><span id="trLoc" class="sum-val">-</span></div><button class="edit-btn" style="color:var(--blue)" onclick="goToTeam(3)">Edit</button></div></div><div class="discount-row"><span id="trDiscountLabel">Bulk Discount</span><span id="trDiscountAmt">-</span></div><div class="total-row"><span>Total</span><span id="trTotal" class="total-price">-</span></div></div><div class="pfooter"><button class="checkbtn blue" id="partyOrderNowBtn" onclick="checkoutTeam()">ORDER NOW</button><div class="add-cart-link" id="partyAddCartBtn" onclick="addPartyOrderToCart()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>ADD TO CART</div></div></div>
  </div>

  <div id="plan" class="page">
    <div class="hdr"><button class="back" onclick="goBackPlan()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg></button><div class="hdr-logo">LUNCHBOXX</div><div style="width:26px"></div></div>
    <div class="free-ban" style="background:var(--green)">30-DAY MEAL PLAN  SAVE $150</div>
    <div class="steps"><div id="ps1" class="step active green">1</div><div id="pl1" class="sline"></div><div id="ps2" class="step">2</div><div id="pl2" class="sline"></div><div id="ps3" class="step">3</div><div id="pl3" class="sline"></div><div id="ps4" class="step">4</div></div>
    <div id="pc1" class="content"><h2><svg class="green" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>30-DAY PLAN</h2><div class="plan-hero"><div class="big-price">$449.99</div><div class="per">per month</div><div class="save-badge">SAVE $150</div></div><div class="plan-features"><h4>WHAT YOU GET</h4><ul style="list-style:none;padding:0"><li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>1 XL bowl every day</li><li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>70g protein per bowl</li><li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Free delivery daily</li><li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Switch flavors anytime</li><li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Skip days if needed</li></ul></div><div class="plan-breakdown"><div class="daily">$14.99<span>/day</span></div><p>vs $19.99 single order</p></div><div class="pfooter"><button class="contbtn green" onclick="nextPlan()">START MY PLAN</button></div></div>
    <div id="pc2" class="content hidden"><h2><svg class="green" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>DEFAULT TIME</h2><p class="sub">When do you usually want it?</p><div id="pwindows" class="opts"></div></div>
    <div id="pc3" class="content hidden"><h2><svg class="green" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0116 0Z"/><circle cx="12" cy="10" r="3"/></svg>DEFAULT LOCATION</h2><p class="sub">Where should we deliver?</p><div id="plocations" class="opts"></div><div id="pcustomLoc" class="custom-loc" onclick="selectPlanCustom()"><h4><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:var(--green)"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/></svg>CUSTOM</h4><p>Your home or office</p><input type="text" id="pcustomAddr" placeholder="Enter address" onclick="event.stopPropagation()"><div class="chk-row"><svg class="chk" style="color:var(--green)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div></div><div class="pfooter"><button id="pbtn3" class="contbtn green off" onclick="nextPlan()" disabled>CONTINUE</button></div></div>
    <div id="pc4" class="content hidden"><h2><svg class="green" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>REVIEW PLAN</h2><div class="summary"><div class="sum-prod"><div class="sum-img" style="color:var(--green)">30D</div><div class="sum-info"><h4>30-Day Meal Plan</h4><p>1 XL bowl daily  70g protein</p></div><div class="sum-price">$449.99</div></div><div class="del-sum"><div class="sum-item"><svg style="color:var(--green)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><div><span class="sum-lbl">Default Time</span><span id="prWin" class="sum-val">-</span></div><button class="edit-btn" style="color:var(--green)" onclick="goToPlan(2)">Edit</button></div><div class="sum-item"><svg style="color:var(--green)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0116 0Z"/><circle cx="12" cy="10" r="3"/></svg><div><span class="sum-lbl">Default Location</span><span id="prLoc" class="sum-val">-</span></div><button class="edit-btn" style="color:var(--green)" onclick="goToPlan(3)">Edit</button></div></div><div class="discount-row"><span>You save vs single orders</span><span>$150.00</span></div><div class="total-row"><span>Monthly</span><span class="total-price">$449.99</span></div></div><div class="pfooter"><button class="checkbtn green" onclick="checkoutPlan()">START SUBSCRIPTION</button><p class="checknote">Cancel anytime  Unused days refunded</p></div></div>
  </div>

  <div id="confirm" class="page">
    <div class="conf-page"><div>
      <div class="conf-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div>
      <h1 id="confTitle">ORDER CONFIRMED</h1>
      <div class="order-number" id="orderNumber">#LB-0000</div>
      <p id="confSub">We'll deliver it hot and ready.</p>
      <div class="conf-card">
        <div class="conf-row"><span>Order</span><span id="cOrder">-</span></div>
        <div class="conf-row"><span>Window</span><span id="cWin">-</span></div>
        <div class="conf-row"><span>Location</span><span id="cLoc">-</span></div>
        <div class="conf-row"><span>Delivery</span><span style="color:#00D26A">Included</span></div>
        <div class="conf-row total"><span>Total</span><span id="cTotal">-</span></div>
      </div>
      <p class="conf-note"> You'll receive SMS updates</p>
      <button class="contbtn btn-bounce" onclick="reset()">ORDER AGAIN</button>
    </div></div>
  </div>
</div>
  </div><!-- end iphone-screen -->
  <div class="home-indicator"></div>
</div><!-- end iphone-frame -->

<script>
const BOWLS=[{id:'carnivore',name:'CARNIVORE BOWL',desc:'Loaded pasta bowl with crispy chicken, seasoned pork & crispy pancetta smothered in creamy alfredo. Delivered hot & ready.',macros:{reg:{cal:550,protein:35,carbs:45,fat:25},xl:{cal:1000,protein:70,carbs:80,fat:45}}}];
const SIZES=[{id:'reg',name:'Regular',price:10.99},{id:'xl',name:'XL',price:19.99}];
const XL_PRICE=14.99;
const TEAM_PRICING=[{min:30,price:12.99,save:'35%'},{min:20,price:13.99,save:'30%'},{min:10,price:14.99,save:'25%'}];
const W=[{id:1,label:'11am  1pm',time:'Lunch delivery'},{id:2,label:'5pm  7pm',time:'Dinner delivery'}];
const L=[{id:1,name:'SFU SURREY',addr:'Central City',icon:'SFU'},{id:2,name:'CENTRAL CITY TOWER',addr:'Office Lobby',icon:'TWR'},{id:3,name:'KING GEORGE STN',addr:'SkyTrain',icon:'KG'},{id:4,name:'GATEWAY STN',addr:'SkyTrain',icon:'GATE'}];

let step=1,bowlType=null,size=null,win=null,loc=null,q=1,customSelected=false;
let tStep=1,tCarnivore=0,tWin=null,tLoc=null,tCustomSelected=false;
let pStep=1,pWin=null,pLoc=null,pCustomSelected=false;

function toggleMenu(t){
  document.getElementById('toggleSnacks').classList.remove('snacks-active');
  document.getElementById('toggleDessert').classList.remove('dessert-active');
  var personalEl = document.getElementById('personalSection');
  if(personalEl) personalEl.style.display='none';
  document.getElementById('dessertSection').classList.remove('show');
  document.getElementById('snacksSection').classList.remove('show');
  var teamEl = document.getElementById('teamSection');
  if(teamEl) teamEl.classList.remove('show');
  
  if(t==='personal'){
    if(personalEl) { var btn = document.getElementById('togglePersonal'); if(btn) btn.classList.add('active'); personalEl.style.display='block'; }
  }else if(t==='dessert'){
    document.getElementById('toggleDessert').classList.add('dessert-active');
    document.getElementById('dessertSection').classList.add('show');
    backToDessertMenu();
  }else if(t==='snacks'){
    document.getElementById('toggleSnacks').classList.add('snacks-active');
    document.getElementById('snacksSection').classList.add('show');
  }else if(t==='team'){
    if(teamEl) { var btn2 = document.getElementById('toggleTeam'); if(btn2) btn2.classList.add('team-active'); teamEl.classList.add('show'); }
  }
}

// Dessert navigation
function openDessertType(type) {
  document.getElementById('dessertMenu').style.display = 'none';
  document.getElementById('cookieboxxSection').classList.remove('show');
  document.getElementById('brownieboxxSection').classList.remove('show');
  
  if (type === 'cookie') {
    document.getElementById('cookieboxxSection').classList.add('show');
    initCookieGrid();
  } else if (type === 'brownie') {
    document.getElementById('brownieboxxSection').classList.add('show');
    initBrownieGrid();
  }
}

// ==================== ORDER MODE TOGGLE ====================
function setCookieMode(mode) {
  const availBtn = document.getElementById('cookieAvailBtn');
  const preorderBtn = document.getElementById('cookiePreorderBtn');
  const availSection = document.getElementById('cookieAvailSection');
  const preorderSection = document.getElementById('cookiePreorderSection');
  
  // Clear pack selections when switching modes
  document.querySelectorAll('#quickPacksAvail .quick-pack').forEach(el => el.classList.remove('selected'));
  selectedPackId = null;
  cookieCart = {};
  initCookieGrid();
  updateCookieSummary();
  
  if (mode === 'available') {
    availBtn.classList.add('active');
    preorderBtn.classList.remove('active');
    availSection.style.display = 'block';
    preorderSection.style.display = 'none';
  } else {
    availBtn.classList.remove('active');
    preorderBtn.classList.add('active');
    availSection.style.display = 'none';
    preorderSection.style.display = 'block';
  }
}

function setBrownieMode(mode) {
  const availBtn = document.getElementById('brownieAvailBtn');
  const preorderBtn = document.getElementById('browniePreorderBtn');
  const availSection = document.getElementById('brownieAvailSection');
  const preorderSection = document.getElementById('browniePreorderSection');
  
  // Clear pack selections when switching modes
  document.querySelectorAll('#browniePacksAvail .quick-pack').forEach(el => el.classList.remove('selected'));
  selectedBrowniePackId = null;
  brownieCart = {};
  initBrownieGrid();
  updateBrownieSummary();
  
  if (mode === 'available') {
    availBtn.classList.add('active');
    preorderBtn.classList.remove('active');
    availSection.style.display = 'block';
    preorderSection.style.display = 'none';
  } else {
    availBtn.classList.remove('active');
    preorderBtn.classList.add('active');
    availSection.style.display = 'none';
    preorderSection.style.display = 'block';
  }
}

// Available Now - Quick Buy
function addAvailCookieToCart(packType) {
  let name, price, qty;
  if (packType === 'mixed5') { name = "COOKIEBOXX Mixed 5 Pack"; price = 20; qty = 5; }
  else if (packType === 'mixed10') { name = "COOKIEBOXX Mixed 10 Pack"; price = 40; qty = 10; }
  else return;
  
  addToCart({
    type: 'cookies',
    name: name,
    details: "Baker's choice  Ready today",
    price: price,
    qty: qty,
    flavors: {},
    availableNow: true
  });
  
  showToast('Added to cart!', 'success', 1500);
}

function addAvailBrownieToCart(packType) {
  let name, price, qty;
  if (packType === 'mixed6') { name = "BROWNIEBOXX Mixed 6 Pack"; price = 30; qty = 6; }
  else if (packType === 'mixed12') { name = "BROWNIEBOXX Mixed 12 Pack"; price = 60; qty = 12; }
  else return;
  
  addToCart({
    type: 'brownies',
    name: name,
    details: "Baker's choice  Ready today",
    price: price,
    qty: qty,
    flavors: {},
    availableNow: true
  });
  
  showToast('Added to cart!', 'success', 1500);
}

function backToDessertMenu() {
  document.getElementById('dessertMenu').style.display = 'block';
  document.getElementById('cookieboxxSection').classList.remove('show');
  document.getElementById('brownieboxxSection').classList.remove('show');
}

function renderBowlSelect(){const el=document.getElementById('bowlSelect');if(el)el.innerHTML=BOWLS.map(b=>`<div class="bowl-opt" onclick="selBowl('${b.id}')"><div style="display:flex;align-items:center;gap:14px"><div style="width:50px;height:50px;background:linear-gradient(135deg,var(--orange),#cc3d00);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px"></div><div><h4>${b.name}</h4><p>${b.desc}</p></div></div></div>`).join('');}
function renderW(){const el=document.getElementById('windows');if(el)el.innerHTML=W.map(w=>`<button class="opt" onclick="selW(${w.id})"><div class="opt-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><div class="opt-info"><div class="opt-label">${w.label}</div><div class="opt-detail">${w.time}</div></div><svg class="chk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></button>`).join('');}
function renderL(){const el=document.getElementById('locations');if(el)el.innerHTML=L.map(l=>`<button class="opt" onclick="selL(${l.id})" id="l${l.id}"><div class="opt-icon">${l.icon}</div><div class="opt-info"><div class="opt-label">${l.name}</div><div class="opt-detail">${l.addr}</div></div><svg class="chk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></button>`).join('');}
function renderTeamW(){document.getElementById('twindows').innerHTML=W.map(w=>`<button class="opt blue" onclick="selTeamW(${w.id})"><div class="opt-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><div class="opt-info"><div class="opt-label">${w.label}</div><div class="opt-detail">${w.time}</div></div><svg class="chk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></button>`).join('');}
function renderTeamL(){document.getElementById('tlocations').innerHTML=L.map(l=>`<button class="opt blue" onclick="selTeamL(${l.id})" id="tl${l.id}"><div class="opt-icon">${l.icon}</div><div class="opt-info"><div class="opt-label">${l.name}</div><div class="opt-detail">${l.addr}</div></div><svg class="chk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></button>`).join('');}
function renderPlanW(){document.getElementById('pwindows').innerHTML=W.map(w=>`<button class="opt green" onclick="selPlanW(${w.id})"><div class="opt-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><div class="opt-info"><div class="opt-label">${w.label}</div><div class="opt-detail">${w.time}</div></div><svg class="chk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></button>`).join('');}
function renderPlanL(){document.getElementById('plocations').innerHTML=L.map(l=>`<button class="opt green" onclick="selPlanL(${l.id})" id="pl${l.id}"><div class="opt-icon">${l.icon}</div><div class="opt-info"><div class="opt-label">${l.name}</div><div class="opt-detail">${l.addr}</div></div><svg class="chk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></button>`).join('');}

function quickOrder(id){bowlType=BOWLS.find(b=>b.id===id);step=1;showPage('order');updSteps();showC();updSelectedBowl();renderSizeSelector();}
function selBowl(id){bowlType=BOWLS.find(b=>b.id===id);step=1;updSteps();showC();updSelectedBowl();renderSizeSelector();}
function updSelectedBowl(){if(bowlType)document.getElementById('selectedBowl').innerHTML=`<div style="padding:12px;background:var(--gray1);border-radius:12px;margin-bottom:16px;border-left:3px solid var(--orange)"><h4 style="color:var(--orange);margin-bottom:4px">${bowlType.name}</h4><p style="color:var(--gray3);font-size:13px">${bowlType.desc}</p></div>`;}
function renderSizeSelector(){if(!bowlType)return;const m=bowlType.macros;document.getElementById('sizeSelector').innerHTML=`<div class="size-opt" onclick="selSize('reg')"><div class="size-header"><h5>REGULAR</h5><div class="price">$10.99</div></div><div class="size-desc">Perfect for a satisfying meal</div><div class="macro-grid"><div class="macro-box"><div class="val">${m.reg.protein}g</div><div class="lbl">Protein</div></div><div class="macro-box"><div class="val">${m.reg.cal}</div><div class="lbl">Calories</div></div><div class="macro-box"><div class="val">${m.reg.carbs}g</div><div class="lbl">Carbs</div></div><div class="macro-box"><div class="val">${m.reg.fat}g</div><div class="lbl">Fat</div></div></div></div><div class="size-opt" onclick="selSize('xl')"><div class="size-header"><h5>XL</h5><div class="price">$19.99</div></div><div class="size-desc">Double everything. Maximum gains.</div><div class="macro-grid"><div class="macro-box"><div class="val">${m.xl.protein}g</div><div class="lbl">Protein</div></div><div class="macro-box"><div class="val">${m.xl.cal}</div><div class="lbl">Calories</div></div><div class="macro-box"><div class="val">${m.xl.carbs}g</div><div class="lbl">Carbs</div></div><div class="macro-box"><div class="val">${m.xl.fat}g</div><div class="lbl">Fat</div></div></div></div>`;}
function selSize(id){size=SIZES.find(s=>s.id===id);step=2;updSteps();showC();}
function selW(id){win=W.find(w=>w.id===id);step=3;updSteps();showC();}
function selL(id){loc=L.find(l=>l.id===id);customSelected=false;document.querySelectorAll('#locations .opt').forEach(c=>c.classList.remove('sel'));document.getElementById('customLoc').classList.remove('sel');document.getElementById('l'+id).classList.add('sel');step=4;updSteps();showC();updReview();}
function selectCustom(){loc={id:0,name:'CUSTOM'};customSelected=true;document.querySelectorAll('#locations .opt').forEach(c=>c.classList.remove('sel'));document.getElementById('customLoc').classList.add('sel');en('btn4');}
function en(id){const b=document.getElementById(id);if(b){b.classList.remove('off');b.disabled=false;}}

function showPage(id,s){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(id).classList.add('active');if(s&&id==='order'){step=s;updSteps();showC();}if(s&&id==='teamOrder'){tStep=s;updTeamSteps();showTeamC();}if(s&&id==='plan'){pStep=s;updPlanSteps();showPlanC();}}
function goBack(){if(step>1){step--;updSteps();showC();}else showPage('landing');}
function next(){if(step<4){step++;updSteps();showC();if(step===4)updReview();}}
function goTo(s){step=s;updSteps();showC();}
function updSteps(){for(let i=1;i<=4;i++){const s=document.getElementById('s'+i),l=document.getElementById('l'+i);if(s){s.classList.remove('active','done');s.textContent=i;if(i<step){s.classList.add('done');s.textContent='';if(l)l.classList.add('done');}else if(i===step)s.classList.add('active');if(l&&i>=step)l.classList.remove('done');}}}
function showC(){for(let i=1;i<=4;i++){const el=document.getElementById('c'+i);if(el)el.classList.add('hidden');}document.getElementById('c'+step).classList.remove('hidden');}
function qty(d){q=Math.max(1,Math.min(9,q+d));document.getElementById('qtyD').textContent=q;updTotal();}
function updTotal(){if(size){const cookiePrice = typeof getCookieAddonPrice === 'function' ? getCookieAddonPrice() : 0;document.getElementById('rTotal').textContent='$'+((size.price*q)+cookiePrice).toFixed(2);}}
function updReview(){if(bowlType&&size){const m=bowlType.macros[size.id];document.getElementById('rEmoji').textContent='LB';document.getElementById('rName').textContent=bowlType.name+' ('+size.name+')'+(q>1?' x'+q:'');document.getElementById('rMacro').textContent=m.protein+'g protein  '+m.cal+' cal';document.getElementById('rPrice').textContent='$'+size.price.toFixed(2);}document.getElementById('rWin').textContent=win?win.time:'-';document.getElementById('rLoc').textContent=customSelected?(document.getElementById('customAddr').value||'Custom'):(loc?loc.name:'-');updTotal();}
// Shopify Variant IDs
const SHOPIFY_VARIANTS = {
  'carnivore-reg': '47048198324378',
  'carnivore-xl': '47048199897242'
};
const SHOPIFY_COOKIE_PACKS = {
  20: '47048673525914',
  30: '47048673689754',
  50: '47048673984666',
  100: '47048674607258'
};
const SHOPIFY_BROWNIE_PACKS = {
  12: '47048684634266',
  24: '47048690172058',
  48: '47048690335898'
};
const SHOPIFY_DOG_PACKS = {
  'student': '47080319811738',
  'regular': '47078075728026',
  'party': '47078075793562'
};
const SHOPIFY_STORE = 'meesge-h5.myshopify.com';

function checkout(){
  // Get the variant ID based on bowl type and size
  const variantKey = 'carnivore-' + size.id;
  const variantId = SHOPIFY_VARIANTS[variantKey];
  
  // Redirect to Shopify checkout using permalink
  if (variantId) {
    window.location.href = 'https://' + SHOPIFY_STORE + '/cart/' + variantId + ':' + q;
    return;
  }
  
  // Fallback: show confirmation page
  const cookiePrice = typeof getCookieAddonPrice === 'function' ? getCookieAddonPrice() : 0;
  const total = (size.price * q) + cookiePrice;
  let orderText = (bowlType ? bowlType.name : '') + ' (' + size.name + ')' + (q > 1 ? ' x' + q : '');
  if (mealCookieAddon > 0) orderText += ' + ' + mealCookieAddon + ' Cookie' + (mealCookieAddon > 1 ? 's' : '');
  
  document.getElementById('confTitle').textContent = 'ORDER CONFIRMED';
  document.getElementById('confSub').textContent = "We'll deliver it hot and ready.";
  document.getElementById('cOrder').textContent = orderText;
  document.getElementById('cWin').textContent = win ? win.time : '-';
  document.getElementById('cLoc').textContent = customSelected ? (document.getElementById('customAddr').value || 'Custom') : (loc ? loc.name : '-');
  document.getElementById('cTotal').textContent = '$' + total.toFixed(2);
  showPage('confirm');
}

function startTeamOrder(){tStep=1;showPage('teamOrder',1);}
function teamQty(t,d){tCarnivore=Math.max(0,tCarnivore+d);document.getElementById('tqCarnivore').textContent=tCarnivore;updateTeamPricing();}
function getTeamPrice(total){for(let t of TEAM_PRICING)if(total>=t.min)return t;return{min:0,price:XL_PRICE,save:null};}
function updateTeamPricing(){const total=tCarnivore,tier=getTeamPrice(total);document.getElementById('teamTotalBowls').textContent=total;document.getElementById('teamPriceEach').textContent='$'+tier.price.toFixed(2);document.getElementById('teamDiscount').textContent=tier.save?'Save '+tier.save:'';document.getElementById('teamMinNote').style.display=total>=10?'none':'block';const btn=document.getElementById('tbtn1');if(total>=10){btn.classList.remove('off');btn.disabled=false;}else{btn.classList.add('off');btn.disabled=true;}}
function selTeamW(id){tWin=W.find(w=>w.id===id);tStep=3;updTeamSteps();showTeamC();}
function selTeamL(id){tLoc=L.find(l=>l.id===id);tCustomSelected=false;document.querySelectorAll('#tlocations .opt').forEach(c=>c.classList.remove('sel'));document.getElementById('tcustomLoc').classList.remove('sel');document.getElementById('tl'+id).classList.add('sel');tStep=4;updTeamSteps();showTeamC();updTeamReview();}
function selectTeamCustom(){tLoc={id:0,name:'CUSTOM'};tCustomSelected=true;document.querySelectorAll('#tlocations .opt').forEach(c=>c.classList.remove('sel'));document.getElementById('tcustomLoc').classList.add('sel');en('tbtn3');}
function goBackTeam(){if(tStep>1){tStep--;updTeamSteps();showTeamC();}else showPage('landing');}
function nextTeam(){if(tStep<4){tStep++;updTeamSteps();showTeamC();if(tStep===4)updTeamReview();}}
function goToTeam(s){tStep=s;updTeamSteps();showTeamC();}
function updTeamSteps(){for(let i=1;i<=4;i++){const s=document.getElementById('ts'+i),l=document.getElementById('tl'+i);s.classList.remove('active','done','blue');s.textContent=i;if(i<tStep){s.classList.add('done');s.textContent='';if(l)l.classList.add('done');}else if(i===tStep)s.classList.add('active','blue');if(l&&i>=tStep)l.classList.remove('done');}}
function showTeamC(){for(let i=1;i<=4;i++)document.getElementById('tc'+i).classList.add('hidden');document.getElementById('tc'+tStep).classList.remove('hidden');}
function updTeamReview(){const total=tCarnivore,tier=getTeamPrice(total);document.getElementById('trName').textContent=total+' CARNIVORE BOWL'+(total>1?'S':'');document.getElementById('trPrice').textContent='$'+tier.price.toFixed(2)+'/ea';document.getElementById('trWin').textContent=tWin?tWin.time:'-';document.getElementById('trLoc').textContent=tCustomSelected?(document.getElementById('tcustomAddr').value||'Custom'):(tLoc?tLoc.name:'-');const f=total*XL_PRICE,d=total*tier.price,sv=f-d;document.getElementById('trDiscountLabel').textContent=total+' bowls @ $'+tier.price.toFixed(2);document.getElementById('trDiscountAmt').textContent='-$'+sv.toFixed(2);document.getElementById('trTotal').textContent='$'+d.toFixed(2);}
function checkoutTeam(){const total=tCarnivore,tier=getTeamPrice(total);document.getElementById('confTitle').textContent='TEAM ORDER CONFIRMED';document.getElementById('confSub').textContent="We'll deliver to your team.";document.getElementById('cOrder').textContent=total+' CARNIVORE BOWL'+(total>1?'S':'');document.getElementById('cWin').textContent=tWin?tWin.time:'-';document.getElementById('cLoc').textContent=tCustomSelected?(document.getElementById('tcustomAddr').value||'Custom'):(tLoc?tLoc.name:'-');document.getElementById('cTotal').textContent='$'+(total*tier.price).toFixed(2);showPage('confirm');}

function goBackPlan(){if(pStep>1){pStep--;updPlanSteps();showPlanC();}else showPage('landing');}
function nextPlan(){if(pStep<4){pStep++;updPlanSteps();showPlanC();if(pStep===4)updPlanReview();}}
function goToPlan(s){pStep=s;updPlanSteps();showPlanC();}
function updPlanSteps(){for(let i=1;i<=4;i++){const s=document.getElementById('ps'+i),l=document.getElementById('pl'+i);s.classList.remove('active','done','green');s.textContent=i;if(i<pStep){s.classList.add('done');s.textContent='';if(l)l.classList.add('done');}else if(i===pStep)s.classList.add('active','green');if(l&&i>=pStep)l.classList.remove('done');}}
function showPlanC(){for(let i=1;i<=4;i++)document.getElementById('pc'+i).classList.add('hidden');document.getElementById('pc'+pStep).classList.remove('hidden');}
function selPlanW(id){pWin=W.find(w=>w.id===id);pStep=3;updPlanSteps();showPlanC();}
function selPlanL(id){pLoc=L.find(l=>l.id===id);pCustomSelected=false;document.querySelectorAll('#plocations .opt').forEach(c=>c.classList.remove('sel'));document.getElementById('pcustomLoc').classList.remove('sel');document.getElementById('pl'+id).classList.add('sel');pStep=4;updPlanSteps();showPlanC();updPlanReview();}
function selectPlanCustom(){pLoc={id:0,name:'CUSTOM'};pCustomSelected=true;document.querySelectorAll('#plocations .opt').forEach(c=>c.classList.remove('sel'));document.getElementById('pcustomLoc').classList.add('sel');en('pbtn3');}
function updPlanReview(){document.getElementById('prWin').textContent=pWin?pWin.time:'-';document.getElementById('prLoc').textContent=pCustomSelected?(document.getElementById('pcustomAddr').value||'Custom'):(pLoc?pLoc.name:'-');}
function checkoutPlan(){document.getElementById('confTitle').textContent='PLAN ACTIVATED';document.getElementById('confSub').textContent="Your daily bowls start tomorrow!";document.getElementById('cOrder').textContent='30-Day Meal Plan';document.getElementById('cWin').textContent=pWin?pWin.time:'-';document.getElementById('cLoc').textContent=pCustomSelected?(document.getElementById('pcustomAddr').value||'Custom'):(pLoc?pLoc.name:'-');document.getElementById('cTotal').textContent='$449.99/mo';showPage('confirm');}

function reset(){bowlType=size=win=loc=null;q=1;step=1;customSelected=false;tCarnivore=0;tWin=tLoc=null;tStep=1;tCustomSelected=false;pWin=pLoc=null;pStep=1;pCustomSelected=false;mealCookieAddon=0;document.querySelectorAll('.bowl-opt,.opt,.custom-loc,.size-opt').forEach(c=>c.classList.remove('sel'));document.getElementById('cookieOpt1')?.classList.remove('selected');document.getElementById('cookieOpt2')?.classList.remove('selected');document.getElementById('cookieAddonSum').style.display='none';['btn4','tbtn1','tbtn3','pbtn3'].forEach(id=>{const b=document.getElementById(id);if(b){b.classList.add('off');b.disabled=true;}});document.getElementById('qtyD').textContent='1';document.getElementById('tqCarnivore').textContent='0';['customAddr','tcustomAddr','pcustomAddr'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});updateTeamPricing();resetCookies();toggleMenu('snacks');showPage('landing');}

// Cookie Builder System
const COOKIES = [
  {id: 'lemon', name: 'Lemon White Chocolate', price: 3.17,
   desc: 'Bright, zesty lemon cookie studded with creamy white chocolate chips. A perfect balance of citrus tang and sweet indulgence.',
   tags: ['Citrus', 'White Choc']},
  {id: 'redvelvet', name: 'Red Velvet', price: 3.17,
   desc: 'Classic red velvet with a hint of cocoa, finished with cream cheese frosting drizzle. Rich, velvety, and irresistible.',
   tags: ['Fan Favorite', 'Cream Cheese']},
  {id: 'cookiescream', name: 'Cookies N Cream', price: 3.33,
   desc: 'Loaded with crushed Oreo pieces throughout a vanilla bean base. Cookies inside a cookie - what more could you want?',
   tags: ['Classic', 'Oreo']},
  {id: 'smores', name: "S'mores", price: 3.33,
   desc: 'Graham cracker base with gooey marshmallow and rich chocolate chunks. Tastes like a campfire in cookie form.',
   tags: ['Campfire', 'Marshmallow']},
  {id: 'caramel', name: 'Salted Caramel', price: 3.50,
   desc: 'Buttery caramel swirled throughout with flaky sea salt on top. The sweet-salty combo that hits different.',
   tags: ['Sweet & Salty', 'Popular']},
  {id: 'matcha', name: 'Matcha', price: 3.83,
   desc: 'Premium Japanese matcha green tea powder folded into white chocolate. Earthy, sophisticated, Instagram-worthy.',
   tags: ['Premium', 'Japanese']},
  {id: 'espresso', name: 'Espresso Double Choc', price: 3.83,
   desc: 'Real espresso baked into a double chocolate base. Coffee lovers, this is your wake-up call in cookie form.',
   tags: ['Coffee', 'Double Choc']},
  {id: 'ferrero', name: 'Ferrero Choc Chip', price: 3.83,
   desc: 'Inspired by Ferrero Rocher - hazelnut butter swirled with milk chocolate chips. Fancy, crunchy, decadent.',
   tags: ['Hazelnut', 'Luxe']},
  {id: 'nutella', name: 'Nutella', price: 3.83,
   desc: 'Stuffed with a gooey Nutella center that oozes when warm. Our best seller for a reason. Trust us on this one.',
   tags: ['Best Seller', 'Stuffed']},
];

function getCookieVisual(id, isModal = false) {
  const cls = isModal ? 'cookie-visual modal-cookie-visual' : 'cookie-visual';
  const visuals = {
    lemon: `<div class="${cls} cookie-lemon"><div class="chips"></div><div class="extra"></div></div>`,
    redvelvet: `<div class="${cls} cookie-redvelvet"><div class="drizzle"></div></div>`,
    cookiescream: `<div class="${cls} cookie-cookiescream"><div class="chunks"></div><div class="extra1"></div><div class="extra2"></div></div>`,
    smores: `<div class="${cls} cookie-smores"><div class="toppings"></div><div class="marsh"></div><div class="choc"></div><div class="choc2"></div></div>`,
    caramel: `<div class="${cls} cookie-caramel"><div class="swirl"></div><div class="salt"></div><div class="salt2"></div><div class="salt3"></div></div>`,
    matcha: `<div class="${cls} cookie-matcha"><div class="chips"></div><div class="extra"></div></div>`,
    espresso: `<div class="${cls} cookie-espresso"><div class="chips"></div><div class="bean"></div></div>`,
    ferrero: `<div class="${cls} cookie-ferrero"><div class="chips"></div><div class="nut"></div></div>`,
    nutella: `<div class="${cls} cookie-nutella"><div class="filling"></div><div class="swirl"></div></div>`
  };
  return visuals[id] || `<div class="${cls}"></div>`;
}

let cookieCart = {};
let creamCheese = false;
let currentCookie = null;

function initCookieGrid() {
  const grid = document.getElementById('cookieGrid');
  if (!grid) return;
  
  grid.innerHTML = COOKIES.map(c => `
    <div class="cookie-card ${cookieCart[c.id] > 0 ? 'has-qty' : ''}" onclick="openCookieModal('${c.id}')">
      ${getCookieVisual(c.id)}
      <span class="name">${c.name}</span>
      <span class="price">$${c.price.toFixed(2)}</span>
      <div class="qty-badge" id="badge-${c.id}">${cookieCart[c.id] || 0}</div>
    </div>
  `).join('');
  
  updateBoxVisual();
}

function openCookieModal(id) {
  currentCookie = COOKIES.find(c => c.id === id);
  if (!currentCookie) return;
  
  // Reset brownie editing flag
  window.editingBrownie = false;
  window.currentBrownieId = null;
  
  document.getElementById('modalEmoji').innerHTML = getCookieVisual(id, true);
  document.getElementById('modalName').textContent = currentCookie.name;
  document.getElementById('modalPrice').textContent = '$' + currentCookie.price.toFixed(2) + ' each';
  document.getElementById('modalDesc').textContent = currentCookie.desc;
  document.getElementById('modalQty').textContent = cookieCart[id] || 0;
  
  // Render tags
  document.getElementById('modalTags').innerHTML = currentCookie.tags.map((tag, i) => 
    `<span class="modal-tag ${i === 0 ? 'highlight' : ''}">${tag}</span>`
  ).join('');
  
  document.getElementById('cookieModal').classList.add('show');
}

function closeCookieModal() {
  document.getElementById('cookieModal').classList.remove('show');
  currentCookie = null;
  window.editingBrownie = false;
  window.currentBrownieId = null;
}

function modalUpdateQty(delta) {
  // Check if editing brownie
  if (window.editingBrownie && window.currentBrownieId) {
    const id = window.currentBrownieId;
    if (!brownieCart[id]) brownieCart[id] = 0;
    brownieCart[id] = Math.max(0, brownieCart[id] + delta);
    
    document.getElementById('modalQty').textContent = brownieCart[id];
    
    if (delta > 0) {
      const box = document.getElementById('brownieBox');
      if (box) {
        box.classList.add('shake');
        setTimeout(() => box.classList.remove('shake'), 400);
      }
    }
    
    initBrownieGrid();
    updateBrownieSummary();
    return;
  }
  
  // Cookie editing
  if (!currentCookie) return;
  
  const id = currentCookie.id;
  if (!cookieCart[id]) cookieCart[id] = 0;
  cookieCart[id] = Math.max(0, cookieCart[id] + delta);
  
  document.getElementById('modalQty').textContent = cookieCart[id];
  
  // Animate cookie to box when adding
  if (delta > 0) {
    const box = document.getElementById('cookieBox');
    box.classList.add('shake');
    setTimeout(() => box.classList.remove('shake'), 400);
  }
  
  // Update card in grid
  const card = document.querySelector(`[onclick="openCookieModal('${id}')"]`);
  if (card) {
    card.classList.toggle('has-qty', cookieCart[id] > 0);
  }
  const badge = document.getElementById('badge-' + id);
  if (badge) badge.textContent = cookieCart[id];
  
  updateBoxVisual();
  updateCookieSummary();
}

function updateBoxVisual() {
  const boxInner = document.getElementById('boxInner');
  const boxCount = document.getElementById('boxCount');
  const boxLid = document.getElementById('boxLid');
  const clearBtn = document.getElementById('clearBoxBtn');
  
  if (!boxInner) return;
  
  let totalQty = 0;
  let cookieItems = [];
  
  COOKIES.forEach(c => {
    const qty = cookieCart[c.id] || 0;
    totalQty += qty;
    for (let i = 0; i < Math.min(qty, 3); i++) {
      cookieItems.push(c.id);
    }
  });
  
  const displayCookies = cookieItems.slice(0, 12);
  
  boxInner.innerHTML = displayCookies.map((id, i) => 
    `<span class="box-cookie" style="animation-delay:${i * 0.02}s">${getMiniCookieVisual(id)}</span>`
  ).join('');
  
  boxCount.textContent = totalQty + ' cookie' + (totalQty !== 1 ? 's' : '');
  boxLid.classList.toggle('open', totalQty === 0);
  
  // Show/hide clear button
  if (clearBtn) {
    clearBtn.style.display = totalQty > 0 ? 'inline-block' : 'none';
  }
}

function clearCookieBox() {
  cookieCart = {};
  creamCheese = false;
  selectedPackId = null;
  
  document.getElementById('creamCheeseToggle')?.classList.remove('on');
  document.querySelectorAll('.quick-pack').forEach(el => el.classList.remove('selected'));
  
  initCookieGrid();
  updateBoxVisual();
  updateCookieSummary();
  
  if (typeof showToast === 'function') {
    showToast('Box cleared', 'info', 2000);
  }
}

function getMiniCookieVisual(id) {
  const visuals = {
    lemon: `<div class="mini-cookie cookie-lemon"><div class="chips"></div></div>`,
    redvelvet: `<div class="mini-cookie cookie-redvelvet"><div class="drizzle"></div></div>`,
    cookiescream: `<div class="mini-cookie cookie-cookiescream"><div class="chunks"></div></div>`,
    smores: `<div class="mini-cookie cookie-smores"><div class="marsh"></div></div>`,
    caramel: `<div class="mini-cookie cookie-caramel"><div class="swirl"></div></div>`,
    matcha: `<div class="mini-cookie cookie-matcha"><div class="chips"></div></div>`,
    espresso: `<div class="mini-cookie cookie-espresso"><div class="chips"></div></div>`,
    ferrero: `<div class="mini-cookie cookie-ferrero"><div class="chips"></div></div>`,
    nutella: `<div class="mini-cookie cookie-nutella"><div class="filling"></div></div>`
  };
  return visuals[id] || `<div class="mini-cookie"></div>`;
}

function toggleCreamCheese() {
  creamCheese = !creamCheese;
  document.getElementById('creamCheeseToggle').classList.toggle('on', creamCheese);
  updateCookieSummary();
}

function updateCookieSummary() {
  let totalQty = 0;
  
  COOKIES.forEach(c => {
    const qty = cookieCart[c.id] || 0;
    totalQty += qty;
  });
  
  // Use pack pricing if a pack is selected, otherwise calculate based on quantity
  let total = 0;
  let packName = '';
  
  if (selectedPackId && QUICK_PACKS[selectedPackId]) {
    total = QUICK_PACKS[selectedPackId].price;
    packName = QUICK_PACKS[selectedPackId].name;
  } else if (totalQty >= 100) {
    total = 310;
    packName = '100 Pack';
  } else if (totalQty >= 50) {
    total = 170;
    packName = '50 Pack';
  } else if (totalQty >= 30) {
    total = 104;
    packName = '30 Pack';
  } else if (totalQty >= 20) {
    total = 75;
    packName = '20 Pack';
  } else if (totalQty >= 10) {
    total = 40;
    packName = '10 Pack';
  } else if (totalQty >= 5) {
    total = 20;
    packName = '5 Pack';
  } else {
    // Under 5 - can't order
    total = 0;
  }
  
  // Add cream cheese if selected
  if (creamCheese && totalQty > 0) total += totalQty * 1;
  
  // Add gift wrap if selected
  const addonsTotal = getAddonsTotal();
  total += addonsTotal;
  
  document.getElementById('totalCookies').textContent = totalQty;
  document.getElementById('cookieTotal').textContent = totalQty >= 5 ? '$' + total.toFixed(2) : '--';
  
  // Cream cheese row
  const ccRow = document.getElementById('creamCheeseRow');
  if (creamCheese && totalQty > 0) {
    ccRow.style.display = 'flex';
    document.getElementById('creamCheeseTotal').textContent = '+$' + (totalQty * 1).toFixed(2);
  } else {
    ccRow.style.display = 'none';
  }
  
  // Addons row
  const addRow = document.getElementById('addonsRow');
  if (addonsTotal > 0) {
    addRow.style.display = 'flex';
    document.getElementById('addonsTotal').textContent = '+$' + addonsTotal.toFixed(2);
  } else {
    addRow.style.display = 'none';
  }
  
  // Hide discount row (now built into pack pricing)
  const discountRow = document.getElementById('discountRow');
  if (discountRow) discountRow.style.display = 'none';
  
  // Update tier badges - now show which pack tier
  document.getElementById('tier5')?.classList.toggle('active', totalQty >= 5 && totalQty < 10);
  document.getElementById('tier10')?.classList.toggle('active', totalQty >= 10 && totalQty < 20);
  document.getElementById('tier20')?.classList.toggle('active', totalQty >= 20 && totalQty < 30);
  document.getElementById('tier30')?.classList.toggle('active', totalQty >= 30 && totalQty < 50);
  document.getElementById('tier50')?.classList.toggle('active', totalQty >= 50 && totalQty < 100);
  document.getElementById('tier100')?.classList.toggle('active', totalQty >= 100);
  
  // Progress bar
  updateProgressBar(totalQty);
  
  // Smart suggestion
  updateSmartSuggestion(totalQty);
  
  const btn = document.getElementById('dessertCta');
  const orderLink = document.getElementById('cookieOrderNowLink');
  if (totalQty >= 5 && selectedPackId) {
    btn.textContent = 'ADD TO CART   $' + total.toFixed(2);
    btn.disabled = false;
    // Only show Order Now if cart is empty
    if (orderLink) orderLink.style.display = cart.length === 0 ? 'block' : 'none';
  } else if (totalQty >= 5) {
    btn.textContent = 'ADD TO CART   $' + total.toFixed(2);
    btn.disabled = false;
    if (orderLink) orderLink.style.display = cart.length === 0 ? 'block' : 'none';
  } else if (totalQty > 0) {
    btn.textContent = 'MINIMUM 5 COOKIES';
    btn.disabled = true;
    if (orderLink) orderLink.style.display = 'none';
  } else {
    btn.textContent = 'SELECT A PACK';
    btn.disabled = true;
    if (orderLink) orderLink.style.display = 'none';
  }
  
  // Update box visual (for clear button visibility)
  updateBoxVisual();
}

// Add-ons system
let addons = { giftWrap: false };
const ADDON_PRICES = { giftWrap: 5 };

function toggleAddon(id) {
  addons[id] = !addons[id];
  document.querySelector(`[onclick="toggleAddon('${id}')"]`).classList.toggle('selected', addons[id]);
  updateCookieSummary();
}

function getAddonsTotal() {
  let total = 0;
  Object.keys(addons).forEach(key => {
    if (addons[key]) total += ADDON_PRICES[key];
  });
  return total;
}

// Progress bar
function updateProgressBar(qty) {
  const fill = document.getElementById('progressFill');
  const reward = document.getElementById('progressReward');
  if (!fill) return;
  
  let pct = 0;
  let rewardText = '';
  
  if (qty >= 100) {
    pct = 100;
    rewardText = ' 100 Pack - $310!';
  } else if (qty >= 50) {
    pct = 80 + (qty - 50) / 50 * 20;
    rewardText = `Add ${100 - qty} for 100 Pack!`;
  } else if (qty >= 30) {
    pct = 60 + (qty - 30) / 20 * 20;
    rewardText = `Add ${50 - qty} for 50 Pack - BEST VALUE!`;
  } else if (qty >= 20) {
    pct = 45 + (qty - 20) / 10 * 15;
    rewardText = `Add ${30 - qty} for 30 Pack!`;
  } else if (qty >= 10) {
    pct = 30 + (qty - 10) / 10 * 15;
    rewardText = `Add ${20 - qty} for 20 Pack!`;
  } else if (qty >= 5) {
    pct = 15 + (qty - 5) / 5 * 15;
    rewardText = `Add ${10 - qty} for 10 Pack!`;
  } else {
    pct = qty / 5 * 15;
    rewardText = qty > 0 ? `Add ${5 - qty} more (min 5)` : 'Select a pack to start!';
  }
  
  fill.style.width = pct + '%';
  if (reward) reward.textContent = rewardText;
  
  // Update milestones
  document.getElementById('mile5')?.classList.toggle('reached', qty >= 5);
  document.getElementById('mile10')?.classList.toggle('reached', qty >= 10);
  document.getElementById('mile20')?.classList.toggle('reached', qty >= 20);
  document.getElementById('mile50')?.classList.toggle('reached', qty >= 50);
  document.getElementById('mile100')?.classList.toggle('reached', qty >= 100);
  
  if (qty < 5) document.getElementById('mile5')?.classList.add('next');
  else document.getElementById('mile5')?.classList.remove('next');
  
  if (qty >= 5 && qty < 10) document.getElementById('mile10')?.classList.add('next');
  else document.getElementById('mile10')?.classList.remove('next');
  
  if (qty >= 10 && qty < 20) document.getElementById('mile20')?.classList.add('next');
  else document.getElementById('mile20')?.classList.remove('next');
  
  if (qty >= 20 && qty < 50) document.getElementById('mile50')?.classList.add('next');
  else document.getElementById('mile50')?.classList.remove('next');
  
  if (qty >= 50 && qty < 100) document.getElementById('mile100')?.classList.add('next');
  else document.getElementById('mile100')?.classList.remove('next');
}

// Smart suggestion
let suggestionQty = 0;
function updateSmartSuggestion(qty) {
  const el = document.getElementById('smartSuggestion');
  if (!el) return;
  
  if (qty > 0 && qty < 100) {
    let target, savings;
    if (qty < 20) { target = 20; savings = '$75'; }
    else if (qty < 30) { target = 30; savings = '$104'; }
    else if (qty < 50) { target = 50; savings = '$170'; }
    else { target = 100; savings = '$310'; }
    
    const needed = target - qty;
    suggestionQty = needed;
    
    if (qty < 20) {
      document.getElementById('suggestionText').innerHTML = `Add <strong>${needed} more</strong> to reach minimum order`;
    } else {
      document.getElementById('suggestionText').innerHTML = `Add <strong>${needed} more</strong> for ${target} Pack!`;
    }
    document.getElementById('suggestionBtn').textContent = '+' + needed;
    el.classList.add('show');
  } else {
    el.classList.remove('show');
  }
}

function addSuggestedCookies() {
  // Add popular cookie (Nutella)
  if (!cookieCart['nutella']) cookieCart['nutella'] = 0;
  cookieCart['nutella'] += suggestionQty;
  initCookieGrid();
  updateCookieSummary();
  
  const box = document.getElementById('cookieBox');
  box.classList.add('shake');
  setTimeout(() => box.classList.remove('shake'), 400);
}

// Gift mode
function toggleGiftMode() {
  const toggle = document.getElementById('giftToggle');
  const form = document.getElementById('giftForm');
  const sw = document.getElementById('giftSwitch');
  
  toggle.classList.toggle('active');
  form.classList.toggle('show');
  sw.classList.toggle('on');
  updateCookieSummary();
}

function updateCharCount() {
  const msg = document.getElementById('giftMessage');
  const count = document.getElementById('charCount');
  if (msg && count) count.textContent = msg.value.length;
}

// Custom box label
function updateBoxLabel() {
  const input = document.getElementById('boxLabelInput');
  const display = document.getElementById('boxLabelDisplay');
  if (display) {
    display.textContent = input.value || 'COOKIEBOXX';
  }
}

// Quick packs - auto-fill with best sellers
const QUICK_PACKS = {
  five: { name: '5 Pack', qty: 5, price: 20, cookies: {} },
  ten: { name: '10 Pack', qty: 10, price: 40, cookies: {} },
  twenty: { name: '20 Pack', qty: 20, price: 75, cookies: {} },
  thirty: { name: '30 Pack', qty: 30, price: 104, cookies: {} },
  fifty: { name: '50 Pack', qty: 50, price: 170, cookies: {} },
  hundred: { name: '100 Pack', qty: 100, price: 310, cookies: {} }
};

let selectedPackId = null;

function selectQuickPack(packId) {
  const pack = QUICK_PACKS[packId];
  if (!pack) return;
  
  const clickedEl = event.currentTarget;
  const wasSelected = clickedEl.classList.contains('selected');
  
  // Clear selection from ALL pack groups
  document.querySelectorAll('#quickPacksAvail .quick-pack').forEach(el => el.classList.remove('selected'));
  
  if (wasSelected) {
    // Deselect
    selectedPackId = null;
    clearCookieBox();
    return;
  }
  
  // Select new pack - DON'T auto-fill, let user pick flavors
  selectedPackId = packId;
  cookieCart = {};
  
  // Highlight selected pack
  clickedEl.classList.add('selected');
  
  initCookieGrid();
  updateCookieSummary();
  
  const box = document.getElementById('cookieBox');
  box.classList.add('shake');
  setTimeout(() => box.classList.remove('shake'), 400);
}

// ==================== BROWNIE SECTION ====================

const BROWNIES = [
  {id: 'classic', name: 'Classic Fudge', desc: 'Rich, dense chocolate brownie', price: 5, emoji: '', tags: ['bestseller']},
  {id: 'walnut', name: 'Walnut Crunch', desc: 'Loaded with toasted walnuts', price: 5.50, emoji: '', tags: ['nutty']},
  {id: 'caramel', name: 'Salted Caramel', desc: 'Swirled with gooey caramel', price: 5.50, emoji: '', tags: ['bestseller']},
  {id: 'cheesecake', name: 'Cheesecake Swirl', desc: 'Creamy cheesecake marbled in', price: 6, emoji: '', tags: ['creamy']},
  {id: 'peanutbutter', name: 'Peanut Butter', desc: 'Rich PB swirled throughout', price: 5.50, emoji: '', tags: ['nutty']},
  {id: 'smores', name: "S'mores", desc: 'Graham, marshmallow, chocolate', price: 6, emoji: '', tags: ['fan favorite']}
];

const BROWNIE_PACKS = {
  six: { name: '6 Pack', qty: 6, price: 30, brownies: {} },
  twelve: { name: '12 Pack', qty: 12, price: 60, brownies: {} },
  twentyfour: { name: '24 Pack', qty: 24, price: 110, brownies: {} },
  fortyeight: { name: '48 Pack', qty: 48, price: 200, brownies: {} }
};

let brownieCart = {};
let selectedBrowniePackId = null;
let brownieGiftMode = false;
let brownieAddons = { giftWrap: false, iceCream: false };

// Brownie visual generators
function getBrownieVisual(id, isModal = false) {
  const cls = isModal ? 'brownie-visual modal-brownie-visual' : 'brownie-visual';
  const visuals = {
    classic: `<div class="${cls} brownie-classic"><div class="crack"></div><div class="shine"></div></div>`,
    walnut: `<div class="${cls} brownie-walnut"><div class="nuts"></div><div class="nut1"></div><div class="nut2"></div><div class="nut3"></div></div>`,
    caramel: `<div class="${cls} brownie-caramel"><div class="swirl"></div><div class="salt"></div></div>`,
    cheesecake: `<div class="${cls} brownie-cheesecake"><div class="cream"></div></div>`,
    peanutbutter: `<div class="${cls} brownie-peanutbutter"><div class="pb"></div></div>`,
    smores: `<div class="${cls} brownie-smores"><div class="toppings"></div><div class="graham"></div><div class="marsh"></div><div class="marsh2"></div></div>`
  };
  return visuals[id] || `<div class="${cls} brownie-classic"><div class="crack"></div></div>`;
}

function getMiniBrownieVisual(id) {
  return `<div class="mini-brownie ${id}"></div>`;
}

function initBrownieGrid() {
  const grid = document.getElementById('brownieGrid');
  if (!grid) return;
  
  grid.innerHTML = BROWNIES.map(b => {
    const qty = brownieCart[b.id] || 0;
    return `
      <div class="cookie-card ${qty > 0 ? 'has-qty' : ''}" onclick="openBrownieModal('${b.id}')">
        ${getBrownieVisual(b.id)}
        <span class="name">${b.name}</span>
        <span class="price">$${b.price.toFixed(2)}</span>
        <div class="qty-badge" id="brownie-badge-${b.id}">${qty}</div>
      </div>
    `;
  }).join('');
  
  updateBrownieBoxVisual();
}

function openBrownieModal(id) {
  const brownie = BROWNIES.find(b => b.id === id);
  if (!brownie) return;
  
  // Reuse cookie modal with brownie visual
  document.getElementById('modalEmoji').innerHTML = getBrownieVisual(id, true);
  document.getElementById('modalName').textContent = brownie.name;
  document.getElementById('modalPrice').textContent = '$' + brownie.price.toFixed(2) + ' each';
  document.getElementById('modalDesc').textContent = brownie.desc;
  document.getElementById('modalTags').innerHTML = brownie.tags.map((t, i) => `<span class="modal-tag ${i === 0 ? 'highlight' : ''}">${t}</span>`).join('');
  document.getElementById('modalQty').textContent = brownieCart[id] || 0;
  
  // Store which brownie is being edited
  window.currentBrownieId = id;
  window.editingBrownie = true;
  
  document.getElementById('cookieModal').classList.add('show');
}

function selectBrowniePack(packId) {
  const pack = BROWNIE_PACKS[packId];
  if (!pack) return;
  
  const clickedEl = event.currentTarget;
  const wasSelected = clickedEl.classList.contains('selected');
  
  // Clear selection from ALL brownie pack groups
  document.querySelectorAll('#browniePacksAvail .quick-pack').forEach(el => el.classList.remove('selected'));
  
  if (wasSelected) {
    selectedBrowniePackId = null;
    clearBrownieBox();
    return;
  }
  
  selectedBrowniePackId = packId;
  brownieCart = {};
  
  clickedEl.classList.add('selected');
  
  initBrownieGrid();
  updateBrownieSummary();
  
  const box = document.getElementById('brownieBox');
  if (box) {
    box.classList.add('shake');
    setTimeout(() => box.classList.remove('shake'), 400);
  }
}

function clearBrownieBox() {
  brownieCart = {};
  selectedBrowniePackId = null;
  brownieAddons = { giftWrap: false, iceCream: false };
  brownieGiftMode = false;
  
  document.querySelectorAll('#browniePacksAvail .quick-pack').forEach(el => el.classList.remove('selected'));
  document.getElementById('brownieGiftSwitch')?.classList.remove('active');
  document.getElementById('brownieGiftForm')?.classList.remove('show');
  document.getElementById('brownieAddonGiftWrap')?.classList.remove('checked');
  document.getElementById('brownieAddonIceCream')?.classList.remove('checked');
  
  initBrownieGrid();
  updateBrownieBoxVisual();
  updateBrownieSummary();
  
  showToast('Box cleared', 'info', 2000);
}

function updateBrownieBoxVisual() {
  const inner = document.getElementById('brownieBoxInner');
  const countEl = document.getElementById('brownieBoxCount');
  const clearBtn = document.getElementById('clearBrownieBtn');
  const lid = document.getElementById('brownieBoxLid');
  
  if (!inner) return;
  
  let total = 0;
  let brownieItems = [];
  
  BROWNIES.forEach(b => {
    const qty = brownieCart[b.id] || 0;
    total += qty;
    for (let i = 0; i < Math.min(qty, 4); i++) {
      brownieItems.push(b.id);
    }
  });
  
  // Display up to 12 mini brownies in the box
  const displayBrownies = brownieItems.slice(0, 12);
  const html = displayBrownies.map(id => getMiniBrownieVisual(id)).join('');
  
  inner.innerHTML = html;
  if (countEl) countEl.textContent = total + ' brownies';
  if (clearBtn) clearBtn.style.display = total > 0 ? 'block' : 'none';
  if (lid) lid.classList.toggle('open', total > 0);
}

function updateBrownieProgress() {
  let totalQty = 0;
  BROWNIES.forEach(b => { totalQty += brownieCart[b.id] || 0; });
  
  const fill = document.getElementById('brownieProgressFill');
  const reward = document.getElementById('brownieProgressReward');
  
  let percent = 0;
  let message = 'Select a pack to start!';
  
  if (totalQty >= 48) {
    percent = 100;
    message = '48 Pack - Best value! ';
  } else if (totalQty >= 24) {
    percent = 75;
    message = `${48 - totalQty} more for 48 pack!`;
  } else if (totalQty >= 12) {
    percent = 50;
    message = `${24 - totalQty} more for 24 pack!`;
  } else if (totalQty >= 6) {
    percent = 25;
    message = `${12 - totalQty} more for 12 pack!`;
  } else if (totalQty > 0) {
    percent = (totalQty / 6) * 25;
    message = `${6 - totalQty} more for 6 pack`;
  }
  
  if (fill) fill.style.width = percent + '%';
  if (reward) reward.textContent = message;
  
  // Update milestones
  document.getElementById('bmile6')?.classList.toggle('reached', totalQty >= 6);
  document.getElementById('bmile12')?.classList.toggle('reached', totalQty >= 12);
  document.getElementById('bmile24')?.classList.toggle('reached', totalQty >= 24);
  document.getElementById('bmile48')?.classList.toggle('reached', totalQty >= 48);
}

function updateBrownieSummary() {
  let totalQty = 0;
  
  BROWNIES.forEach(b => {
    totalQty += brownieCart[b.id] || 0;
  });
  
  let baseTotal = 0;
  
  if (totalQty >= 48) {
    baseTotal = 200;
  } else if (totalQty >= 24) {
    baseTotal = 110;
  } else if (totalQty >= 12) {
    baseTotal = 60;
  } else if (totalQty >= 6) {
    baseTotal = 30;
  }
  
  // Calculate addons
  let addonsTotal = 0;
  if (brownieAddons.giftWrap) addonsTotal += 5;
  if (brownieAddons.iceCream) addonsTotal += 8;
  
  const grandTotal = baseTotal + addonsTotal;
  
  document.getElementById('totalBrownies').textContent = totalQty;
  
  // Show/hide addons row
  const addonsRow = document.getElementById('brownieAddonsRow');
  if (addonsRow) {
    addonsRow.style.display = addonsTotal > 0 ? 'flex' : 'none';
    document.getElementById('brownieAddonsTotal').textContent = '+$' + addonsTotal;
  }
  
  document.getElementById('brownieTotal').textContent = totalQty >= 6 ? '$' + grandTotal.toFixed(2) : '--';
  
  // Update tier badges
  document.getElementById('btier6')?.classList.toggle('active', totalQty >= 6 && totalQty < 12);
  document.getElementById('btier12')?.classList.toggle('active', totalQty >= 12 && totalQty < 24);
  document.getElementById('btier24')?.classList.toggle('active', totalQty >= 24 && totalQty < 48);
  document.getElementById('btier48')?.classList.toggle('active', totalQty >= 48);
  
  // Update progress bar
  updateBrownieProgress();
  
  // Update CTA button
  const btn = document.getElementById('brownieCta');
  const orderLink = document.getElementById('brownieOrderNowLink');
  if (totalQty >= 6) {
    btn.textContent = 'ADD TO CART   $' + grandTotal.toFixed(2);
    btn.disabled = false;
    // Only show Order Now if cart is empty
    if (orderLink) orderLink.style.display = cart.length === 0 ? 'block' : 'none';
  } else if (totalQty > 0) {
    btn.textContent = 'MINIMUM 6 BROWNIES';
    btn.disabled = true;
    if (orderLink) orderLink.style.display = 'none';
  } else {
    btn.textContent = 'SELECT A PACK';
    btn.disabled = true;
    if (orderLink) orderLink.style.display = 'none';
  }
  
  // Update suggestion
  updateBrownieSuggestion(totalQty);
  
  updateBrownieBoxVisual();
}

function updateBrownieSuggestion(totalQty) {
  const suggestion = document.getElementById('brownieSuggestion');
  const text = document.getElementById('brownieSuggestionText');
  const btn = document.getElementById('brownieSuggestionBtn');
  
  if (!suggestion) return;
  
  if (totalQty > 0 && totalQty < 6) {
    const needed = 6 - totalQty;
    text.innerHTML = `Add <strong>${needed} more</strong> to reach <strong>6 pack!</strong>`;
    btn.textContent = '+' + needed;
    suggestion.style.display = 'flex';
  } else if (totalQty >= 6 && totalQty < 12) {
    const needed = 12 - totalQty;
    text.innerHTML = `Add <strong>${needed} more</strong> to reach <strong>12 pack!</strong>`;
    btn.textContent = '+' + needed;
    suggestion.style.display = 'flex';
  } else if (totalQty >= 12 && totalQty < 24) {
    const needed = 24 - totalQty;
    text.innerHTML = `Add <strong>${needed} more</strong> to reach <strong>24 pack!</strong>`;
    btn.textContent = '+' + needed;
    suggestion.style.display = 'flex';
  } else if (totalQty >= 24 && totalQty < 48) {
    const needed = 48 - totalQty;
    text.innerHTML = `Add <strong>${needed} more</strong> for <strong>best value!</strong>`;
    btn.textContent = '+' + needed;
    suggestion.style.display = 'flex';
  } else {
    suggestion.style.display = 'none';
  }
}

function addSuggestedBrownies() {
  let totalQty = 0;
  BROWNIES.forEach(b => { totalQty += brownieCart[b.id] || 0; });
  
  let needed = 0;
  if (totalQty < 12) needed = 12 - totalQty;
  else if (totalQty < 24) needed = 24 - totalQty;
  else if (totalQty < 48) needed = 48 - totalQty;
  
  // Add classic brownies
  brownieCart['classic'] = (brownieCart['classic'] || 0) + needed;
  
  initBrownieGrid();
  updateBrownieSummary();
  showToast(`Added ${needed} Classic Fudge brownies`, 'success', 2000);
}

function toggleBrownieGiftMode() {
  brownieGiftMode = !brownieGiftMode;
  document.getElementById('brownieGiftSwitch')?.classList.toggle('active', brownieGiftMode);
  document.getElementById('brownieGiftForm')?.classList.toggle('show', brownieGiftMode);
}

function toggleBrownieAddon(addon) {
  brownieAddons[addon] = !brownieAddons[addon];
  const checkEl = document.getElementById('brownieAddon' + addon.charAt(0).toUpperCase() + addon.slice(1));
  if (checkEl) checkEl.classList.toggle('checked', brownieAddons[addon]);
  updateBrownieSummary();
}

function updateBrownieCharCount() {
  const textarea = document.getElementById('brownieGiftMessage');
  const counter = document.getElementById('brownieCharCount');
  if (textarea && counter) {
    counter.textContent = textarea.value.length;
  }
}

function updateBrownieBoxLabel() {
  const input = document.getElementById('brownieBoxLabelInput');
  const display = document.getElementById('brownieBoxLabelDisplay');
  if (display) {
    display.textContent = input.value || 'BROWNIEBOXX';
  }
}

function orderBrownies() {
  let totalQty = 0;
  BROWNIES.forEach(b => { totalQty += brownieCart[b.id] || 0; });
  
  if (totalQty < 12) return;
  
  // Find the best matching Shopify pack
  let packSize = 12;
  let packQty = 1;
  
  if (totalQty >= 48) {
    packSize = 48;
    packQty = Math.ceil(totalQty / 48);
  } else if (totalQty >= 24) {
    packSize = 24;
    packQty = 1;
  } else {
    packSize = 12;
    packQty = 1;
  }
  
  const variantId = SHOPIFY_BROWNIE_PACKS[packSize];
  if (variantId) {
    window.location.href = 'https://' + SHOPIFY_STORE + '/cart/' + variantId + ':' + packQty;
    return;
  }
  
  // Fallback
  triggerConfetti();
  const orderNum = 'BRW-' + Math.random().toString(36).substr(2,6).toUpperCase();
  showToast(' Brownie order placed! #' + orderNum, 'success', 4000);
  
  // Reset everything
  brownieCart = {};
  selectedBrowniePackId = null;
  brownieAddons = { giftWrap: false, iceCream: false };
  brownieGiftMode = false;
  
  document.getElementById('brownieGiftSwitch')?.classList.remove('active');
  document.getElementById('brownieGiftForm')?.classList.remove('show');
  document.getElementById('brownieAddonGiftWrap')?.classList.remove('checked');
  document.getElementById('brownieAddonIceCream')?.classList.remove('checked');
  
  // Clear form fields
  ['brownieGiftRecipient', 'brownieGiftAddress', 'brownieGiftMessage', 'brownieGiftNotes', 
   'brownieYourName', 'browniePhone', 'brownieDeliveryAddress', 'brownieDeliveryNotes'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = '';
  });
  document.getElementById('brownieCharCount').textContent = '0';
  
  initBrownieGrid();
  updateBrownieSummary();
  document.querySelectorAll('#brownieQuickPacks .quick-pack').forEach(el => el.classList.remove('selected'));
}

// ==================== END BROWNIE SECTION ====================


// ==================== SNACKS NAVIGATION ====================
function openSnackType(type) {
  // DOGBOXX is the only item, always visible
}

function backToSnacksMenu() {
  // No menu to go back to, DOGBOXX is always shown
}

// ==================== DOGBOXX SECTION ====================
const DOG_SIZES = {
  student: { count: 2, label: 'Student', serves: 'Feeds 1-2', price: 10, noDrink: true },
  regular: { count: 10, label: 'Regular', serves: '4-6', price: 50 },
  party: { count: 20, label: 'Party', serves: '8-12', price: 90 }
};

const DOG_SAUCES = {
  spicymayo: 'Spicy Mayo',
  bbq: 'BBQ',
  mustard: 'Mustard',
  hotsauce: 'Hot Sauce'
};

let selectedDogSize = 'regular';
let dogSauces = { spicymayo: 0, bbq: 0, mustard: 0, hotsauce: 0 };

function selectDogSize(size) {
  selectedDogSize = size;
  
  document.querySelectorAll('.dog-size-card').forEach(card => {
    card.classList.toggle('selected', card.dataset.size === size);
  });
  
  document.getElementById('dogCountDisplay').textContent = DOG_SIZES[size].count;
  document.getElementById('dogSauceMax').textContent = DOG_SIZES[size].count;
  
  // Show/hide drink picker based on size
  const drinkPicker = document.getElementById('drinkPickerWrap');
  const drinkRow = document.getElementById('dogDrinkRow');
  if (DOG_SIZES[size].noDrink) {
    if (drinkPicker) drinkPicker.style.display = 'none';
    if (drinkRow) drinkRow.style.display = 'none';
  } else {
    if (drinkPicker) drinkPicker.style.display = 'block';
    if (drinkRow) drinkRow.style.display = 'flex';
  }
  
  // Show zone warning for student deal
  const zoneWarning = document.getElementById('studentZoneWarning');
  if (zoneWarning) {
    zoneWarning.style.display = size === 'student' ? 'block' : 'none';
  }
  
  // Reset sauces if total exceeds new max
  const total = Object.values(dogSauces).reduce((a, b) => a + b, 0);
  if (total > DOG_SIZES[size].count) {
    dogSauces = { spicymayo: 0, bbq: 0, mustard: 0, hotsauce: 0 };
    Object.keys(dogSauces).forEach(s => {
      document.getElementById('sauceQty_' + s).textContent = '0';
    });
  }
  
  updateDogSummary();
}

function adjustSauce(sauce, delta) {
  const max = DOG_SIZES[selectedDogSize].count;
  const totalUsed = Object.values(dogSauces).reduce((a, b) => a + b, 0);
  
  const newVal = dogSauces[sauce] + delta;
  if (newVal < 0) return;
  if (delta > 0 && totalUsed >= max) {
    showToast('All ' + max + ' sauce picks used!', 'error', 2000);
    return;
  }
  
  dogSauces[sauce] = newVal;
  document.getElementById('sauceQty_' + sauce).textContent = newVal;
  
  // Highlight row if has quantity
  document.querySelectorAll('.dog-sauce-row').forEach(row => {
    const s = row.dataset.sauce;
    if (dogSauces[s] > 0) {
      row.style.borderColor = '#E8A817';
      row.style.background = 'rgba(232,168,23,0.08)';
    } else {
      row.style.borderColor = 'var(--gray2)';
      row.style.background = 'var(--gray1)';
    }
  });
  
  updateDogSummary();
}

function updateDogSummary() {
  const size = DOG_SIZES[selectedDogSize];
  const totalSauces = Object.values(dogSauces).reduce((a, b) => a + b, 0);
  const remaining = size.count - totalSauces;
  
  document.getElementById('dogSizeLabel').textContent = size.count + ' Pack ' + size.label;
  document.getElementById('dogTotal').textContent = '$' + size.price.toFixed(2);
  document.getElementById('dogCta').textContent = 'ADD TO CART   $' + size.price.toFixed(2);
  document.getElementById('dogOrderNowLink').style.display = cart.length === 0 ? 'block' : 'none';
  
  // Update sauce remaining
  document.getElementById('dogSauceLeft').textContent = remaining;
  document.getElementById('dogSauceMax').textContent = size.count;
  
  // Update sauce label in summary
  const sauceList = Object.entries(dogSauces)
    .filter(([k, v]) => v > 0)
    .map(([k, v]) => v + 'x ' + DOG_SAUCES[k])
    .join(', ');
  
  document.getElementById('dogSaucesLabel').textContent = sauceList || 'Pick your sauces above';
  if (sauceList) {
    document.getElementById('dogSaucesLabel').style.color = '#4CAF50';
  } else {
    document.getElementById('dogSaucesLabel').style.color = '#E8A817';
  }
}

let selectedDrink = '';
let studentDeliveryType = 'drop';
let selectedTimeSlot = '';

function selectTimeSlot(btn, time) {
  selectedTimeSlot = time;
  document.querySelectorAll('.time-slot-btn').forEach(b => {
    b.style.borderColor = 'var(--gray2)';
    b.style.background = 'var(--gray1)';
    b.style.color = 'var(--white)';
  });
  btn.style.borderColor = '#D4442A';
  btn.style.background = 'rgba(212,68,42,0.15)';
  btn.style.color = '#D4442A';
}

function selectDeliveryType(type) {
  studentDeliveryType = type;
  const dropBtn = document.getElementById('dropBtn');
  const meetBtn = document.getElementById('meetBtn');
  
  if (type === 'drop') {
    dropBtn.style.borderColor = '#E8A817';
    dropBtn.style.background = 'rgba(232,168,23,0.15)';
    dropBtn.style.color = '#E8A817';
    meetBtn.style.borderColor = 'var(--gray2)';
    meetBtn.style.background = 'var(--gray1)';
    meetBtn.style.color = 'var(--white)';
    document.getElementById('studentLocation').placeholder = 'Building, room, or drop spot (e.g. SRYE 2nd floor lobby)';
  } else {
    meetBtn.style.borderColor = '#E8A817';
    meetBtn.style.background = 'rgba(232,168,23,0.15)';
    meetBtn.style.color = '#E8A817';
    dropBtn.style.borderColor = 'var(--gray2)';
    dropBtn.style.background = 'var(--gray1)';
    dropBtn.style.color = 'var(--white)';
    document.getElementById('studentLocation').placeholder = 'Where to meet? (e.g. Main entrance, food court)';
  }
}

function pickDrink(btn, name) {
  selectedDrink = name;
  document.querySelectorAll('.drink-opt').forEach(b => {
    b.style.borderColor = 'var(--gray2)';
    b.style.background = 'var(--gray1)';
    b.style.color = 'var(--white)';
  });
  btn.style.borderColor = '#E8A817';
  btn.style.background = 'rgba(232,168,23,0.15)';
  btn.style.color = '#E8A817';
  document.getElementById('dogDrinkLabel').textContent = name + ' (FREE)';
  document.getElementById('dogDrinkLabel').style.color = '#4CAF50';
}

function addDogsToCart() {
  const size = DOG_SIZES[selectedDogSize];
  const totalSauces = Object.values(dogSauces).reduce((a, b) => a + b, 0);
  
  // Validate student order has location and time slot
  if (selectedDogSize === 'student') {
    if (!selectedTimeSlot) {
      showToast('Please pick a delivery time slot', 'error', 3000);
      return;
    }
    const location = document.getElementById('studentLocation').value.trim();
    if (!location) {
      showToast('Please enter your drop off / meet up location', 'error', 3000);
      return;
    }
  }
  
  const sauceList = Object.entries(dogSauces)
    .filter(([k, v]) => v > 0)
    .map(([k, v]) => v + 'x ' + DOG_SAUCES[k])
    .join(', ');
  
  const sauceDetail = sauceList ? 'Sauces: ' + sauceList : 'No sauces';
  
  let details = 'Loaded dogs + ' + sauceDetail;
  if (size.noDrink) {
    // Student deal - add time slot and location info
    const location = document.getElementById('studentLocation').value.trim();
    const deliveryType = studentDeliveryType === 'drop' ? 'Drop' : 'Meet';
    details += ' | ' + selectedTimeSlot + ' ' + deliveryType + ': ' + location;
  } else {
    details += ' + FREE 2L ' + (selectedDrink || 'drink');
  }
  
  addToCart({
    type: 'dogs',
    name: 'DOGBOXX ' + size.count + (selectedDogSize === 'student' ? ' Student Deal' : ' Pack'),
    details: details,
    price: size.price,
    size: selectedDogSize,
    count: size.count,
    sauces: {...dogSauces},
    studentLocation: selectedDogSize === 'student' ? document.getElementById('studentLocation').value.trim() : null,
    deliveryType: selectedDogSize === 'student' ? studentDeliveryType : null,
    timeSlot: selectedDogSize === 'student' ? selectedTimeSlot : null
  });
  
  resetDogBuilder();
}

function orderDogs() {
  const size = DOG_SIZES[selectedDogSize];
  const variantId = SHOPIFY_DOG_PACKS[selectedDogSize];
  
  if (variantId) {
    window.location.href = 'https://' + SHOPIFY_STORE + '/cart/' + variantId + ':1';
    return;
  }
  
  // Fallback
  addDogsToCart();
  openCart();
}

function resetDogBuilder() {
  selectedDogSize = 'regular';
  dogSauces = { spicymayo: 0, bbq: 0, mustard: 0, hotsauce: 0 };
  selectedDrink = '';
  studentDeliveryType = 'drop';
  selectedTimeSlot = '';
  
  // Reset student location and time slots
  const studentLocation = document.getElementById('studentLocation');
  if (studentLocation) studentLocation.value = '';
  
  document.querySelectorAll('.time-slot-btn').forEach(b => {
    b.style.borderColor = 'var(--gray2)';
    b.style.background = 'var(--gray1)';
    b.style.color = 'var(--white)';
  });
  
  // Hide student zone warning, show drink picker
  const zoneWarning = document.getElementById('studentZoneWarning');
  if (zoneWarning) zoneWarning.style.display = 'none';
  const drinkPicker = document.getElementById('drinkPickerWrap');
  if (drinkPicker) drinkPicker.style.display = 'block';
  const drinkRow = document.getElementById('dogDrinkRow');
  if (drinkRow) drinkRow.style.display = 'flex';
  
  document.querySelectorAll('.drink-opt').forEach(b => {
    b.style.borderColor = 'var(--gray2)';
    b.style.background = 'var(--gray1)';
    b.style.color = 'var(--white)';
  });
  document.getElementById('dogDrinkLabel').textContent = 'Pick above';
  document.getElementById('dogDrinkLabel').style.color = '#E8A817';
  
  document.querySelectorAll('.dog-size-card').forEach(card => {
    card.classList.toggle('selected', card.dataset.size === 'regular');
  });
  document.getElementById('dogCountDisplay').textContent = '10';
  
  Object.keys(dogSauces).forEach(s => {
    document.getElementById('sauceQty_' + s).textContent = '0';
  });
  
  document.querySelectorAll('.dog-sauce-row').forEach(row => {
    row.style.borderColor = 'var(--gray2)';
    row.style.background = 'var(--gray1)';
  });
  
  updateDogSummary();
}
// ==================== END DOGBOXX SECTION ====================

// ==================== WINGBOXX SECTION ====================
const WING_SIZES = {
  small: { count: 24, label: 'Small', serves: '4-6', price: 40 },
  medium: { count: 50, label: 'Medium', serves: '8-12', price: 70 },
  large: { count: 100, label: 'Large', serves: '15-20', price: 125 }
};

const WING_FLAVORS = {
  buffalo: { name: 'Buffalo', icon: '' },
  bbq: { name: 'Smoky BBQ', icon: '' },
  honeygarlic: { name: 'Honey Garlic', icon: '' },
  lemonpepper: { name: 'Lemon Pepper', icon: '' },
  korean: { name: 'Korean', icon: '' },
  mango: { name: 'Mango Hab', icon: '' },
  garmparm: { name: 'Garlic Parm', icon: '' },
  naked: { name: 'Naked', icon: '' }
};

let selectedWingSize = 'small';
let selectedWingFlavors = ['buffalo'];
let selectedWingDips = [];

function selectWingSize(size) {
  selectedWingSize = size;
  
  // Update UI
  document.querySelectorAll('.wing-size-card').forEach(card => {
    card.classList.toggle('selected', card.dataset.size === size);
  });
  
  // Update hero display
  document.getElementById('wingCountDisplay').textContent = WING_SIZES[size].count;
  
  // Update flavor limit based on size
  const maxFlavors = size === 'small' ? 2 : size === 'medium' ? 3 : 4;
  document.getElementById('wingFlavorCount').textContent = `(Pick up to ${maxFlavors})`;
  
  // Trim flavors if over limit
  if (selectedWingFlavors.length > maxFlavors) {
    selectedWingFlavors = selectedWingFlavors.slice(0, maxFlavors);
    updateWingFlavorUI();
  }
  
  updateWingSummary();
}

function toggleWingFlavor(flavor) {
  const maxFlavors = selectedWingSize === 'small' ? 2 : selectedWingSize === 'medium' ? 3 : 4;
  const idx = selectedWingFlavors.indexOf(flavor);
  
  if (idx >= 0) {
    // Don't allow removing last flavor
    if (selectedWingFlavors.length > 1) {
      selectedWingFlavors.splice(idx, 1);
    }
  } else if (selectedWingFlavors.length < maxFlavors) {
    selectedWingFlavors.push(flavor);
  } else {
    showToast(`Max ${maxFlavors} flavors for this size`, 'error', 2000);
    return;
  }
  
  updateWingFlavorUI();
  updateWingSummary();
}

function updateWingFlavorUI() {
  document.querySelectorAll('.wing-flavor').forEach(el => {
    el.classList.toggle('selected', selectedWingFlavors.includes(el.dataset.flavor));
  });
}

function toggleWingDip(dip) {
  const idx = selectedWingDips.indexOf(dip);
  if (idx >= 0) {
    selectedWingDips.splice(idx, 1);
  } else {
    selectedWingDips.push(dip);
  }
  
  document.querySelectorAll('.wing-dip').forEach(el => {
    el.classList.toggle('selected', selectedWingDips.includes(el.dataset.dip));
  });
  
  updateWingSummary();
}

function updateWingSummary() {
  const size = WING_SIZES[selectedWingSize];
  const dipsPrice = selectedWingDips.length * 2;
  const total = size.price + dipsPrice;
  
  // Update labels
  document.getElementById('wingSizeLabel').textContent = size.count + 'pc ' + size.label;
  
  const flavorNames = selectedWingFlavors.map(f => WING_FLAVORS[f].name).join(', ');
  document.getElementById('wingFlavorsLabel').textContent = flavorNames || '-';
  
  // Dips row
  const dipsRow = document.getElementById('wingDipsRow');
  if (dipsPrice > 0) {
    dipsRow.style.display = 'flex';
    document.getElementById('wingDipsPrice').textContent = '+$' + dipsPrice;
  } else {
    dipsRow.style.display = 'none';
  }
  
  // Total
  document.getElementById('wingTotal').textContent = '$' + total.toFixed(2);
  
  // CTA
  document.getElementById('wingCta').textContent = 'ADD TO CART   $' + total.toFixed(2);
  
  // Order now link
  document.getElementById('wingOrderNowLink').style.display = cart.length === 0 ? 'block' : 'none';
}

function addWingsToCart() {
  const size = WING_SIZES[selectedWingSize];
  const dipsPrice = selectedWingDips.length * 2;
  const total = size.price + dipsPrice;
  
  const flavorNames = selectedWingFlavors.map(f => WING_FLAVORS[f].name);
  const dipNames = selectedWingDips.map(d => {
    const names = { ranch: 'Ranch', bluecheese: 'Blue Cheese', honey: 'Hot Honey', sriracha: 'Sriracha' };
    return names[d];
  });
  
  addToCart({
    type: 'wings',
    name: 'WINGBOXX ' + size.count + 'pc',
    details: flavorNames.join(', ') + (dipNames.length ? ' + ' + dipNames.join(', ') : ''),
    price: total,
    size: selectedWingSize,
    count: size.count,
    flavors: [...selectedWingFlavors],
    dips: [...selectedWingDips]
  });
  
  resetWingBuilder();
}

function orderWings() {
  addWingsToCart();
  openCart();
}

function resetWingBuilder() {
  selectedWingSize = 'small';
  selectedWingFlavors = ['buffalo'];
  selectedWingDips = [];
  
  document.querySelectorAll('.wing-size-card').forEach(card => {
    card.classList.toggle('selected', card.dataset.size === 'small');
  });
  document.getElementById('wingCountDisplay').textContent = '24';
  document.getElementById('wingFlavorCount').textContent = '(Pick up to 2)';
  
  updateWingFlavorUI();
  document.querySelectorAll('.wing-dip').forEach(el => el.classList.remove('selected'));
  
  updateWingSummary();
}
// ==================== END WINGBOXX SECTION ====================

// Cookie add-on for meals
let mealCookieAddon = 0;
let mealCookieFlavors = [];

// Simplified cookie list for meal addon
const ADDON_COOKIES = [
  {id: 'nutella', name: 'Nutella', popular: true},
  {id: 'redvelvet', name: 'Red Velvet', popular: true},
  {id: 'caramel', name: 'Salted Caramel', popular: true},
  {id: 'cookiescream', name: 'Cookies N Cream', popular: false},
  {id: 'ferrero', name: 'Ferrero Choc Chip', popular: false},
  {id: 'smores', name: "S'mores", popular: false},
  {id: 'matcha', name: 'Matcha', popular: false},
  {id: 'espresso', name: 'Espresso Double Choc', popular: false},
  {id: 'lemon', name: 'Lemon White Choc', popular: false},
];

function renderFlavorChips() {
  const container = document.getElementById('flavorChips');
  if (!container) return;
  
  container.innerHTML = ADDON_COOKIES.map(c => {
    const count = mealCookieFlavors.filter(f => f === c.id).length;
    const isSelected = count > 0;
    return `
      <div class="flavor-chip ${isSelected ? 'selected' : ''}" onclick="toggleMealFlavor('${c.id}')">
        ${c.popular ? ' ' : ''}${c.name}
        ${count > 0 ? `<span class="chip-count">${count}</span>` : ''}
      </div>
    `;
  }).join('');
}

function toggleMealFlavor(id) {
  const currentCount = mealCookieFlavors.filter(f => f === id).length;
  const totalSelected = mealCookieFlavors.length;
  
  if (totalSelected < mealCookieAddon) {
    // Still have room, add this flavor
    mealCookieFlavors.push(id);
  } else if (currentCount > 0) {
    // At max capacity, clicking a selected one removes it
    const idx = mealCookieFlavors.indexOf(id);
    if (idx > -1) mealCookieFlavors.splice(idx, 1);
  }
  
  renderFlavorChips();
  updateMealCookieSummary();
}

function updateMealCookieSummary() {
  const sumRow = document.getElementById('cookieAddonSum');
  if (sumRow && mealCookieAddon > 0) {
    sumRow.style.display = 'flex';
    
    if (mealCookieFlavors.length > 0) {
      const flavorNames = mealCookieFlavors.map(id => {
        const cookie = ADDON_COOKIES.find(c => c.id === id);
        return cookie ? cookie.name : id;
      });
      document.getElementById('rCookies').textContent = flavorNames.join(', ');
    } else {
      document.getElementById('rCookies').textContent = mealCookieAddon + ' cookie' + (mealCookieAddon > 1 ? 's' : '') + ' (select flavor)';
    }
  }
  updReview();
}

function selectCookieAddon(qty) {
  if (mealCookieAddon === qty) {
    // Deselect
    mealCookieAddon = 0;
    mealCookieFlavors = [];
  } else {
    mealCookieAddon = qty;
    // Keep existing flavors if switching from 1 to 2, or trim if going from 2 to 1
    if (mealCookieFlavors.length > qty) {
      mealCookieFlavors = mealCookieFlavors.slice(0, qty);
    }
  }
  
  document.getElementById('cookieOpt1')?.classList.toggle('selected', mealCookieAddon === 1);
  document.getElementById('cookieOpt2')?.classList.toggle('selected', mealCookieAddon === 2);
  
  // Show/hide flavor selector
  const flavorSelector = document.getElementById('cookieFlavorSelector');
  if (flavorSelector) {
    flavorSelector.style.display = mealCookieAddon > 0 ? 'block' : 'none';
    document.getElementById('flavorCount').textContent = mealCookieAddon > 1 ? 's' : '';
  }
  
  // Render flavor chips
  renderFlavorChips();
  
  const sumRow = document.getElementById('cookieAddonSum');
  if (sumRow) {
    sumRow.style.display = mealCookieAddon > 0 ? 'flex' : 'none';
  }
  
  updateMealCookieSummary();
}

function getCookieAddonPrice() {
  if (mealCookieAddon === 1) return 2.99;
  if (mealCookieAddon === 2) return 5.00;
  return 0;
}

function orderCookies() {
  let totalQty = 0;
  let subtotal = 0;
  
  COOKIES.forEach(c => {
    const qty = cookieCart[c.id] || 0;
    if (qty > 0) {
      totalQty += qty;
      subtotal += qty * c.price;
    }
  });
  
  if (totalQty === 0) return;
  
  // Find the best matching Shopify pack
  let packSize = null;
  let packQty = 1;
  
  if (totalQty >= 100) {
    packSize = 100;
    packQty = Math.ceil(totalQty / 100);
  } else if (totalQty >= 50) {
    packSize = 50;
    packQty = 1;
  } else if (totalQty >= 30) {
    packSize = 30;
    packQty = 1;
  } else if (totalQty >= 20) {
    packSize = 20;
    packQty = 1;
  } else {
    // Less than 20 - round up to 20 pack
    packSize = 20;
    packQty = 1;
  }
  
  const variantId = SHOPIFY_COOKIE_PACKS[packSize];
  if (variantId) {
    window.location.href = 'https://' + SHOPIFY_STORE + '/cart/' + variantId + ':' + packQty;
    return;
  }
  
  // Fallback if no variant
  if (creamCheese) subtotal += totalQty * 1;
  subtotal += getAddonsTotal();
  
  let discountPct = 0;
  if (totalQty >= 100) discountPct = 25;
  else if (totalQty >= 50) discountPct = 20;
  else if (totalQty >= 30) discountPct = 15;
  else if (totalQty >= 20) discountPct = 10;
  else if (totalQty >= 10) discountPct = 5;
  
  const cookieSubtotal = subtotal - getAddonsTotal();
  const discount = cookieSubtotal * (discountPct / 100);
  const total = subtotal - discount;
  
  const giftMode = document.getElementById('giftToggle')?.classList.contains('active');
  const boxLabel = document.getElementById('boxLabelInput')?.value;
  
  document.getElementById('confTitle').textContent = giftMode ? ' GIFT ORDER CONFIRMED' : 'COOKIE ORDER CONFIRMED';
  document.getElementById('confSub').textContent = giftMode ? 
    "We'll deliver your gift with love!" : 
    "Fresh cookies coming your way!";
  
  let orderDesc = totalQty + ' Cookies';
  if (creamCheese) orderDesc += ' + Cream Cheese';
  if (addons.giftWrap) orderDesc += ' + Gift Wrap';
  if (boxLabel) orderDesc += ' "' + boxLabel + '"';
  
  document.getElementById('cOrder').textContent = orderDesc;
  document.getElementById('cWin').textContent = giftMode ? 'Scheduled Delivery' : 'Next Day Delivery';
  document.getElementById('cLoc').textContent = giftMode ? 
    (document.getElementById('giftAddress')?.value || 'Gift Address') : 
    'Your Address';
  document.getElementById('cTotal').textContent = '$' + total.toFixed(2);
  showPage('confirm');
}

function resetCookies() {
  cookieCart = {};
  creamCheese = false;
  currentCookie = null;
  addons = { giftWrap: false };
  mealCookieAddon = 0;
  
  document.getElementById('creamCheeseToggle')?.classList.remove('on');
  document.getElementById('giftToggle')?.classList.remove('active');
  document.getElementById('giftForm')?.classList.remove('show');
  document.getElementById('giftSwitch')?.classList.remove('on');
  document.querySelectorAll('.addon-item').forEach(el => el.classList.remove('selected'));
  document.querySelectorAll('.quick-pack').forEach(el => el.classList.remove('selected'));
  
  const boxLabelInput = document.getElementById('boxLabelInput');
  const boxLabelDisplay = document.getElementById('boxLabelDisplay');
  const giftRecipient = document.getElementById('giftRecipient');
  const giftAddress = document.getElementById('giftAddress');
  const giftMessage = document.getElementById('giftMessage');
  const giftNotes = document.getElementById('giftNotes');
  const charCount = document.getElementById('charCount');
  
  if (boxLabelInput) boxLabelInput.value = '';
  if (boxLabelDisplay) boxLabelDisplay.textContent = 'COOKIEBOXX';
  if (giftRecipient) giftRecipient.value = '';
  if (giftAddress) giftAddress.value = '';
  if (giftMessage) giftMessage.value = '';
  if (giftNotes) giftNotes.value = '';
  if (charCount) charCount.textContent = '0';
  
  initCookieGrid();
  updateCookieSummary();
}

// ========== PROFESSIONAL POLISH ==========

// Toast Notifications
function showToast(message, type = 'success', duration = 3000) {
  const container = document.getElementById('toastContainer');
  if (!container) return;
  
  const icons = {
    success: '',
    info: '',
    warning: '',
    error: ''
  };
  
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `
    <div class="toast-icon">${icons[type] || icons.success}</div>
    <div class="toast-msg">${message}</div>
  `;
  
  container.appendChild(toast);
  
  setTimeout(() => {
    toast.classList.add('hiding');
    setTimeout(() => toast.remove(), 300);
  }, duration);
}

// Confetti
function launchConfetti() {
  const container = document.getElementById('confettiContainer');
  if (!container) return;
  
  const colors = ['#FF4D00', '#FFB800', '#00D26A', '#0066FF', '#FF6B6B', '#4ECDC4'];
  const confettiCount = 100;
  
  for (let i = 0; i < confettiCount; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + '%';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.width = Math.random() * 10 + 5 + 'px';
    confetti.style.height = confetti.style.width;
    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
    
    const duration = Math.random() * 2 + 2;
    const delay = Math.random() * 0.5;
    
    confetti.style.animation = `confettiFall ${duration}s ease-out ${delay}s forwards`;
    container.appendChild(confetti);
    
    setTimeout(() => confetti.remove(), (duration + delay) * 1000);
  }
}

// Add confetti animation to CSS dynamically
const confettiStyle = document.createElement('style');
confettiStyle.textContent = `
  @keyframes confettiFall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(900px) rotate(720deg); opacity: 0; }
  }
`;
document.head.appendChild(confettiStyle);

// Generate Order Number
function generateOrderNumber() {
  const num = Math.floor(1000 + Math.random() * 9000);
  return '#LB-' + num;
}

// Update showPage to trigger celebration
const originalShowPage = showPage;
showPage = function(id, step) {
  originalShowPage(id, step);
  
  // If showing confirm page, trigger celebration
  if (id === 'confirm') {
    document.getElementById('orderNumber').textContent = generateOrderNumber();
    setTimeout(launchConfetti, 300);
    showToast('Order placed successfully! ', 'success');
  }
};

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
  renderBowlSelect();
  renderW();
  renderL();
  renderTeamW();
  renderTeamL();
  renderPlanW();
  renderPlanL();
  initCookieGrid();
  
  // Update iPhone status bar time
  function updateStatusTime() {
    const timeEl = document.getElementById('statusTime');
    if (timeEl) {
      const now = new Date();
      let hours = now.getHours();
      const mins = now.getMinutes().toString().padStart(2, '0');
      const ampm = hours >= 12 ? '' : '';
      hours = hours % 12 || 12;
      timeEl.textContent = hours + ':' + mins;
    }
  }
  updateStatusTime();
  setInterval(updateStatusTime, 60000);
});

// ==================== CART SYSTEM ====================
let cart = [];

function updateCartUI() {
  const fab = document.getElementById('cartFab');
  const count = document.getElementById('cartCount');
  const itemCount = cart.length;
  
  // Show/hide FAB
  fab.classList.toggle('show', itemCount > 0);
  count.textContent = itemCount;
  
  // Hide "Order Now" buttons in order flows if cart has items
  const bowlOrderBtn = document.getElementById('bowlOrderNowBtn');
  const partyOrderBtn = document.getElementById('partyOrderNowBtn');
  const bowlAddCartBtn = document.getElementById('bowlAddCartBtn');
  const partyAddCartBtn = document.getElementById('partyAddCartBtn');
  
  if (bowlOrderBtn) bowlOrderBtn.style.display = itemCount > 0 ? 'none' : '';
  if (partyOrderBtn) partyOrderBtn.style.display = itemCount > 0 ? 'none' : '';
  
  // Update add-to-cart buttons to be primary style when cart has items
  if (bowlAddCartBtn) {
    if (itemCount > 0) {
      bowlAddCartBtn.style.background = 'var(--orange)';
      bowlAddCartBtn.style.borderColor = 'var(--orange)';
      bowlAddCartBtn.style.color = 'var(--white)';
    } else {
      bowlAddCartBtn.style.background = '';
      bowlAddCartBtn.style.borderColor = '';
      bowlAddCartBtn.style.color = '';
    }
  }
  
  if (partyAddCartBtn) {
    if (itemCount > 0) {
      partyAddCartBtn.style.background = 'var(--blue)';
      partyAddCartBtn.style.borderColor = 'var(--blue)';
      partyAddCartBtn.style.color = 'var(--white)';
    } else {
      partyAddCartBtn.style.background = '';
      partyAddCartBtn.style.borderColor = '';
      partyAddCartBtn.style.color = '';
    }
  }
  
  // Update dessert "Order Now" links visibility
  const cookieOrderLink = document.getElementById('cookieOrderNowLink');
  const brownieOrderLink = document.getElementById('brownieOrderNowLink');
  
  // Only show if they would normally be visible (qty met) AND cart is empty
  if (cookieOrderLink && cookieOrderLink.style.display !== 'none') {
    cookieOrderLink.style.display = itemCount > 0 ? 'none' : 'block';
  }
  if (brownieOrderLink && brownieOrderLink.style.display !== 'none') {
    brownieOrderLink.style.display = itemCount > 0 ? 'none' : 'block';
  }
  
  // Render cart items
  renderCartItems();
}

function renderCartItems() {
  const container = document.getElementById('cartItems');
  const footer = document.getElementById('cartFooter');
  
  if (cart.length === 0) {
    container.innerHTML = `
      <div class="cart-empty">
        <span></span>
        <p>Your cart is empty</p>
      </div>
    `;
    footer.style.display = 'none';
    return;
  }
  
  let html = '';
  let subtotal = 0;
  
  cart.forEach((item, index) => {
    subtotal += item.price;
    let iconClass = 'bowl';
    let emoji = '';
    
    if (item.type === 'cookies') {
      iconClass = 'cookie';
      emoji = '';
    } else if (item.type === 'brownies') {
      iconClass = 'brownie';
      emoji = '';
    } else if (item.type === 'wings') {
      iconClass = 'wings';
      emoji = '';
    }
    
    html += `
      <div class="cart-item">
        <div class="cart-item-icon ${iconClass}">${emoji}</div>
        <div class="cart-item-info">
          <div class="cart-item-name">${item.name}</div>
          <div class="cart-item-details">${item.details}</div>
          <div class="cart-item-price">$${item.price.toFixed(2)}</div>
        </div>
        <button class="cart-item-remove" onclick="removeFromCart(${index})"></button>
      </div>
    `;
  });
  
  container.innerHTML = html;
  footer.style.display = 'block';
  
  document.getElementById('cartSubtotal').textContent = '$' + subtotal.toFixed(2);
  const tipTotal = subtotal + currentTip;
  document.getElementById('cartTotal').textContent = '$' + tipTotal.toFixed(2);
  document.getElementById('checkoutTotal').textContent = '$' + tipTotal.toFixed(2);
}

// ==================== TIP SYSTEM ====================
let currentTip = 0;

function setTip(amount) {
  currentTip = amount;
  document.getElementById('customTipWrap').style.display = 'none';
  document.getElementById('customTipInput').value = '';
  
  document.querySelectorAll('.tip-btn').forEach(btn => {
    btn.style.borderColor = 'var(--gray2)';
    btn.style.background = 'var(--gray1)';
    btn.style.color = 'var(--white)';
  });
  
  const activeBtn = document.querySelector('.tip-btn[data-tip="' + amount + '"]');
  if (activeBtn) {
    activeBtn.style.borderColor = '#E8A817';
    activeBtn.style.background = 'rgba(232,168,23,0.15)';
    activeBtn.style.color = '#E8A817';
  }
  
  const tipDisplay = document.getElementById('tipDisplay');
  if (amount > 0) {
    tipDisplay.style.display = 'block';
    tipDisplay.textContent = 'Tip: $' + amount.toFixed(2) + '  Thank you! ';
  } else {
    tipDisplay.style.display = 'none';
  }
  
  updateCartUI();
}

function setCustomTip() {
  document.querySelectorAll('.tip-btn').forEach(btn => {
    btn.style.borderColor = 'var(--gray2)';
    btn.style.background = 'var(--gray1)';
    btn.style.color = 'var(--white)';
  });
  
  const customBtn = document.querySelector('.tip-btn[data-tip="custom"]');
  customBtn.style.borderColor = '#E8A817';
  customBtn.style.background = 'rgba(232,168,23,0.15)';
  customBtn.style.color = '#E8A817';
  
  document.getElementById('customTipWrap').style.display = 'block';
  document.getElementById('customTipInput').focus();
}

function updateCustomTip() {
  const val = parseFloat(document.getElementById('customTipInput').value) || 0;
  currentTip = Math.max(0, val);
  
  const tipDisplay = document.getElementById('tipDisplay');
  if (currentTip > 0) {
    tipDisplay.style.display = 'block';
    tipDisplay.textContent = 'Tip: $' + currentTip.toFixed(2) + '  Thank you! ';
  } else {
    tipDisplay.style.display = 'none';
  }
  
  updateCartUI();
}
// ==================== END TIP SYSTEM ====================

function addToCart(item) {
  cart.push(item);
  updateCartUI();
  
  // Shake the FAB
  const fab = document.getElementById('cartFab');
  fab.classList.remove('shake');
  void fab.offsetWidth; // Trigger reflow
  fab.classList.add('shake');
  
  showToast(`Added to cart: ${item.name}`, 'success', 2000);
}

function removeFromCart(index) {
  const item = cart[index];
  cart.splice(index, 1);
  updateCartUI();
  showToast(`Removed: ${item.name}`, 'info', 2000);
}

function clearCart() {
  cart = [];
  currentTip = 0;
  document.querySelectorAll('.tip-btn').forEach(btn => {
    btn.style.borderColor = 'var(--gray2)';
    btn.style.background = 'var(--gray1)';
    btn.style.color = 'var(--white)';
  });
  document.getElementById('tipDisplay').style.display = 'none';
  document.getElementById('customTipWrap').style.display = 'none';
  document.getElementById('customTipInput').value = '';
  updateCartUI();
  closeCart();
  showToast('Cart cleared', 'info', 2000);
}

function openCart() {
  document.getElementById('cartOverlay').classList.add('show');
  document.getElementById('cartDrawer').classList.add('show');
}

function closeCart() {
  document.getElementById('cartOverlay').classList.remove('show');
  document.getElementById('cartDrawer').classList.remove('show');
}

function checkoutCart() {
  closeCart();
  
  // Build Shopify cart URL with all items
  let cartItems = [];
  
  for (const item of cart) {
    if (item.type === 'bowl' && item.size) {
      const variantKey = 'carnivore-' + item.size;
      const variantId = SHOPIFY_VARIANTS[variantKey];
      if (variantId) {
        cartItems.push(variantId + ':' + (item.quantity || 1));
      }
    }
    if (item.type === 'dogs' && item.size) {
      const variantId = SHOPIFY_DOG_PACKS[item.size];
      if (variantId) {
        cartItems.push(variantId + ':1');
      }
    }
    if (item.type === 'cookies' && item.packSize) {
      const variantId = SHOPIFY_COOKIE_PACKS[item.packSize];
      if (variantId) {
        cartItems.push(variantId + ':1');
      }
    }
    if (item.type === 'brownies' && item.packSize) {
      const variantId = SHOPIFY_BROWNIE_PACKS[item.packSize];
      if (variantId) {
        cartItems.push(variantId + ':1');
      }
    }
  }
  
  // Add tip as note attribute if present
  const tipNote = currentTip > 0 ? '?note=Tip:%20$' + currentTip.toFixed(2) : '';
  
  if (cartItems.length > 0) {
    window.location.href = 'https://' + SHOPIFY_STORE + '/cart/' + cartItems.join(',') + tipNote;
    return;
  }
  
  // Fallback for non-bowl items - show local checkout
  // Set default to tomorrow
  currentCalendarTarget = 'checkout';
  const tomorrow = new Date();
  tomorrow.setDate(tomorrow.getDate() + 1);
  selectDate(tomorrow.getFullYear(), tomorrow.getMonth(), tomorrow.getDate());
  
  document.getElementById('checkoutOverlay').classList.add('show');
  document.getElementById('checkoutDrawer').classList.add('show');
}

function closeCheckout() {
  document.getElementById('checkoutOverlay').classList.remove('show');
  document.getElementById('checkoutDrawer').classList.remove('show');
}

// Simple confetti placeholder
function triggerConfetti() {
  // Confetti animation - can be enhanced later
  console.log(' Order placed!');
}

function placeOrder() {
  const name = document.getElementById('checkoutName').value;
  const phone = document.getElementById('checkoutPhone').value;
  const address = document.getElementById('checkoutAddress').value;
  const date = document.getElementById('checkoutDate').value;
  
  if (!name || !phone || !address || !date) {
    showToast('Please fill in all required fields', 'error', 3000);
    return;
  }
  
  closeCheckout();
  triggerConfetti();
  
  const orderNum = 'ORD-' + Math.random().toString(36).substr(2, 6).toUpperCase();
  showToast(` Order placed! #${orderNum}`, 'success', 4000);
  
  // Clear everything
  cart = [];
  updateCartUI();
  
  // Clear form
  document.getElementById('checkoutName').value = '';
  document.getElementById('checkoutPhone').value = '';
  document.getElementById('checkoutAddress').value = '';
  document.getElementById('checkoutNotes').value = '';
}

// Add cookies to cart
function addCookiesToCart() {
  let totalQty = 0;
  let flavors = [];
  COOKIES.forEach(c => {
    const qty = cookieCart[c.id] || 0;
    totalQty += qty;
    if (qty > 0) flavors.push(`${qty}x ${c.name}`);
  });
  
  if (totalQty < 5) return;
  
  let price = 0;
  let packName = '';
  if (totalQty >= 100) { price = 310; packName = '100 Pack'; }
  else if (totalQty >= 50) { price = 170; packName = '50 Pack'; }
  else if (totalQty >= 30) { price = 104; packName = '30 Pack'; }
  else if (totalQty >= 20) { price = 75; packName = '20 Pack'; }
  else if (totalQty >= 10) { price = 40; packName = '10 Pack'; }
  else { price = 20; packName = '5 Pack'; }
  
  // Add cream cheese and addons
  if (creamCheese) {
    price += totalQty;
  }
  if (addons.giftWrap) price += 5;
  
  const customLabel = document.getElementById('boxLabelInput')?.value;
  
  addToCart({
    type: 'cookies',
    name: 'COOKIEBOXX ' + packName,
    details: flavors.slice(0, 3).join(', ') + (flavors.length > 3 ? '...' : ''),
    price: price,
    qty: totalQty,
    flavors: {...cookieCart},
    customLabel: customLabel,
    creamCheese: creamCheese,
    giftWrap: addons.giftWrap,
    giftMode: document.getElementById('giftToggle')?.classList.contains('active'),
    giftRecipient: document.getElementById('giftRecipient')?.value,
    giftAddress: document.getElementById('giftAddress')?.value,
    giftMessage: document.getElementById('giftMessage')?.value
  });
  
  // Reset cookie builder
  cookieCart = {};
  selectedPackId = null;
  creamCheese = false;
  addons = { giftWrap: false };
  document.querySelectorAll('#quickPacksAvail .quick-pack').forEach(el => el.classList.remove('selected'));
  document.getElementById('creamCheeseToggle')?.classList.remove('active');
  document.getElementById('giftToggle')?.classList.remove('active');
  document.getElementById('giftForm')?.classList.remove('show');
  document.getElementById('addonGiftWrap')?.classList.remove('checked');
  document.getElementById('boxLabelInput').value = '';
  document.getElementById('boxLabelDisplay').textContent = 'COOKIEBOXX';
  initCookieGrid();
  updateCookieSummary();
}

// Add brownies to cart
function addBrowniesToCart() {
  let totalQty = 0;
  let flavors = [];
  BROWNIES.forEach(b => {
    const qty = brownieCart[b.id] || 0;
    totalQty += qty;
    if (qty > 0) flavors.push(`${qty}x ${b.name}`);
  });
  
  if (totalQty < 6) return;
  
  let price = 0;
  let packName = '';
  if (totalQty >= 48) { price = 200; packName = '48 Pack'; }
  else if (totalQty >= 24) { price = 110; packName = '24 Pack'; }
  else if (totalQty >= 12) { price = 60; packName = '12 Pack'; }
  else { price = 30; packName = '6 Pack'; }
  
  // Add addons
  if (brownieAddons.giftWrap) price += 5;
  if (brownieAddons.iceCream) price += 8;
  
  const customLabel = document.getElementById('brownieBoxLabelInput')?.value;
  
  addToCart({
    type: 'brownies',
    name: 'BROWNIEBOXX ' + packName,
    details: flavors.slice(0, 3).join(', ') + (flavors.length > 3 ? '...' : ''),
    price: price,
    qty: totalQty,
    flavors: {...brownieCart},
    customLabel: customLabel,
    giftWrap: brownieAddons.giftWrap,
    iceCream: brownieAddons.iceCream,
    giftMode: brownieGiftMode,
    giftRecipient: document.getElementById('brownieGiftRecipient')?.value,
    giftAddress: document.getElementById('brownieGiftAddress')?.value,
    giftMessage: document.getElementById('brownieGiftMessage')?.value
  });
  
  // Reset brownie builder
  brownieCart = {};
  selectedBrowniePackId = null;
  brownieAddons = { giftWrap: false, iceCream: false };
  brownieGiftMode = false;
  document.querySelectorAll('#browniePacksAvail .quick-pack').forEach(el => el.classList.remove('selected'));
  document.getElementById('brownieGiftSwitch')?.classList.remove('active');
  document.getElementById('brownieGiftForm')?.classList.remove('show');
  document.getElementById('brownieAddonGiftWrap')?.classList.remove('checked');
  document.getElementById('brownieAddonIceCream')?.classList.remove('checked');
  document.getElementById('brownieBoxLabelInput').value = '';
  document.getElementById('brownieBoxLabelDisplay').textContent = 'BROWNIEBOXX';
  initBrownieGrid();
  updateBrownieSummary();
}

// Add bowl to cart
function addBowlToCart(bowlData) {
  addToCart({
    type: 'bowl',
    name: bowlData.name + ' Bowl',
    details: bowlData.size + '  ' + bowlData.window,
    price: bowlData.price,
    bowlId: bowlData.id,
    size: bowlData.size,
    window: bowlData.window,
    location: bowlData.location
  });
}

// Add current bowl from order flow to cart
function addCurrentBowlToCart() {
  if (!bowlType || !size || !win || (!loc && !customSelected)) {
    showToast('Please complete your order first', 'error', 2000);
    return;
  }
  
  const cookiePrice = typeof getCookieAddonPrice === 'function' ? getCookieAddonPrice() : 0;
  const total = (size.price * q) + cookiePrice;
  
  let details = size.name + '  ' + (win ? win.time : '');
  if (mealCookieAddon > 0) details += ' + ' + mealCookieAddon + ' cookies';
  
  addToCart({
    type: 'bowl',
    name: bowlType.name + ' Bowl' + (q > 1 ? ' x' + q : ''),
    details: details,
    price: total,
    bowlId: bowlType.id,
    size: size.id,
    quantity: q,
    window: win ? win.time : '',
    location: customSelected ? document.getElementById('customAddr')?.value : (loc ? loc.name : ''),
    cookies: mealCookieAddon > 0 ? mealCookieAddon : 0
  });
  
  // Reset and go back to landing
  showPage('landing');
  reset();
}

// Add team order to cart
function addPartyOrderToCart() {
  const total = tCarnivore;
  if (total < 10) {
    showToast('Minimum 10 bowls required', 'error', 2000);
    return;
  }
  
  const tier = getTeamPrice(total);
  const price = total * tier.price;
  
  addToCart({
    type: 'bowl',
    name: 'Team Order (' + total + ' bowls)',
    details: total + ' CARNIVORE BOWLS  ' + (tWin ? tWin.time : ''),
    price: price,
    quantity: total,
    window: tWin ? tWin.time : '',
    location: tCustomSelected ? (document.getElementById('tcustomAddr')?.value || 'Custom') : (tLoc ? tLoc.name : '')
  });
  
  // Reset and go back to landing
  tCarnivore = 0;
  tWin = null;
  tLoc = null;
  tCustomSelected = false;
  document.getElementById('tqCarnivore').textContent = '0';
  showPage('landing');
}
// ==================== END CART SYSTEM ====================

// ==================== CALENDAR ====================
let calendarDate = new Date();
let selectedDeliveryDate = null;
let currentCalendarTarget = 'checkout';

function openCalendar(target) {
  currentCalendarTarget = target || 'checkout';
  calendarDate = new Date(); // Reset to current month
  document.getElementById('calendarModal').classList.add('show');
  renderCalendar();
}

function closeCalendar() {
  document.getElementById('calendarModal').classList.remove('show');
}

function renderCalendar() {
  const year = calendarDate.getFullYear();
  const month = calendarDate.getMonth();
  const today = new Date();
  today.setHours(0,0,0,0);
  
  const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                      'July', 'August', 'September', 'October', 'November', 'December'];
  
  document.getElementById('calendarMonthYear').textContent = monthNames[month] + ' ' + year;
  
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  
  let html = '';
  
  // Empty cells for days before the first of the month
  for (let i = 0; i < firstDay; i++) {
    html += '<div class="cal-day empty"></div>';
  }
  
  // Days of the month
  for (let day = 1; day <= daysInMonth; day++) {
    const date = new Date(year, month, day);
    const isPast = date < today;
    const isToday = date.getTime() === today.getTime();
    const isSelected = selectedDeliveryDate && 
                       date.toDateString() === selectedDeliveryDate.toDateString();
    
    let classes = 'cal-day';
    if (isPast) classes += ' past';
    if (isToday) classes += ' today';
    if (isSelected) classes += ' selected';
    
    if (isPast) {
      html += `<div class="${classes}">${day}</div>`;
    } else {
      html += `<div class="${classes}" onclick="selectDate(${year}, ${month}, ${day})">${day}</div>`;
    }
  }
  
  document.getElementById('calendarDays').innerHTML = html;
}

function prevMonth() {
  calendarDate.setMonth(calendarDate.getMonth() - 1);
  renderCalendar();
}

function nextMonth() {
  calendarDate.setMonth(calendarDate.getMonth() + 1);
  renderCalendar();
}

function selectDate(year, month, day) {
  selectedDeliveryDate = new Date(year, month, day);
  
  const options = { weekday: 'short', month: 'short', day: 'numeric' };
  const formattedDate = selectedDeliveryDate.toLocaleDateString('en-US', options);
  const isoDate = selectedDeliveryDate.toISOString().split('T')[0];
  
  // Update the correct display and hidden input based on target
  const targets = {
    'cookie': { display: 'cookieDateDisplay', input: 'cookieDeliveryDate' },
    'brownie': { display: 'brownieDateDisplay', input: 'brownieDeliveryDate' },
    'checkout': { display: 'checkoutDateDisplay', input: 'checkoutDate' }
  };
  
  const t = targets[currentCalendarTarget];
  if (t) {
    const displayEl = document.getElementById(t.display);
    const inputEl = document.getElementById(t.input);
    if (displayEl) {
      displayEl.textContent = formattedDate;
      displayEl.classList.add('has-date');
    }
    if (inputEl) {
      inputEl.value = isoDate;
    }
  }
  
  closeCalendar();
}

function selectToday() {
  const today = new Date();
  selectDate(today.getFullYear(), today.getMonth(), today.getDate());
}

function selectTomorrow() {
  const tomorrow = new Date();
  tomorrow.setDate(tomorrow.getDate() + 1);
  selectDate(tomorrow.getFullYear(), tomorrow.getMonth(), tomorrow.getDate());
}
// ==================== END CALENDAR ====================
</script>

<!-- Calendar Modal -->
<div class="calendar-modal" id="calendarModal">
  <div class="calendar-overlay" onclick="closeCalendar()"></div>
  <div class="calendar-container">
    <div class="calendar-header">
      <h3>Select Delivery Date</h3>
      <button class="calendar-close" onclick="closeCalendar()"></button>
    </div>
    <div class="calendar-quick">
      <button class="quick-date" onclick="selectToday()">Today</button>
      <button class="quick-date" onclick="selectTomorrow()">Tomorrow</button>
    </div>
    <div class="calendar-nav">
      <button onclick="prevMonth()"></button>
      <span id="calendarMonthYear">January 2026</span>
      <button onclick="nextMonth()"></button>
    </div>
    <div class="calendar-weekdays">
      <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
    </div>
    <div class="calendar-days" id="calendarDays"></div>
  </div>
</div>
</body>
</html>
